var TerminusTable=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=85)}([function(t,e){t.exports=void 0},function(t,e){t.exports=void 0},function(t,e){
/**
 * @file Terminus Client Utility Functions
 * @license Apache Version 2
 * Object for bunding up common Terminus Utility Functions 
 */
const r={standard_urls:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",tcs:"http://terminusdb.com/schema/tcs#",xdd:"http://terminusdb.com/schema/xdd#",v:"http://terminusdb.com/woql/variable/",terminus:"http://terminusdb.com/schema/terminus#",vio:"http://terminusdb.com/schema/vio#"},URIEncodePayload:function(t){if("string"==typeof t)return encodeURIComponent(t);const e=[];for(const r of Object.keys(t))if("object"==typeof t[r])for(const n of Object.keys(t[r])){const i=t[r][n];e.push(`${encodeURIComponent(n)}=${encodeURIComponent(i)}`)}else e.push(`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`);return e.join("&")},addURLPrefix:function(t,e){this.standard_urls[t]=e},empty:function(t){if(!t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;if("object"==typeof t)for(const e of Object.keys(t))if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},genBNID:function(){return`_:${Math.random().toString(36).substring(7)}${(new Date).getTime()}`},getShorthand:function(t){if("object"==typeof t&&t.length&&(t=t[0]),t&&"string"==typeof t)for(const e of Object.keys(this.standard_urls)){const r=this.standard_urls[e];if(t.substring(0,r.length)===r){return`${e}:${t.substring(r.length)}`}}return!1},compareIDs:function(t,e){if(t===e)return!0;if(this.unshorten(t)===e)return!0;if(this.unshorten(t)===this.unshorten(e))return!0;const r=this.getShorthand(t),n=this.getShorthand(e);return!(!r||r!==e&&r!==n)||!(!n||n!==t)},shorten:function(t,e){e=e||this.standard_urls;for(const r in e)if(e[r]==t.substring(0,e[r].length))return`${r}:${t.substring(e[r].length)}`;return t},unshorten:function(t){if(this.validURL(t))return t;if(!t)return t;const e=t.split(":");return e[1]&&this.standard_urls[e[0]]?this.standard_urls[e[0]]+e[1]:t},validURL:function(t){return!(!t||"http://"!==t.substring(0,7)&&"https://"!==t.substring(0,8))},labelFromURL:function(t){let e=this.urlFragment(t);return e=e||t,e.lastIndexOf("/")<e.length-1&&(e=e.substring(e.lastIndexOf("/")+1)),e=e.replace(/_/g," "),e.charAt(0).toUpperCase()+e.slice(1)},urlFragment:function(t){let e=(t="string"!=typeof t?window.location.href:t).split("#");if(e.length<=1&&(this.validURL(t)||(e=t.split(":"))),e.length>=1){const[,r]=e;if(r){const[e]=r.split("?");t=e}}return t},lastURLBit:function(t){t=void 0===t?window.location.href:t;const[e]=t.split("#"),[r]=e.split("?");return t=r.substring(t.lastIndexOf("/")+1)},getStdURL:function(t,e,r){if(this.standard_urls[t]){if(!r)return this.standard_urls[t]+e;if(r===this.standard_urls[t]+e)return r}return!1},addNamespacesToVariables:function(t){for(var e=[],r=0;r<t.length;r++)t[r]&&e.push(this.addNamespaceToVariable(t[r]));return e},addNamespaceToVariable:function(t){return"string"==typeof t&&"v:"!=t.substring(0,2)?"v:"+t:t},removeNamespaceFromVariable:function(t){return"v:"==t.substring(0,2)?t.substring(2):t},removeNamespacesFromVariables:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.removeNamespaceFromVariable(t[r]));return e},getConfigValue:function(t,e){if("string"==typeof t&&"v:"==t.substring(0,2)){var r=e[t];return r&&r["@value"]?r["@value"]:r}return t},TypeHelper:{}};r.TypeHelper.isStringType=function(t){return"http://www.w3.org/2001/XMLSchema#string"===t||"xsd:string"===t},r.TypeHelper.isDatatype=function(t){var e=r.shorten(t);return!!(e&&"xsd:"==e.substring(0,4)||"xdd:"==e.substring(0,4))},r.TypeHelper.numberWithCommas=function(t,e){if(e=e||",",t>=1e3||t<=-1e3){const r=t.toString().split(".");t<=-1e3&&(r[0]=r[0].substring(1)),r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),t=t<=-1e3?`-${r.join(".")}`:r.join(".")}return t},r.TypeHelper.datatypes=["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon","xdd:dateRange","xdd:gYearRange","xdd:integerRange","xdd:decimalRange","xdd:cc","xdd:email","xdd:html","xdd:url","xsd:anySimpleType","xsd:string","xsd:boolean","xsd:decimal","xsd:double","xsd:float","xsd:time","xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:byte","xsd:short","xsd:integer","xsd:long","xsd:unsignedByte","xsd:unsignedInt","xsd:unsignedLong","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:base64Binary","xsd:anyURI","xsd:language","xsd:normalizedString","xsd:token","xsd:NMTOKEN","xsd:Name","xsd:NCName","xsd:NOTATION","xsd:QName","xsd:ID","xsd:IDREF","xsd:ENTITY","rdf:XMLLiteral","rdf:PlainLiteral","rdfs:Literal","xdd:json"],r.TypeHelper.parseRangeValue=function(t,e){e=e||",";let r=[];return"object"==typeof t&&t.length?r=t:t&&("string"!=typeof t&&(t=`${t}`),t.length&&"["===t.charAt(0)&&"]"===t.charAt(t.length-1)?(r.push(t.substring(1,t.indexOf(e))),r.push(t.substring(t.indexOf(e)+1,t.length-1))):r.push(t)),r},r.DateHelper={},r.DateHelper.parseXsdTime=function(t){if(!t)return{};const e=this.extractXsdTimezone(t);return e&&(t=t.substring(0,t.length-e.length)),{hour:t.substring(0,2),minute:t.substring(3,5),second:t.substring(6),timezone:e}},r.DateHelper.parseXsdDate=function(t){const e=this.extractXsdTimezone(t);let r,n;if(e&&(t=t.substring(0,t.length-e.length)),r="-"===t.substring(0,1)?t.substring(0,5):t.substring(0,4),r&&Math.abs(r)<1e4){let i=t.substring(r.length+1,r.length+3);if(!i)return!1;i=parseInt(i,10);let o=t.substring(r.length+4);if(!o)return!1;o=parseInt(o,10),n={year:r,month:i,day:o,timezone:e}}return n},r.DateHelper.parseDate=function(t,e){let r;if("xsd:date"===t)r=this.parseXsdDate(e);else if("xsd:time"===t)r=this.parseXsdTime(e);else if("xsd:dateTime"===t)r=this.parseXsdDateTime(e);else if("xsd:gYear"===t)r={year:e};else if("xsd:gYearRange"===t)r={year:e};else if("xsd:gMonth"===t)r={month:e.substring(2)};else if("xsd:gDay"===t)r={day:e};else if("xsd:gYearMonth"===t){const t=e.split("-");for(;t.length<2;)t.push("");r={year:t[0],month:t[1]}}else if("xsd:gMonthDay"===t){const t=e.split("-");for(;t.length<2;)t.push("");r={month:t[0],day:t[1]}}else"xsd:dateTimeStamp"===t&&(r=this.parseXsdDateTime(e));return r},r.DateHelper.addXsdPadding=function(t){const e={};return void 0!==t.year&&!1!==t.year&&t.year<1e3?Math.abs(t.year)<10?e.year=t.year<0?`-000${Math.abs(t.year)}`:`000${t.year}`:Math.abs(t.year)<100?e.year=t.year<0?`-00${Math.abs(t.year)}`:`00${t.year}`:e.year=t.year<0?`-0${Math.abs(t.year)}`:`0${t.year}`:t.year&&(e.year=t.year),void 0!==t.month&&!1!==t.month&&t.month<10?e.month=`0${t.month}`:t.month&&(e.month=t.month),void 0!==t.day&&!1!==t.day&&t.day<10?e.day=`0${t.day}`:t.day&&(e.day=t.day),void 0!==t.hour&&!1!==t.hour&&t.hour<10?e.hour=`0${t.hour}`:t.hour&&(e.hour=t.hour),void 0!==t.minute&&!1!==t.minute&&t.minute<10?e.minute=`0${t.minute}`:t.minute&&(e.minute=t.minute),void 0!==t.second&&!1!==t.second&&t.second<10?e.second=`0${t.second}`:t.second&&(e.second=t.second),e},r.DateHelper.xsdFromParsed=function(t,e){const r=this.addXsdPadding(t);let n;if("xsd:gYear"===e)n=!!r.year&&r.year;else{if("xsd:time"===e)return!!(r.hour&&r.minute&&r.second)&&`${r.hour}:${r.minute}:${r.second}`;if("xsd:date"===e)return!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}`;"xsd:dateTime"===e||"xsd:dateTimeStamp"===e?(n=!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}T`,n&&(n+=`${r.hour?r.hour:"12"}:${r.minute?r.minute:"00"}:${r.second?r.second:"00"}`)):"xsd:gMonth"===e?n=!!r.month&&`--${r.month}`:"xsd:gDay"===e?n=!!r.day&&`---${r.day}`:"xsd:gYearMonth"===e?n=!(!r.year||!r.month)&&`${r.year}-${r.month}`:"xsd:gMonthDay"===e&&(n=!(!r.day||!r.month)&&`--${r.month}-${r.day}`)}return r.timezone&&(n+=r.timezone),n},r.DateHelper.convertTimestampToXsd=function(t){const e=new Date(1e3*t);return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}},r.DateHelper.parseXsdDateTime=function(t){if(!t)return{};if("number"==typeof t)return this.convertTimestampToXsd(t);const e=this.extractXsdTimezone(t);e&&(t=t.substring(0,t.length-e.length));const r=this.parseXsdDate(t),n=this.parseXsdTime(t.substring(t.indexOf("T")+1));for(const t of Object.keys(n))r[t]=n[t];return r.timezone=e,r},r.DateHelper.extractXsdTimezone=function(t){return t&&"Z"===t.charAt(t.length-1)?"Z":(!t||"+"!==t.charAt(t.length-6)&&"-"!==t.charAt(t.length-6)||t.substring(t.length-6),!1)},t.exports=r},function(t,e,r){"use strict";var n=r(15),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},deepMerge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]="object"==typeof r?t({},r):r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,(function(e,i){t[i]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)&&n.length){var s=i.apply(null,n);s&&t.push(s)}else if("object"===o)for(var a in n)r.call(n,a)&&n[a]&&t.push(a)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},function(t,e,r){const n=r(2),i=r(33);function o(t){return this.query=t||{},this.errors=[],this.cursor=this.query,this.chain_ended=!1,this.contains_update=!1,this.paging_transitive_properties=["select","from","start","when","opt","limit"],this.update_operators=["woql:AddTriple","woql:DeleteTriple","woql:AddQuad","woql:DeleteQuad","woql:DeleteObject","woql:UpdateObject"],this.vocab=this.loadDefaultVocabulary(),this.tripleBuilder=!1,this}function s(t){let e=a(t),r=[];for(;2==e.length;)r.push(e[0]),e=a(e[1]);return r.push(e[0]),r}function a(t){let e=1;if("("==(t=t.trim()).charAt(0)){for(var r=1;r<t.length;r++)if("("==t.charAt(r)?e++:")"==t.charAt(r)&&e--,0==e){let e=t.substring(r+1).trim();return e?[t.substring(1,r),e]:a(t.substring(1,r))}return[]}if("+"==t[0]||","==t[0]||"|"==t[0]){let e=[t[0]];return t.substring(1)&&e.push(t.substring(1)),e}if("{"==t.charAt(0)){let e=[t.substring(0,t.indexOf("}")+1)];return t.substring(t.indexOf("}")+1)&&e.push(t.substring(t.indexOf("}")+1)),e}for(r=1;r<t.length;r++)if(","==t[r]||"|"==t[r]||"+"==t[r]||"{"==t[r])return[t.substring(0,r),t.substring(r)];return[t]}function u(t,e){if(Array.isArray(t))return t;if(e){if(-1!=["woql:And","woql:Or"].indexOf(t["@type"])){if(!t["woql:query_list"]||!t["woql:query_list"].length)return{};if(1==t["woql:query_list"].length)return u(t["woql:query_list"][0]["woql:query"],e)}if(void 0!==t["woql:query"]&&"woql:Comment"!=t["@type"]&&!t["woql:query"]["@type"])return{};if(void 0!==t["woql:consequent"]&&!t["woql:consequent"]["@type"])return{}}let r={};for(var i in t){let s=t[i];if(Array.isArray(s)){let t=[];for(var o=0;o<s.length;o++)if("object"==typeof s[o]){let r=u(s[o],e);r&&n.empty(r)||t.push(r)}else t.push(s[o]);r[i]=t}else if("object"==typeof s){let t=u(s,e);t&&n.empty(t)||(r[i]=t)}else r[i]=s}return r}o.prototype.parameterError=function(t){return this.errors.push({type:this.cursor["@type"],message:t}),this},o.prototype.hasErrors=function(){return this.errors.length>0},o.prototype.addSubQuery=function(t){if(t)this.cursor["woql:query"]=this.jobj(t);else{var e={};this.cursor["woql:query"]=e,this.cursor=e}return this},o.prototype.containsUpdate=function(t){if(t=t||this.query,-1!==this.update_operators.indexOf(t["@type"]))return!0;if(t["woql:consequent"]&&this.containsUpdate(t["woql:consequent"]))return!0;if(t["woql:query"])return this.containsUpdate(t["woql:query"]);if(t["woql:query_list"])for(var e=0;e<t["woql:query_list"].length;e++)if(this.containsUpdate(t["woql:query_list"][e]))return!0;return!1},o.prototype.updated=function(){return this.contains_update=!0,this},o.prototype.jlt=function(t,e){return{"@type":e=e?-1==e.indexOf(":")?"xsd:"+e:e:"xsd:string","@value":t}},o.prototype.varj=function(t){return"v:"==t.substring(0,2)&&(t=t.substring(2)),"string"==typeof t?{"@type":"woql:Variable","woql:variable_name":{"@value":t,"@type":"xsd:string"}}:t},o.prototype.jobj=function(t){return t.json?t.json():!0===t?{"@type":"woql:True"}:t},o.prototype.asv=function(t,e,r){let n={};return"number"==typeof t?(n["@type"]="woql:IndexedAsVar",n["woql:index"]=this.jlt(t,"xsd:nonNegativeInteger")):"string"==typeof t&&(n["@type"]="woql:NamedAsVar",n["woql:identifier"]=this.jlt(t)),"v:"==e.substring(0,2)&&(e=e.substring(2)),n["woql:variable_name"]={"@type":"xsd:string","@value":e},r&&(n["woql:var_type"]=this.jlt(r,"xsd:anyURI")),n},o.prototype.addASV=function(t,e){"woql:IndexedAsVar"==e["@type"]?(t["woql:indexed_as_var"]||(t["woql:indexed_as_var"]=[]),t["woql:indexed_as_var"].push(e)):(t["woql:named_as_var"]||(t["woql:named_as_var"]=[]),t["woql:named_as_var"].push(e))},o.prototype.wform=function(t){return t&&t.format&&(this.cursor["woql:format"]={"@type":"woql:Format","woql:format_type":{"@value":t.format,"@type":"xsd:string"}},t.format_header&&(this.cursor["woql:format"]["woql:format_header"]={"@value":!0,"@type":"xsd:boolean"})),this},o.prototype.arop=function(t){if("object"==typeof t)return t.json?t.json():t;let e=this.cleanObject(t,"xsd:decimal");return e["@type"]="woql:ArithmeticValue",e},o.prototype.vlist=function(t){let e={"@type":"woql:Array","woql:array_element":[]};"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){let n=this.cleanObject(t[r]);n["@type"]="woql:ArrayElement",n["woql:index"]=this.jlt(r,"xsd:nonNegativeInteger`"),e["woql:array_element"].push(n)}return e},o.prototype.wlist=function(t){if("string"==typeof t)return this.expandVariable(t,!0);if(Array.isArray(t)){let r={"@type":"woql:Array","woql:array_element":[]};for(var e=0;e<t.length;e++){let n=this.cleanObject(t[e]);"string"==typeof n&&(n={node:n}),n["@type"]="woql:ArrayElement",n["woql:index"]=this.jlt(e,"xsd:nonNegativeInteger`"),r["woql:array_element"].push(n)}return r}},o.prototype.qle=function(t,e){let r=this.jobj(t);return{"@type":"woql:QueryListElement","woql:index":this.jlt(e,"nonNegativeInteger"),"woql:query":r}},o.prototype.cleanSubject=function(t){let e=!1;return"object"==typeof t?t:"string"==typeof t?(e=-1!=t.indexOf(":")?t:this.vocab&&this.vocab[t]?this.vocab[t]:"doc:"+t,this.expandVariable(e)):(this.parameterError("Subject must be a URI string"),""+t)},o.prototype.cleanPredicate=function(t){let e=!1;return"object"==typeof t?t:"string"!=typeof t?(this.parameterError("Predicate must be a URI string"),""+t):(e=-1!=t.indexOf(":")?t:this.vocab&&this.vocab[t]?this.vocab[t]:"scm:"+t,this.expandVariable(e))},o.prototype.cleanPathPredicate=function(t){let e=!1;return e=-1!=t.indexOf(":")?t:this.vocab&&this.vocab[t]?this.vocab[t]:"scm:"+t,e},o.prototype.cleanObject=function(t,e){let r={"@type":"woql:Datatype"};if("string"==typeof t){if(-1!==t.indexOf(":"))return this.cleanClass(t);if(this.vocab&&this.vocab[t])return this.cleanClass(this.vocab[t]);r["woql:datatype"]=this.jlt(t,e)}else if("number"==typeof t)e=e||"xsd:decimal",r["woql:datatype"]=this.jlt(t,e);else if("object"==typeof t){if(!t["@value"])return t;r["woql:datatype"]=t}return r},o.prototype.cleanGraph=function(t){return{"@type":"xsd:string","@value":t}},o.prototype.expandVariable=function(t,e){return"v:"==t.substring(0,2)||e?("v:"==t.substring(0,2)&&(t=t.substring(2)),{"@type":"woql:Variable","woql:variable_name":{"@value":t,"@type":"xsd:string"}}):{"@type":"woql:Node","woql:node":t}},o.prototype.cleanClass=function(t,e){return"string"!=typeof t?"":(-1==t.indexOf(":")&&(t=this.vocab&&this.vocab[t]?this.vocab[t]:"scm:"+t),e?t:this.expandVariable(t))},o.prototype.cleanType=function(t,e){return this.cleanClass(t,e)},o.prototype.defaultContext=function(t){let e={};for(var r in n.standard_urls)e[r]=n.standard_urls[r];return e.scm=t+"/schema#",e.doc=t+"/document/",e.db=t+"/",e},o.prototype.getContext=function(t){t=t||this.query;for(const n of Object.keys(t)){if("@context"==n)return t[n];if(-1!==this.paging_transitive_properties.indexOf(n)){var e=t[n][1],r=this.getContext(e);if(r)return r}}},o.prototype.context=function(t){this.cursor["@context"]=t},o.prototype.loadDefaultVocabulary=function(){var t={type:"rdf:type",label:"rdfs:label",Class:"owl:Class",DatatypeProperty:"owl:DatatypeProperty",ObjectProperty:"owl:ObjectProperty",Document:"terminus:Document",abstract:"terminus:abstract",comment:"rdfs:comment",range:"rdfs:range",domain:"rdfs:domain",subClassOf:"rdfs:subClassOf",string:"xsd:string",integer:"xsd:integer",decimal:"xsd:decimal",email:"xdd:email",json:"xdd:json",dateTime:"xsd:dateTime",date:"xsd:date",coordinate:"xdd:coordinate",line:"xdd:coordinatePolyline",polygon:"xdd:coordinatePolygon"};return t},o.prototype.setVocabulary=function(t){this.vocab=t},o.prototype.getVocabulary=function(t){return this.vocab},o.prototype.loadVocabulary=function(t){(new o).quad("v:S","v:P","v:O","schema/*").execute(t).then(t=>{if(t.bindings&&t.bindings.length>0)for(var e=0;e<t.bindings.length;e++)for(var r in t.bindings[e]){var n=t.bindings[e][r];if("string"==typeof n){var i=n.split(":");2==i.length&&i[1]&&"_"!=i[0]&&(this.vocab[i[0]]=i[1])}}})},o.prototype.execute=function(t,e){return this.query["@context"]||(this.query["@context"]=t.connection.getJSONContext()),this.query["@context"].woql="http://terminusdb.com/schema/woql#",this.query["@context"]._="_:",t.query(this,e)},o.prototype.json=function(t){return t?(this.query=u(t),this):u(this.query,!0)},o.prototype.prettyPrint=function(t){return t=t||"js",new i(this.vocab,t).printJSON(this.query)},o.prototype.wrapCursorWithAnd=function(){let t=(new o).json(this.cursor);for(var e in this.cursor)delete this.cursor[e];this.and(t,{}),this.cursor=this.cursor["woql:query_list"][1]["woql:query"]},o.prototype.findLastSubject=function(t){if(t&&t["woql:query_list"])for(var e=t["woql:query_list"].length-1;e>=0;e--){let r=this.findLastSubject(t["woql:query_list"][e]);if(r)return r}if(t&&t["woql:query"]){let e=this.findLastSubject(t["woql:query"]);if(e)return e}return!(!t||!t["woql:subject"])&&t},o.prototype.compilePathPattern=function(t){let e=s(t);if(e&&e.length)return function t(e,r){if(1==e.length){let n=s(e[0]);if(1==n.length){let t=n[0].trim();return{"@type":"woql:PathPredicate","woql:path_predicate":{"@id":"*"==t?"owl:topObjectProperty":r.cleanPathPredicate(t)}}}return t(n,r)}if(-1!=e.indexOf("|")){let n=e.slice(0,e.indexOf("|")),i=e.slice(e.indexOf("|")+1);return{"@type":"woql:PathOr","woql:path_left":t(n,r),"woql:path_right":t(i,r)}}if(-1!=e.indexOf(",")){let n=e.slice(0,e.indexOf(",")),i=e.slice(e.indexOf(",")+1);return{"@type":"woql:PathSequence","woql:path_first":t(n,r),"woql:path_second":t(i,r)}}if("+"==e[1])return{"@type":"woql:PathPlus","woql:path_pattern":t([e[0]],r)};if("{"==e[1].charAt(0)){let n=e[1].substring(1,e[1].length-1).split(",");return{"@type":"woql:PathTimes","woql:path_minimum":{"@type":"xsd:positiveInteger","@value":n[0]},"woql:path_maximum":{"@type":"xsd:positiveInteger","@value":n[1]},"woql:path_pattern":t([e[0]],r)}}return r.parameterError("Pattern error - could not be parsed "+e[0]),{"@type":"woql:PathPredicate","rdfs:label":"failed to parse query "+e[0]}}(e,this);this.parameterError("Pattern error - could not be parsed "+t)},t.exports=o},function(t,e,r){const n=r(35),i=r(2);
/**
 * @file WOQL Rules 
 * @license Apache Version 2
 * WOQL Rules support pattern matching on results of WOQL Queries 
 */
function o(){n.TerminusRule.call(this),this.pattern=new s}function s(t){n.TerminusPattern.call(this,t)}o.prototype=Object.create(n.TerminusRule.prototype),o.prototype.constructor=n.TerminusRule,o.prototype.setVariables=function(t){return t&&t.length&&(this.pattern.variables=i.addNamespacesToVariables(t),this.current_variable=this.pattern.variables[this.pattern.variables.length-1]),this},o.prototype.vars=function(...t){return this.setVariables(t)},o.prototype.v=function(t){return t?(this.current_variable=i.addNamespaceToVariable(t),this):this.current_variable},o.prototype.edge=function(t,e){if(this.scope("edge"),t){let e=i.addNamespaceToVariable(t);this.setVariables([e]),this.pattern.source=e}if(e){let r=i.addNamespaceToVariable(e);t||this.setVariables([r]),this.pattern.target=r}return this},o.prototype.rownum=function(t){return void 0===t?this.pattern.rownum:(this.pattern.rownum=t,this)},o.prototype.in=function(...t){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(t)),this},o.prototype.filter=function(t){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(t)),this},o.prototype.matchRow=function(t,e,r,n){for(var i=[],o=0;o<t.length;o++)n&&this.rule&&void 0===this.rule[n]||t[o].pattern.matchRow(e,r)&&i.push(t[o]);return i},o.prototype.matchCell=function(t,e,r,n,i){for(var o=[],s=0;s<t.length;s++)i&&this.rule&&void 0===this.rule[i]||t[s].pattern.matchCell(e,r,n)&&o.push(t[s]);return o},o.prototype.matchColumn=function(t,e,r){for(var n=[],i=0;i<t.length;i++)r&&this.rule&&void 0===this.rule[r]||t[i].pattern.matchColumn(e)&&n.push(t[i]);return n},o.prototype.matchNode=function(t,e,r,n,i){for(var o=[],s=0;s<t.length;s++)i&&this.rule&&void 0===this.rule[i]||t[s].pattern.matchNode(e,r,n)&&o.push(t[s]);return o},o.prototype.matchPair=function(t,e,r,n,i){for(var o=[],s=0;s<t.length;s++)i&&this.rule&&void 0===this.rule[i]||t[s].pattern.matchPair(e,r,n)&&o.push(t[s]);return o},o.prototype.matchEdge=o.prototype.matchPair,s.prototype=Object.create(n.TerminusPattern.prototype),s.prototype.constructor=n.TerminusPattern,s.prototype.prettyPrint=function(t){var e=this.scope+"('";for(var r in this.variables&&(e+=this.variables.join("', '")),e+="')",void 0!==this.literal&&(e+=".literal("+this.literal+")"),void 0!==this.type&&(e+=".type("+this.unpack(this.type)+")"),void 0!==this.value&&(e+=".value("+this.unpack(this.value,!0)+")"),this.constraints){e+=".v('"+r+"')";for(var n=0;n<this.constraints[r].length;n++)"function"==typeof this.constraints[r][n]?e+=".filter("+this.constraints[r][n]+")":e+=".in("+json.unpack(this.constraints[r][n])+")"}return e},s.prototype.matchRow=function(t,e){return!(void 0!==this.rownum&&void 0!==e&&!this.numberMatch(this.rownum,e))&&((!this.scope||"row"==this.scope)&&!!this.testVariableConstraints(t))},s.prototype.matchCell=function(t,e,r){return!(void 0!==this.rownum&&void 0!==r&&!this.numberMatch(this.rownum,r))&&(!!this.testBasics("column",t[e])&&((!this.variables||!this.variables.length||-1!=this.variables.indexOf(e))&&!!this.testVariableConstraints(t)))},s.prototype.matchNode=function(t,e,r){return!!this.testBasics("node",t[e])&&((!this.variables||!this.variables.length||-1!=this.variables.indexOf(e))&&!!this.testVariableConstraints(t))},s.prototype.matchColumn=function(t){return(!this.scope||"column"==this.scope)&&(!this.variables||!this.variables.length||-1!=this.variables.indexOf(t))},s.prototype.matchPair=function(t,e,r){return(!this.scope||"edge"==this.scope)&&((!this.source||this.source==e)&&((!this.target||this.target==r)&&!!this.testVariableConstraints(t)))},s.prototype.testVariableConstraints=function(t){for(var e in this.constraints)if(!this.testVariableConstraint(e,t[e]))return!1;return!0},s.prototype.testVariableConstraint=function(t,e){if(!this.constraints[t])return!0;for(var r=0;r<this.constraints[t].length;r++)if(!this.testValue(e,this.constraints[t][r]))return!1;return!0},s.prototype.setPattern=function(t){for(var e in t)this[e]=t[e]},s.prototype.json=function(){var t={};return this.scope&&(t.scope=this.scope),this.value&&(t.value=this.value),this.rownum&&(t.rownum=this.rownum),this.variables&&(t.variables=this.variables),this.literal&&(t.literal=this.literal),this.type&&(t.type=this.type),this.constraints&&(t.constraints=this.constraints),this.source&&(t.source=this.source),this.target&&(t.target=this.target),t},t.exports=o},function(t,e,r){const n=r(6);function i(){this.rules=[]}function o(){n.call(this),this.rule={}}i.prototype.render=function(t){return t&&(this.view_render=t),this.view_render},i.prototype.renderer=function(t){return t&&(this.view_renderer=t),this.view_renderer},i.prototype.getRulesJSON=function(){let t=[];for(var e=0;e<this.rules.length;e++)t.push(this.rules[e].json());return t},i.prototype.getBasicJSON=function(){let t={};return this.view_render&&(t.render=this.view_render),this.view_renderer&&(t.renderer=this.view_renderer),t},i.prototype.loadBasicJSON=function(t){t.render&&(this.view_render=t.view_render),t.renderer&&(this.view_renderer=t.view_renderer)},i.prototype.getBasicprettyPrint=function(){let t="";return void 0!==this.render()&&(t+="view.render("+this.render()+")\n"),void 0!==this.renderer()&&(t+="view.renderer('"+this.renderer()+"')\n"),t},o.prototype=Object.create(n.prototype),o.prototype.constructor=n,o.prototype.prettyPrint=function(t){let e="";return this.pattern&&(e=this.pattern.prettyPrint(t)),void 0!==this.color()&&(e+=".color(["+this.color().join(",")+"])"),void 0!==this.hidden()&&(e+=".hidden("+this.hidden()+")"),void 0!==this.size()&&(e+=".size('"+this.size()+"')"),void 0!==this.icon()&&(e+=".icon("+JSON.stringify(this.icon())+")"),void 0!==this.text()&&(e+=".text("+JSON.stringify(this.text())+")"),void 0!==this.border()&&(e+=".border("+JSON.stringify(this.border())+")"),void 0!==this.args()&&(e+=".args("+JSON.stringify(this.args())+")"),void 0!==this.renderer()&&(e+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(e+=".render("+this.render()+")"),void 0!==this.click()&&(e+=".click("+this.click()+")"),void 0!==this.hover()&&(e+=".hover("+this.hover()+")"),e},o.prototype.json=function(t){if(!t){var e={};return this.pattern&&(e.pattern=this.pattern.json()),e.rule=this.rule,e}return this.rule=t.rule||{},t.pattern&&this.pattern.setPattern(t.pattern),this},o.prototype.size=function(t){return void 0===t?this.rule.size:(this.rule.size=t,this)},o.prototype.color=function(t){return void 0===t?this.rule.color:(this.rule.color=t,this)},o.prototype.icon=function(t){return t?(this.rule.icon=t,this):this.rule.icon},o.prototype.text=function(t){return t?(this.rule.text=t,this):this.rule.text},o.prototype.border=function(t){return t?(this.rule.border=t,this):this.rule.border},o.prototype.renderer=function(t){return void 0===t?this.rule.renderer:(this.rule.renderer=t,this)},o.prototype.render=function(t){return void 0===t?this.rule.render:(this.rule.render=t,this)},o.prototype.click=function(t){return t?(this.rule.click=t,this):this.rule.click},o.prototype.hover=function(t){return t?(this.rule.hover=t,this):this.rule.hover},o.prototype.hidden=function(t){return void 0===t?this.rule.hidden:(this.rule.hidden=t,this)},o.prototype.args=function(t){return void 0===t?this.rule.args:(this.rule.args=t,this)},t.exports={WOQLViewRule:o,ViewConfig:i}},function(t,e){function r(t,e,r){let i="";return r.response?(r=r.response).data&&(i+=`${n(r.data)}`):r.body&&(i+=`${n(r.body)}`),t=t.split("?")[0],r.status&&(i+=`Code: ${r.status}`),r.action&&(i+=` Action: ${r.action}`),r.type&&(i+=` Type: ${r.type}`),t&&(i+=` url: ${t}`),e&&e.method&&(i+=` method: ${e.method}`),i}function n(t){if("object"==typeof t){let e="";for(const r of Object.keys(t))t[r]&&"object"!=typeof t[r]&&(e+=`${r} ${t[r]} `);return e}return t}t.exports={getErrorAsMessage:r,getAPIErrorMessage:function(t,e,n){return`API Error ${r(t,e,n)}`},getAccessDeniedMessage:function(t,e,n){return`Access Denied ${r(t,e,n)}`},accessDenied:function(t,e,r){const n={status:403};return n.url=(r||"")+(e||""),n.type="client",n.action=t,n.body=`${n.action} not permitted for ${n.url}`,n},getInvalidURIMessage:function(t,e){return`Invalid argument to\n            ${e}. \n            ${t}\n            is not a valid Terminus DB API endpoint`},getInvalidParameterMessage:function(t,e){return`Invalid Parameter to\n            ${t}. \n            ${e}`},parseAPIError:function(t){const e={};if(e.status=t.status,e.type=t.type,t.data&&"object"==typeof t.data){let r;try{r=t.text()}catch(e){try{r=t.json()}catch(e){r=t.toString()}}e.body=r}else t.data&&(e.body=t.data);return e.url=t.url,e.headers=t.headers,e.redirected=t.redirected,e}}},function(t,e,r){const n=r(35);
/**
 * @file Frame Rule
 * @license Apache Version 2
 */function i(){n.TerminusRule.call(this),this.pattern=new o}function o(){n.TerminusPattern.call(this)}i.prototype=Object.create(n.TerminusRule.prototype),i.prototype.constructor=n.TerminusRule,i.prototype.testRules=function(t,e,r){var n=[];if(t&&t.length)for(var i=0;i<t.length;i++){(!t[i].pattern||this.patternMatchesFrame(t[i].pattern,e))&&(n.push(t[i]),r&&"function"==typeof r&&r(e,t[i]))}return n},i.prototype.patternMatchesFrame=function(t,e){return t.checkFrame?t.checkFrame(e):(new o).setPattern(t).checkFrame(e)},i.prototype.property=function(...t){return t&&0!=t.length?(this.pattern.property=t,this):this.pattern.property},i.prototype.frame_type=function(...t){return t&&0!=t.length?(this.pattern.frame_type=t,this):this.pattern.frame_type},i.prototype.label=function(...t){return t&&0!=t.length?(this.pattern.label=t,this):this.pattern.label},i.prototype.subject=function(...t){return t&&0!=t.length?(this.pattern.subject=t,this):this.pattern.subject},i.prototype.subjectClass=function(...t){return t&&0!=t.length?(this.pattern.subjectClass=t,this):this.pattern.subjectClass},i.prototype.range=function(...t){return t&&0!=t.length?(this.pattern.range=t,this):this.pattern.range},i.prototype.depth=function(t){return void 0===t?this.pattern.depth:(this.pattern.depth=t,this)},i.prototype.index=function(...t){return t&&0!=t.length?(this.pattern.index=t,this):this.pattern.index},i.prototype.status=function(...t){return t&&0!=t.length?(this.pattern.status=t,this):this.pattern.status},i.prototype.parent=function(t){return t?(this.pattern.parent=t,this):this.pattern.parent},i.prototype.children=function(...t){if(void 0===t||0==t.length)return this.pattern.children;void 0===this.pattern.children&&(this.pattern.children=[]);for(let e=0;e<t.length;e++)this.pattern.children.push(t[e]);return this},o.prototype=Object.create(n.TerminusPattern.prototype),o.prototype.constructor=n.TerminusPattern,o.prototype.setPattern=function(t){if(t.scope&&(this.scope=t.scope),void 0!==t.literal&&(this.literal=t.literal),void 0!==t.type&&(this.type=t.type),void 0!==t.label&&(this.label=t.label),void 0!==t.frame_type&&(this.frame_type=t.frame_type),void 0!==t.subject&&(this.subject=t.subject),void 0!==t.subjectClass&&(this.subjectClass=t.subjectClass),void 0!==t.range&&(this.range=t.range),void 0!==t.property&&(this.property=t.property),void 0!==t.value&&(this.value=t.value),void 0!==t.parent){let e=t.parent;"function"!=typeof e.json&&(e=(new o).setPattern(e)),this.parent=e}if(t.children){this.children=[];for(let r=0;r<t.children.length;r++){var e=t.children[r];"function"!=typeof e.json&&(e=(new o).setPattern(e)),this.children.push(e)}}void 0!==t.depth&&(this.depth=t.depth),void 0!==t.index&&(this.index=t.index),void 0!==t.status&&(this.status=t.status)},o.prototype.json=function(){var t={};if(void 0!==this.literal&&(t.literal=this.literal),this.type&&(t.type=this.type),this.scope&&(t.scope=this.scope),void 0!==this.value&&(t.value=this.value),void 0!==this.label&&(t.label=this.label),void 0!==this.frame_type&&(t.frame_type=this.frame_type),void 0!==this.subject&&(t.subject=this.subject),void 0!==this.subjectClass&&(t.subjectClass=this.subjectClass),void 0!==this.range&&(t.range=this.range),void 0!==this.property&&(t.property=this.property),void 0!==this.parent&&(t.parent=this.parent.json?this.parent.json():this.parent),void 0!==this.children){t.children=[];for(var e=0;e<this.children.length;e++)t.children.push(this.children[e].json?this.children[e].json():this.children[e])}return void 0!==this.depth&&(t.depth=this.depth),void 0!==this.index&&(t.index=this.index),void 0!==this.status&&(t.status=this.status),t},o.prototype.checkFrame=function(t){var e=this.getRendererType(t);return!!e&&((!this.scope||this.scope==e||"*"==this.scope)&&(!this.illegalRuleType(e)&&(!(this.frame_type&&!this.checkFrameType(e,t))&&(!(this.label&&!this.checkLabel(e,t))&&(!(this.subject&&!this.checkSubject(e,t))&&(!(this.subjectClass&&!this.checkSubjectClass(e,t))&&(!(this.property&&!this.checkProperty(e,t))&&(!(void 0!==this.depth&&!this.checkDepth(e,t))&&(!(this.range&&!this.checkRange(e,t))&&(!(void 0!==this.value&&!this.checkValue(e,t))&&(!(this.type&&!this.checkType(e,t))&&(!(void 0!==this.literal&&!this.checkLiteral(e,t))&&(!(this.parent&&!this.checkParent(e,t))&&(!(this.children&&this.children.length&&!this.checkChildren(e,t))&&(!(this.index&&!this.checkIndex(e,t))&&!(this.status&&!this.checkStatus(e,t)))))))))))))))))},o.prototype.prettyPrint=function(t){if("*"==this.scope)var e="all()";else e=this.scope+"()";if(void 0!==this.literal&&(e+=".literal("+this.literal+")"),void 0!==this.type&&(e+=".type("+this.unpack(this.type)+")"),void 0!==this.range&&(e+=".range("+this.unpack(this.range)+")"),void 0!==this.frame_type&&(e+=".frame_type("+this.unpack(this.frameType)+")"),void 0!==this.label&&(e+=".label("+this.unpack(this.label)+")"),void 0!==this.subject&&(e+=".subject("+this.unpack(this.subject)+")"),void 0!==this.subjectClass&&(e+=".subjectClass("+this.unpack(this.subjectClass)+")"),void 0!==this.property&&(e+=".property("+this.unpack(this.property)+")"),void 0!==this.value&&(e+=".value("+this.unpack(this.value,!0)+")"),void 0!==this.children&&this.children.length>0){e+=".children(\n";for(var r=this.children,n=0;n<r.length;n++)e+="View.pattern()."+r[n].prettyPrint(),n<r.length-1&&(e+=","),e+="\n";e+=")"}return void 0!==this.parent&&(e+=".parent(View.pattern()."+this.parent.prettyPrint()+")"),void 0!==this.depth&&(e+=".depth("+this.unpack(this.depth,!0)+")"),void 0!==this.index&&(e+=".index("+this.unpack(this.index,!0)+")"),void 0!==this.status&&(e+=".status("+this.unpack(this.status)+")"),e},o.prototype.illegalRuleType=function(t){return!("data"!=t||!this.children||!this.children.length)||!("object"!=t||!this.range)},o.prototype.checkSubject=function(t,e){"object"==typeof this.subject&&this.subject.length||(this.subject=[this.subject]);const r=e.subject();for(let e=0;e<this.subject.length;e++)if(this.IDsMatch(t[e],r))return!0;return!1},o.prototype.checkChildren=function(t,e){for(let r=0;r<this.children.length;r++){let n=!1;if("object"==t)for(const t in e.properties)this.children[r].checkFrame(e.properties[t])&&(n=!0);else if("property"==t)for(let t=0;t<=renderer.values.length;t++)this.children[t].checkFrame(e.values[t])&&(n=!0);if(!n)return!1}return!0},o.prototype.checkStatus=function(t,e){"object"==typeof this.status&&0!=this.status.length||(this.status=[this.status]);for(let t=0;t<this.status.length;t++){if("updated"==this.status[t]&&!e.isUpdated())return!1;if("new"==this.status[t]&&!e.isNew())return!1;if("unchanged"==this.status[t]&&e.isUpdated())return!1}return!0},o.prototype.checkDepth=function(t,e){return this.numberMatch(this.depth,e.depth())},o.prototype.checkParent=function(t,e){return this.parent.checkFrame(e.parent)},o.prototype.checkIndex=function(t,e){return"data"==t&&this.index==e.index},o.prototype.checkProperty=function(t,e){"object"==typeof this.property&&this.property.length||(this.property=[this.property]);for(let t=0;t<this.property.length;t++)if(this.propertyIDsMatch(e.property(),this.property[t]))return!0;return!1},o.prototype.checkType=function(t,e){if("object"==t)var r=e.subjectClass();else r=e.range();return Array.isArray(this.type)||(this.type=[this.type]),-1!==this.type.indexOf(r)},o.prototype.checkLiteral=function(t,e){return"object"!=t&&("property"!=t&&("data"!=t||e.isDatatypeProperty()))},o.prototype.checkValue=function(t,e){"object"==typeof this.value&&this.value.length||(this.value=[this.value]);for(let r=0;r<this.value.length;r++)if("data"==t){if(this.valuesMatch(e.value(),this.value[r]))return!0}else if("property"==t){for(let t=0;t<=e.values.length;t++)if("data"==this.getRendererType(e.values[r])&&this.valuesMatch(e.values[r].get(),this.value[r]))return!0}else if("object"==t)for(const t in e.properties)if(this.checkValue(this.getRendererType(e.properties[t]),e.properties[t]))return!0;return!1},o.prototype.checkRange=function(t,e){"object"==typeof this.range&&this.range.length||(this.range=[this.range]);for(let t=0;t<this.range.length;t++)if(this.rangeIDsMatch(e.range(),this.range[t]))return!0;return!1},o.prototype.checkSubjectClass=function(t,e){"object"==typeof this.subjectClass&&this.subjectClass.length||(this.subjectClass=[this.subjectClass]);const r=e.subjectClass();for(let t=0;t<this.subjectClass.length;t++)if(this.classIDsMatch(this.subjectClass[t],r))return!0;return!1},o.prototype.checkFrameType=function(t,e){return"object"==t?-1!=this.frame_type.indexOf("object"):"data"==t&&e.frame?-1!=this.frame_type.indexOf(e.frame.ftype()):"property"!=t&&void 0},o.prototype.checkLabel=function(t,e){if("function"!=typeof e.getLabel)return console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1;for(let t=0;t<this.label.length;t++)if(this.stringMatch(this.label[t],e.getLabel()))return!0;return!1},o.prototype.getRendererType=function(t){return t.isProperty()?"property":t.isObject()?"object":t.isData()?"data":t.renderer_type?t.renderer_type:(console.log(new Error(`frame configuration passed non-renderer type ${t.constructor.name}`)),console.log(renderer),!1)},t.exports=i},function(t,e,r){t.exports={WOQLClient:r(48),ConnectionCapabilities:r(28),ConnectionConfig:r(29),IDParser:r(30),ErrorMessage:r(8),UTILS:r(2),WOQLResult:r(31),WOQLRule:r(6),FrameRule:r(9),View:r(83),DocumentFrame:r(47),WOQLGraph:r(41),WOQLTable:r(37),WOQLChooser:r(39),WOQLChart:r(43),WOQLStream:r(45),WOQL:r(32),axiosInstance:r(14)}},function(t,e){
/**
 * @file Terminus Constants
 * @license Apache Version 2
 * Constants representing API actions
 */
t.exports=Object.freeze({CONNECT:"connect",GET_TRIPLES:"get_triples",UPDATE_TRIPLES:"update_triples",CLASS_FRAME:"class_frame",WOQL_QUERY:"woql_query",DELETE_DATABASE:"delete_database",CREATE_DATABASE:"create_database",CREATE_GRAPH:"create_graph",DELETE_GRAPH:"delete_graph",CLONE:"clone",PUSH:"push",FETCH:"fetch",REBASE:"rebase",BRANCH:"branch"})},function(t,e,r){"use strict";var n=r(3);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,r){"use strict";var n=r(19);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},function(t,e,r){const n=r(50).create();t.exports=n},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";var n=r(3),i=r(56),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=r(57):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(a=r(63)),a),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){u.headers[t]=n.merge(o)})),t.exports=u},function(t,e,r){"use strict";var n=r(13);t.exports=function(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var n=r(58),i=r(59);t.exports=function(t,e){return t&&!n(e)?i(t,e):e}},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("https")},function(t,e,r){var n=r(24),i=r(21),o=r(22),s=r(64),a=r(65).Writable,u=r(66)("follow-redirects"),c={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},l=Object.create(null);function p(t,e){a.call(this),t.headers=t.headers||{},this._options=t,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t.host&&(t.hostname||(t.hostname=t.host),delete t.host),e&&this.on("response",e);var r=this;if(this._onNativeResponse=function(t){r._processResponse(t)},!t.pathname&&t.path){var n=t.path.indexOf("?");n<0?t.pathname=t.path:(t.pathname=t.path.substring(0,n),t.search=t.path.substring(n))}this._performRequest()}function h(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach((function(i){var o=i+":",a=r[o]=t[i],c=e[i]=Object.create(a);c.request=function(t,i){return"string"==typeof t?(t=n.parse(t)).maxRedirects=e.maxRedirects:t=Object.assign({protocol:o,maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},t),t.nativeProtocols=r,s.equal(t.protocol,o,"protocol mismatch"),u("options",t),new p(t,i)},c.get=function(t,e){var r=c.request(t,e);return r.end(),r}})),e}["abort","aborted","error","socket","timeout"].forEach((function(t){l[t]=function(e){this._redirectable.emit(t,e)}})),p.prototype=Object.create(a.prototype),p.prototype.write=function(t,e,r){if(!("string"==typeof t||"object"==typeof t&&"length"in t))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof e&&(r=e,e=null),0!==t.length?this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},p.prototype.end=function(t,e,r){"function"==typeof t?(r=t,t=e=null):"function"==typeof e&&(r=e,e=null);var n=this._currentRequest;this.write(t||"",e,(function(){n.end(null,null,r)}))},p.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)},p.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach((function(t){p.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}})),["aborted","connection","socket"].forEach((function(t){Object.defineProperty(p.prototype,t,{get:function(){return this._currentRequest[t]}})})),p.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(e){if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=e.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=n.format(this._options),i._redirectable=this,l)o&&i.on(o,l[o]);if(this._isRedirect){var s=0,a=this._requestBodyBuffers;!function t(){if(s<a.length){var e=a[s++];i.write(e.data,e.encoding,t)}else i.end()}()}}else this.emit("error",new Error("Unsupported protocol "+t))},p.prototype._processResponse=function(t){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:t.statusCode});var e=t.headers.location;if(e&&!1!==this._options.followRedirects&&t.statusCode>=300&&t.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==t.statusCode&&!(this._options.method in c))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var o=n.resolve(this._currentUrl,e);u("redirecting to",o),Object.assign(this._options,n.parse(o)),this._isRedirect=!0,this._performRequest(),t.destroy()}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]},t.exports=h({http:i,https:o}),t.exports.wrap=h},function(t,e){t.exports=require("url")},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var i=e.formatters[n];if("function"==typeof i){var o=s[u];r=i.call(t,o),s.splice(u,1),u--}return r})),e.formatArgs.call(t,s);var c=n.log||e.log||console.log.bind(console);c.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=i,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var o=e.instances[r];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(68),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){e=e||{};var r={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(i,(function(t){void 0!==e[t]&&(r[t]=e[t])})),n.forEach(o,(function(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):void 0!==e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):void 0!==t[i]&&(r[i]=t[i])})),n.forEach(s,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])}));var a=i.concat(o).concat(s),u=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return n.forEach(u,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){const n=r(11),i=r(8);
/**
 * @file Connection Capabilities 
 * @license Apache Version 2
 * @description Object which helps manage the capabilities available for a given TerminusDB connection 
 * Creates an entry in the connection registry for the server
 * and all the databases that the client has access to
 * maps the input authorties to a per-db array for internal storage and easy
 * access control checks
 * @param {String} key API key
 */
function o(){this.connection={}}o.prototype.setCapabilities=function(t){this.connection={};const e=t?Object.keys(t):[];for(const r of e)if("terminus:authority"===r&&t[r]){const e=!0===Array.isArray(t[r])?t[r]:[t[r]];for(let t=0;t<e.length;t+=1){let r=e[t]["terminus:access"],n=r["terminus:authority_scope"];const i=r["terminus:action"];!1===Array.isArray(n)&&(n=[n]);const o=Array.isArray(i)?i.map(t=>t["@id"]):[];for(let t=0;t<n.length;t+=1){const e=n[t];void 0===this.connection[e["@id"]]&&(this.connection[e["@id"]]=e),this.connection[e["@id"]]["terminus:authority"]=o}}}else this.connection[r]=t[r]},o.prototype.findResourceDocumentID=function(t,e){let r=this.formResourceName(t,e);for(const t of Object.keys(this.connection)){let e=this.connection[t];if(e["terminus:resource_name"]&&e["terminus:resource_name"]["@value"]&&e["terminus:resource_name"]["@value"]===r)return t}return!1},o.prototype.formResourceName=function(t,e){return"terminus"==t?"terminus":`${e}|${t}`},o.prototype.getJSONContext=function(){if(this.connection["@context"]){let t=this.connection["@context"];return t.scm="http://my.old.man/is/a/walrus#",t}return{}},o.prototype.getServerRecord=function(){const t=Object.keys(this.connection);for(const e of t)if("terminus:Server"===this.connection[e]["@type"])return this.connection[e];return!1},o.prototype.getDBRecord=function(t,e){let r=this.findResourceDocumentID(t,e);if(r)return this.connection[r]},o.prototype.getDBMetadata=function(t,e){let r=this.getDBRecord(t,e);return!!r&&this.extractMetadata(r)},o.prototype.extractMetadata=function(t){let e={db:"",account:"",title:"",description:""};if(t["terminus:resource_name"]&&t["terminus:resource_name"]["@value"]){let r=t["terminus:resource_name"]["@value"];if("terminus"==r)e.db=r;else if(r){let t=r.split("|");1==t.length?e.db=r:(e.account=t[0],e.db=t[1])}}if(t["rdfs:label"]){let r=Array.isArray(t["rdfs:label"])?t["rdfs:label"][0]:t["rdfs:label"];r&&r["@value"]&&(e.title=r["@value"])}if(e.title||(e.title=e.db),t["rdfs:comment"]){let r=Array.isArray(t["rdfs:comment"])?t["rdfs:comment"][0]:t["rdfs:comment"];r&&r["@value"]&&(e.description=r["@value"])}return e},o.prototype.getServerDBRecords=function(){let t={};for(const e of Object.keys(this.connection))"terminus:Database"===this.connection[e]["@type"]&&(t[e]=this.connection[e]);return t},o.prototype.getServerDBMetadata=function(){let t=this.getServerDBRecords(),e=[];for(const r of Object.keys(t)){let n=this.extractMetadata(t[r]);n&&e.push(n)}return e},o.prototype.removeDB=function(t,e){let r=this.findResourceDocumentID(t,e);r&&delete this.connection[r]},o.prototype.capabilitiesPermit=function(t,e,r){let o;if(t===n.CREATE_DATABASE?o=this.getServerRecord():e?o=this.getDBRecord(e,r):console.log("no dbid provided in capabilities check ",e,r),o){const e=o["terminus:authority"];if(e&&-1!==e.indexOf(`terminus:${t}`))return!0}else console.log("No record found for connection: ",t,e,r,this.connection);return this.error=i.accessDenied(t,e,r),!1},t.exports=o},function(t,e,r){const n=r(30);
/**
 * @file Terminus DB connection configuration
 * @license Apache Version 2
 * @description Object representing the state of a connection to a terminus db - these are:
 * 1. server url (set on connect)
 * 2. current account id
 * 2. dbid, account, api key, jwt
 * along with some configuration information (key, connected mode, client_side_access_control)
 * provides methods for getting and setting connection parameters
 */function i(t){this.server=!1,this.jwt_token=!1,this.jwt_user=!1,this.basic_auth=!1,this.accountid=!1,this.dbid=!1,this.default_branch_id="master",this.default_repo_id="local",this.branchid=this.default_branch_id,this.repoid=this.default_repo_id,this.refid=!1,this.connection_error=!1,this.update(t)}i.prototype.copy=function(){let t=new i;return t.server=this.server,t.jwt_token=this.jwt_token,t.jwt_user=this.jwt_user,t.basic_auth=this.basic_auth,t.accountid=this.accountid,t.dbid=this.dbid,t.branchid=this.branchid,t.repoid=this.repoid,t.refid=this.refid,t},i.prototype.update=function(t){const e=t||{};void 0!==e.server&&this.setServer(e.server),void 0!==e.account&&this.setAccount(e.account),void 0!==e.db&&this.setDB(e.db),void 0!==e.jwt&&this.setJWT(e.jwt,e.jwt_user),void 0!==e.key&&this.setKey(e.key,e.user),void 0!==e.branch&&this.setBranch(e.branch),void 0!==e.ref&&this.setREf(e.ref),void 0!==e.repo&&this.setRepo(e.repo)},i.prototype.serverURL=function(){return this.server},i.prototype.db=function(){return this.dbid},i.prototype.branch=function(){return this.branchid},i.prototype.ref=function(){return this.refid},i.prototype.account=function(){return this.accountid},i.prototype.repo=function(){return this.repoid},i.prototype.key=function(){return this.basic_auth},i.prototype.jwt=function(){return this.jwt_token},i.prototype.user=function(t){return!t&&this.jwt_user?this.jwt_user:this.basic_auth?this.basic_auth.split(":")[0]:void 0},i.prototype.clearCursor=function(){this.branchid=this.default_branch_id,this.repoid=this.default_repo_id,this.accountid=!1,this.dbid=!1,this.refid=!1},i.prototype.setCursor=function(t,e,r,n,i){return!(t&&!this.setAccount(t))&&(!(e&&!this.setDB(e))&&(!(r&&!this.setRepo(r))&&(!(n&&!this.setBranch(n))&&!(i&&!this.setRef(i)))))},i.prototype.setError=function(t){this.connection_error=t},i.prototype.setServerConnection=function(t,e,r){return!!this.setServer(t)&&(!(e&&!this.setKey(e))&&!(r&&!this.setJWT(r)))},i.prototype.setServer=function(t){let e=(new n).parseServerURL(t);if(e)return this.server=e,this.server;this.setError(`Invalid Server URL: ${t}`)},i.prototype.setAccount=function(t){if(!t)return this.accountid=!1,!1;let e=(new n).parseDBID(t);if(e)return this.accountid=e,this.accountid;this.setError(`Invalid Account ID: ${t}`)},i.prototype.setDB=function(t){if(!t)return this.dbid=!1,!1;let e=(new n).parseDBID(t);if(e)return this.dbid=e,this.dbid;this.setError(`Invalid Database ID: ${t}`)},i.prototype.setRepo=function(t){if(!t)return this.repoid=this.default_repo_id,this.repoid;let e=(new n).parseDBID(t);if(e)return this.repoid=e,this.repoid;this.setError(`Invalid Repo ID: ${t}`)},i.prototype.setBranch=function(t){if(!t)return this.branchid=this.default_branch_id,this.branchid;let e=(new n).parseDBID(t);if(e)return this.branchid=e,this.branchid;this.setError(`Invalid Branch ID: ${t}`)},i.prototype.setRef=function(t){if(t){let e=(new n).parseDBID(t);if(e)return this.refid=e,this.refid;this.setError(`Invalid Branch ID: ${t}`)}return this.refid=!1,this.refid},i.prototype.setKey=function(t,e){if(!t)return this.basic_auth=!1,!1;e=e||"admin";let r=(new n).parseKey(t);if(r)return this.basic_auth=`${e}:${r}`,this.basic_auth;this.setError(`Invalid API Key: ${t}`)},i.prototype.setJWT=function(t,e){if(!t)return this.jwt_token=!1,this.jwt_user=e||!1,!1;let r=(new n).parseJWT(t);if(r)return e&&(this.jwt_user=e),this.jwt_token=r,this.jwt_token;this.setError(`Invalid JWT: ${t}`)},i.prototype.serverURL=function(){return this.server},i.prototype.dbURL=function(){return this.dbBase("db")},i.prototype.graphURL=function(t,e){return this.branchBase("graph")+`/${t}/${e}`},i.prototype.triplesURL=function(t,e){if("terminus"==this.db())var r=this.dbBase("triples");else r=this.branchBase("triples");return r+=`/${t}/${e||"main"}`},i.prototype.queryURL=function(){return"terminus"==this.db()?this.dbBase("woql"):this.branchBase("woql")},i.prototype.classFrameURL=function(){return"terminus"==this.db()?this.dbBase("frame"):this.branchBase("frame")},i.prototype.cloneURL=function(t){let e=`${this.serverURL()}clone/${this.account()}`;return t&&(e+=`/${t}`),e},i.prototype.fetchURL=function(t){return t=t||this.repo(),this.dbBase("fetch")+`/${t}`},i.prototype.rebaseURL=function(t,e){let r=this.branchBase("rebase");return t&&(r+=`/${t}`,e&&(r+=`/${e}`)),r},i.prototype.pushURL=function(t,e){let r=this.branchBase("push");return t&&(r+=`/${t}`,e&&(r+=`/${e}`)),r},i.prototype.branchURL=function(t){return this.repoBase("branch")+`/branch/${t}`},i.prototype.dbBase=function(t){return`${this.serverURL()}${t}/${this.dbURLFragment()}`},i.prototype.repoBase=function(t){let e=this.dbBase(t);return this.repo()?e+=`/${this.repo()}`:e+="/"+this.default_repo_id,e},i.prototype.branchBase=function(t){let e=this.repoBase(t);return"_meta"==this.repo()?e:"_commits"==this.branch()?e+`/${this.branch()}`:this.ref()?e+`/commit/${this.ref()}`:this.branch()?e+`/branch/${this.branch()}`:(e+="/branch/"+this.default_branch_id,e)},i.prototype.dbURLFragment=function(){return"terminus"==this.db()?this.db():this.account()+"/"+this.db()},t.exports=i},function(t,e){
/**
 * @file Terminus ID Parser
 * @license Apache Version 2
 * Object representing a terminus ID / URL 
 * Helper methods for parsing and validating terminus IDS
 * and dealing with namespace prefixed URLs
 * @param {Object} context JSON-LD context to be used for prefixes
 */
function r(){}r.prototype.parseServerURL=function(t){return!!this.validURL(t)&&(t.lastIndexOf("/")!==t.length-1&&(t+="/"),t)},r.prototype.parseDBID=function(t){return!!this.validIDString(t,"db")&&t},r.prototype.parseAccount=function(t){return!!this.validIDString(t,"account")&&t},r.prototype.parseBranch=function(t){return!!this.validIDString(t,"branch")&&t},r.prototype.parseJWT=function(t){return t},r.prototype.parseKey=function(t){return t},r.prototype.validURL=function(t){return!!(t&&"http://"===t.substring(0,7)||"https://"===t.substring(0,8))},r.prototype.validIDString=function(t){return"string"==typeof t&&(-1===t.indexOf(":")&&-1===t.indexOf(" ")&&-1===t.indexOf("/"))},t.exports=r},function(t,e,r){const n=r(2),i=r(32);
/**
 * @file WOQL Result Object
 * @license Apache Version 2
 * Object representing the result of a WOQL Query
 * @param {Object} results result JSON object as returned by WOQL query
 * @param {WOQLQuery} query the query object that generated the result
 * @param {Object} [config] optional result configuration options object
 *                 [config.no_compress] by default all URLs are compressed where possible (v:X rather than http://.../variable/x) set to true to return non-compressed values 
 *                 [config.context] specify the JSON-LD context to use for compressing results - by default the query context will be used
 */
function o(t,e,r){if(this.bindings=t?t.bindings:[],this.insert_count=t?t.inserts:0,this.delete_count=t?t.deletes:0,this.transaction_retry_count=t?t.transaction_retry_count:0,this.query=e||i.query(),this.cursor=0,!r||!r.no_compress){const t=!(!r||!r.context)&&r.context;this.compress(t)}}o.prototype.compress=function(t){t=t||this.query.getContext();for(let o=0;o<this.bindings.length;o++)for(const s of Object.keys(this.bindings[o])){const a=n.shorten(s,t);var e=this.bindings[o][s];if("string"==typeof this.bindings[o][s])e=n.shorten(this.bindings[o][s],t);else if(Array.isArray(this.bindings[o][s])){e=[];for(var r=0;r<this.bindings[o][s].length;r++){let a=this.bindings[o][s][r];if("string"==typeof a)a=n.shorten(a,t);else if(Array.isArray(a)){let e=[];for(var i=0;i<a.length;i++){let r=a[i];"string"==typeof r&&(r=n.shorten(r,t)),e.push(r)}a=e}e.push(a)}}delete this.bindings[o][s],this.bindings[o][a]=e}return this},o.prototype.hasBindings=function(){return!(!this.bindings||!this.count())},o.prototype.hasUpdates=function(){return this.inserts()>0||this.deletes()>0},o.prototype.getBindings=function(){return this.bindings},o.prototype.getVariableList=function(){return this.bindings&&this.bindings[0]?Object.keys(this.bindings[0]):[]},o.prototype.count=function(){return this.bindings.length},o.prototype.inserts=function(){return this.insert_count},o.prototype.deletes=function(){return this.delete_count},o.prototype.first=function(){return this.cursor=0,this.bindings[0]},o.prototype.last=function(){return this.cursor=this.bindings.length-1,this.bindings[this.bindings.length-1]},o.prototype.next=function(){if(this.cursor>=this.bindings.length)return!1;const t=this.bindings[this.cursor];return this.cursor++,t},o.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.bindings[this.cursor]},o.prototype.sort=function(t,e){this.bindings.sort((r,n)=>this.compareValues(r[t],n[t],e))},o.prototype.compareValues=function(t,e,r="asc"){return t&&e?(void 0!==t["@value"]&&void 0!==e["@value"]&&(t=t["@value"],e=e["@value"]),t>e?r&&"asc"==r?1:-1:e>t?r&&"asc"==r?-1:1:void 0):0},t.exports=o},function(t,e,r){const n=r(5),i=(r(79),r(80),r(81),r(34)),o=(r(33),r(82));let s={using:function(t,e){return(new n).using(t,e)},comment:function(t,e){return(new n).comment(t,e)},select:function(...t){return(new n).select(...t)},and:function(...t){return(new n).and(...t)},or:function(...t){return(new n).or(...t)},from:function(t,e){return(new n).from(t,e)},into:function(t,e){return(new n).into(t,e)},triple:function(t,e,r){return(new n).triple(t,e,r)},quad:function(t,e,r,i){return(new n).quad(t,e,r,i)},sub:function(t,e){return(new n).sub(t,e)}};s.subsumption=s.sub,s.eq=function(t,e){return(new n).eq(t,e)},s.equals=s.eq,s.substr=function(t,e,r,i,o){return(new n).substr(t,e,r,i,o)},s.substring=s.substr,s.update_object=function(t){return(new n).update_object(t)},s.delete_object=function(t){return(new n).delete_object(t)},s.read_object=function(t,e,r){return(new n).read_object(t,e,r)},s.get=function(t,e){return(new n).get(t,e)},s.put=function(t,e,r){return(new n).put(t,e,r)},s.as=function(t,e,r){return(new n).as(t,e,r)},s.remote=function(t,e){return(new n).remote(t,e)},s.file=function(t,e){return(new n).file(t,e)},s.post=function(t,e){return(new n).post(t,e)},s.delete_triple=function(t,e,r){return(new n).delete_triple(t,e,r)},s.delete_quad=function(t,e,r,i){return(new n).delete_quad(t,e,r,i)},s.add_triple=function(t,e,r){return(new n).add_triple(t,e,r)},s.add_quad=function(t,e,r,i){return(new n).add_quad(t,e,r,i)},s.when=function(t,e){return(new n).when(t,e)},s.trim=function(t,e){return(new n).trim(t,e)},s.eval=function(t,e){return(new n).eval(t,e)},s.plus=function(...t){return(new n).plus(...t)},s.minus=function(...t){return(new n).minus(...t)},s.times=function(...t){return(new n).times(...t)},s.divide=function(...t){return(new n).divide(...t)},s.div=function(...t){return(new n).div(...t)},s.exp=function(t,e){return(new n).exp(t,e)},s.floor=function(t){return(new n).floor(t)},s.isa=function(t,e){return(new n).isa(t,e)},s.like=function(t,e,r){return(new n).like(t,e,r)},s.less=function(t,e){return(new n).less(t,e)},s.greater=function(t,e){return(new n).greater(t,e)},s.opt=function(t){return(new n).opt(t)},s.optional=s.opt,s.unique=function(t,e,r){return(new n).unique(t,e,r)},s.idgen=function(t,e,r){return(new n).idgen(t,e,r)},s.idgenerator=s.idgen,s.upper=function(t,e){return(new n).upper(t,e)},s.lower=function(t,e){return(new n).lower(t,e)},s.pad=function(t,e,r,i){return(new n).pad(t,e,r,i)},s.split=function(t,e,r){return(new n).split(t,e,r)},s.member=function(t,e){return(new n).member(t,e)},s.concat=function(t,e){return(new n).concat(t,e)},s.join=function(t,e,r){return(new n).join(t,e,r)},s.sum=function(t,e){return(new n).sum(t,e)},s.start=function(t,e){return(new n).start(t,e)},s.limit=function(t,e){return(new n).limit(t,e)},s.re=function(t,e,r){return(new n).re(t,e,r)},s.regexp=s.re,s.length=function(t,e){return(new n).length(t,e)},s.not=function(t){return(new n).not(t)},s.typecast=function(t,e,r){return(new n).typecast(t,e,r)},s.cast=s.typecast,s.order_by=function(...t){return(new n).order_by(...t)},s.group_by=function(t,e,r,i){return(new n).group_by(t,e,r,i)},s.true=function(){return(new n).true()},s.path=function(t,e,r,i){return(new n).path(t,e,r,i)},s.star=function(t,e,r,i){return(new n).star(t,e,r,i)},s.node=function(t,e){return(new n).node(t,e)},s.insert=function(t,e,r){return(new n).insert(t,e,r)},s.schema=function(t){return new i(t)},s.add_class=function(t,e){return(new i).add_class(t,e)},s.add_property=function(t,e,r){return(new i).add_property(t,e,r)},s.delete_class=function(t,e){return(new i).delete_class(t,e)},s.delete_property=function(t,e){return(new i).delete_property(t,e)},s.doctype=function(t,e){return s.add_class(t,e).parent("Document")},s.insert_data=function(t,e){return(new n).insert_data(t,e)},s.insert_class_data=function(t,e){return(new i).insert_class_data(t,e)},s.doctype_data=function(t,e){return(new i).doctype_data(t,e)},s.insert_property_data=function(t,e){return(new i).insert_property_data(t,e)},s.query=function(){return new n},s.json=function(t){return(new n).json(t)},s.lib=function(){return new o},t.exports=s},function(t,e){function r(t,e){this.vocab=t,this.language=e,this.indent_spaces=4,this.boxed_predicates=["woql:datatype","woql:variable","woql:array_element","woql:variable_list_element","woql:node","woql:arithmetic_value","woql:variable_name"],this.subject_cleaned_predicates=["woql:subject","woql:element"],this.schema_cleaned_predicates=["woql:predicate","woql:parent","woql:child","woql:uri","woql:of_type"],this.list_operators=["ValueList","Array","NamedAsVar","IndexedAsVar","AsVar"],this.query_list_operators=["And","Or"],this.operator_maps={IDGenerator:"idgen",IsA:"isa",PostResource:"post",FileResource:"file",RemoteResource:"remote",AsVars:"as",NamedAsVars:"as",IndexedAsVars:"as"},this.shortcuts={optional:"opt",substring:"substr",regexp:"re",subsumption:"sub",equals:"eq",concatenate:"concat"},this.pythonic={and:"woql_and",or:"woql_or",as:"woql_as",with:"woql_with",from:"woql_from",not:"woql_not"},this.show_context=!1}function n(t){return noparens=["woql:PathPredicate","woql:PathPlus","woql:PathTimes"],-1==noparens.indexOf(t["@type"])}function i(t){let e="";for(var r=0;r<t;r++)e+=" ";return e}r.prototype.printJSON=function(t,e,r,n){e=e||0,r=r||!1;var o="";if(!t["@type"])return console.log("Bad structure passed to print json, no type: ",t),"";if("woql:Variable"==t["@type"]||"woql:VariableListElement"==t["@type"])return this.pvar(t);if(void 0!==t["@value"])return this.plit(t);var s=t["@type"].split(":")[1];if(s){var a=this.unboxJSON(s,t);if(a){let n=this.printArgument(s,this.getBoxedPredicate(s,t),a,e,r);return this.isListOperator(s)?"["+n+"]":n}if(this.isListOperator(s))o+="[";else{let t=this.getFunctionForOperator(s),i=n?e*this.indent_spaces:0;o+=this.getWOQLPrelude(t,r,i)+"("}let c=this.getArgumentOrder(s,t);for(var u=0;u<c.length;u++){let r="woql:query"==c[u]&&"When"!=s||"woql:consequent"==c[u];o+=this.printArgument(s,c[u],t[c[u]],e,r),u<(-1==c.indexOf("woql:query")?c.length-1:c.length-2)&&(o+=", ")}this.isListOperator(s)?o+="]":(this.argumentTakesNewline(s)&&(o+="\n"+i(e*this.indent_spaces)),r||(o+=")"))}else console.log("wrong structure passed to print json ",t);return o},r.prototype.getArgumentOrder=function(t,e){let r=Object.keys(e);return r.splice(r.indexOf("@type"),1),r},r.prototype.argumentTakesNewline=function(t){return this.isQueryListOperator(t)},r.prototype.argumentRequiresArray=function(t,e){return("woql:group_by"==t||"woql:group_template"==t)&&e.length>1},r.prototype.printArgument=function(t,e,r,n,o){let s="";o&&(s+=")");let a=this.argumentTakesNewline(t);if(a&&(s+="\n"+i((n+1)*this.indent_spaces)),"woql:True"==r["@type"])return"true";if("woql:document"==e)return JSON.stringify(r);if("woql:path_pattern"==e)return'"'+this.decompilePathPattern(r)+'"';if("woql:concat_list"==e)return this.decompileConcatList(r);if("woql:as_vars"==e)return this.decompileAsVars(r,n+1);if(Array.isArray(r)){let t=[];for(var u=0;u<r.length;u++){let e=a?n+1:n;t.push(this.printJSON(r[u],e,o,a))}let c=a?",\n"+i(++n*this.indent_spaces):",";this.argumentRequiresArray(e,t)?s+="["+t.join(c)+"]":s+=t.join(c)}else if("object"==typeof r){s+=this.printJSON(r,n,o)}else"string"==typeof r&&(s+=this.uncleanArgument(r,t,e));return s},r.prototype.plit=function(t){if("xsd:string"==t["@type"]||"xsd:anyURI"==t["@type"]||t["@language"]){let e=t["@value"];return/\r|\n/.exec(e)?"`"+e+"`":'"'+e+'"'}return"xsd:decimal"==t["@type"]||"xsd:boolean"==t["@type"]||"xsd:integer"==t["@type"]||"xsd:nonNegativeInteger"==t["@type"]?t["@value"]:JSON.stringify(t)},r.prototype.pvar=function(t){if(t["woql:variable_name"]&&void 0!==t["woql:variable_name"]["@value"]){let e=t["woql:variable_name"]["@value"];return-1==e.indexOf(":")&&(e="v:"+e),'"'+e+'"'}return!1},r.prototype.getWOQLPrelude=function(t,e,r){if("true"===t||"false"===t)return"python"==this.language?t.charAt(0).toUpperCase()+t.slice(1):t;let n="WOQL.";return"python"==this.language&&(this.pythonic[t]&&(t=this.pythonic[t]),n="WOQLQuery()."),e?"."+t:(r?"\n"+i(r):"")+n+t},r.prototype.uncleanArgument=function(t,e,r){if(-1!=t.indexOf(":")){for(var n in this.vocab)if(this.vocab[n]==t)return'"'+n+'"';-1!=this.subject_cleaned_predicates.indexOf(r)&&"doc:"==t.substring(0,4)&&(t=t.substring(4)),-1!=this.schema_cleaned_predicates.indexOf(r)&&"scm:"==t.substring(0,4)&&(t=t.substring(4))}return'"'+t+'"'},r.prototype.isListOperator=function(t){return-1!=this.list_operators.indexOf(t)},r.prototype.isQueryListOperator=function(t){return-1!=this.query_list_operators.indexOf(t)},r.prototype.getFunctionForOperator=function(t){if(this.operator_maps[t])return this.operator_maps[t];{let e=t.replace(/[\w]([A-Z])/g,(function(t){return t[0]+"_"+t[1]})).toLowerCase();return this.shortcuts[e]?this.shortcuts[e]:e}},r.prototype.getBoxedPredicate=function(t,e){for(var r=0;r<this.boxed_predicates.length;r++)if(e[this.boxed_predicates[r]])return this.boxed_predicates[r];return"QueryListElement"==t&&"woql:query"},r.prototype.unboxJSON=function(t,e){let r=this.getBoxedPredicate(t,e);return!!r&&e[r]},r.prototype.decompileAsVars=function(t,e){let r="";for(var n=0;n<t.length;n++){let o=t[n];r+="\n"+i(e*this.indent_spaces)+(0==n?"WOQL":""),"woql:NamedAsVar"==o["@type"]?r+='.as("'+o["woql:identifier"]["@value"]+'", "'+o["woql:variable_name"]["@value"]+'")':"woql:IndexedAsVar"==o["@type"]&&(r+='.as("'+o["woql:index"]["@value"]+'", "'+o["woql:variable_name"]["@value"]+'")')}return r},r.prototype.decompileConcatList=function(t){let e=t["woql:array_element"],r=[];can_concat=!0;for(var n=0;n<e.length;n++){let t=e[n];if(t["woql:datatype"])r.push(t["woql:datatype"]["@value"]);else if(t["woql:variable_name"]&&(r.push("v:"+t["woql:variable_name"]["@value"]),can_concat&&n<e.length-1)){let t=e[n+1];if(t["woql:datatype"]){let e=t["woql:datatype"]["@value"];/^[\w_]/.test(e)&&(can_concat=!1)}}}return can_concat?'"'+r.join("")+'"':'["'+r.join('","')+'"]'},r.prototype.decompilePathPattern=function(t){switch(t["@type"]){case"woql:PathPredicate":return t["woql:path_predicate"]["@id"];case"woql:PathPlus":var e=t["woql:path_pattern"];return Array.isArray(e)&&(e=e[0]),n(e)?"("+this.decompilePathPattern(e)+")+":this.decompilePathPattern(e)+"+";case"woql:PathTimes":e=t["woql:path_pattern"];var r="{"+t["woql:path_minimum"]["@value"]+","+t["woql:path_maximum"]["@value"]+"}";return Array.isArray(e)&&(e=e[0]),n(e)?"("+this.decompilePathPattern(e)+")"+r:this.decompilePathPattern(e)+r;case"woql:PathSequence":var i=t["woql:path_first"],o=t["woql:path_second"];Array.isArray(i)&&(i=i[0]);var s="";return n(i)&&(s+="("),s+=this.decompilePathPattern(i),n(i)&&(s+=")"),s+=",",n(o)&&(s+="("),s+=this.decompilePathPattern(o),n(o)&&(s+=")"),s;case"woql:PathOr":i=t["woql:path_left"],o=t["woql:path_right"];Array.isArray(i)&&(i=i[0]);s="";return n(i)&&(s+="("),s+=this.decompilePathPattern(i),n(i)&&(s+=")"),s+="|",n(o)&&(s+="("),s+=this.decompilePathPattern(o),n(o)&&(s+=")"),s}return"error"},t.exports=r},function(e,r,n){const i=n(5),o=n(2);function s(t){this.graph=t||"schema/main"}s.prototype.add_class=function(t,e){e=e||this.graph;let r=new i;return t&&(t=r.cleanClass(t,!0),r.adding_class=t,r.add_quad(t,"rdf:type","owl:Class",e)),r},s.prototype.insert_class_data=function(t,e){let r=new i;if(t.id)for(var n in c=r.cleanClass(t.id,!0),r=(new s).add_class(c,e),t.label&&r.label(t.label),t.description&&r.description(t.description),t.parent&&(Array.isArray(t.parent)||(t.parent=[t.parent]),r.parent(...t.parent)),t)-1==["id","label","description","parent"].indexOf(n)&&r.insert_property_data(n,t[n],e);return r},s.prototype.doctype_data=function(t,e){return t.parent||(t.parent=[]),Array.isArray(t.parent)||(t.parent=[t.parent]),t.parent.push("Document"),this.insert_class_data(t,e)},s.prototype.insert_property_data=function(t,e){let r=new i;if(t.id)for(var n in c=r.cleanClass(t.id,!0),r.add_class(c,refGraph),t.label&&r.label(t.label),t.description&&r.description(t.description),t.parent&&(Array.isArray(t.parent)||(t.parent=[t.parent]),r.parent(...t.parent)),t)-1==["id","label","description","parent"].indexOf(n)&&r.insert_property_data(n,t[n],refGraph);return r},s.prototype.add_property=function(t,e,r){let n=new i;return e=e?n.cleanType(e,!0):"xsd:string",r=r||this.graph,t&&(t=n.cleanPathPredicate(t),o.TypeHelper.isDatatype(e)?n.and((new i).add_quad(t,"rdf:type","owl:DatatypeProperty",r),(new i).add_quad(t,"rdfs:range",e,r)):n.and((new i).add_quad(t,"rdf:type","owl:ObjectProperty",r),(new i).add_quad(t,"rdfs:range",e,r)),n.updated()),n},s.prototype.insert_property_data=function(e,r){let n=new i;return e.id&&(p=n.cleanPathPredicate(e.id),t=e.range?n.cleanType(e.range,!0):"xsd:string",n.add_property(p,t,r),e.label&&n.label(e.label),e.description&&n.description(e.description),e.domain&&n.domain(e.domain),e.max&&n.max(e.max),e.min&&n.min(e.min),e.cardinality&&n.cardinality(e.cardinality)),n},s.prototype.delete_class=function(t,e){e=e||this.graph;let r=new i;return t&&(t=r.cleanClass(t,!0),r.and((new i).delete_quad(t,"v:Outgoing","v:Value",e),(new i).opt().delete_quad("v:Other","v:Incoming",t,e)),r.updated()),r},s.prototype.delete_property=function(t,e){e=e||this.graph;let r=new i;return t&&(t=r.cleanPathPredicate(t),r.and((new i).delete_quad(t,"v:All","v:Al2",e),(new i).delete_quad("v:Al3","v:Al4",t,e)),r.updated()),r},s.prototype.boxClasses=function(t,e,r,n){n=n||this.graph,t=t||"scm:";for(var o=[],a=0;a<e.length;a++)o.push((new i).sub(e[a],"v:Cid"));var u=[];for(a=0;a<r.length;a++)u.push((new i).not().sub(r[a],"v:Cid"));let c=[(new i).re("#(.)(.*)","v:Cid",["v:AllB","v:FirstB","v:RestB"]),(new i).lower("v:FirstB","v:Lower"),(new i).concat(["v:Lower","v:RestB"],"v:Propname"),(new i).concat(["Scoped","v:FirstB","v:RestB"],"v:Cname"),(new i).idgen(t,["v:Cname"],"v:ClassID"),(new i).idgen(t,["v:Propname"],"v:PropID")];const l=(new i).and((new i).quad("v:Cid","rdf:type","owl:Class",n),(new i).not().node("v:Cid").abstract(n),(new i).and(...c),(new i).quad("v:Cid","label","v:Label",n),(new i).concat("Box Class generated for class v:Cid","v:CDesc",n),(new i).concat("Box Property generated to link box v:ClassID to class v:Cid","v:PDesc",n));o.length&&(1==o.length?l.and(o[0]):l.and((new i).or(...o))),u.length&&l.and((new i).and(...u));let p=new s(n).add_class("v:ClassID").label("v:Label").description("v:CDesc"),h=new s(n).add_property("v:PropID","v:Cid").label("v:Label").description("v:PDesc").domain("v:ClassID");return(new i).when(l).and(p,h).updated()},s.prototype.generateChoiceList=function(t,e,r,n,a,u){a=a||this.graph;var c=[],l="_:"+(-1==t.indexOf(":")?t:t.split(":")[1]),p=l;let h=(new s).add_class(t,a).label(e);r&&h.description(r),u&&h.parent(u);for(var d=[h],f=0;f<n.length;f++){if(!n[f])continue;if(Array.isArray(n[f]))var y=n[f][0],g=n[f][1],m=n[f][2]||!1;else{alert("b");y=n[f],g=o.labelFromURL(y),m=!1}let e=(new i).insert(y,t,a).label(g);m&&e.description(m),d.push(e);var v=f<n.length-1?l+"_"+f:"rdf:nil";c.push((new i).add_quad(p,"rdf:first",y,a)),c.push((new i).add_quad(p,"rdf:rest",v,a)),p=v}let w=(new i).and((new i).add_quad(t,"owl:oneOf",l,a),...c);return(new i).and(...d,w)},s.prototype.libs=function(t,e,r,n){var o=[];return-1!=t.indexOf("xdd")?(o.push(this.loadXDD(r)),-1!=t.indexOf("box")&&(o.push(this.loadXDDBoxes(e,r,n)),o.push(this.loadXSDBoxes(e,r,n)))):-1!=t.indexOf("box")&&o.push(this.loadXSDBoxes(e,r,n)),o.length>1?(new i).and(...o):o[0]},s.prototype.loadXDD=function(t){return t=t||this.graph,(new i).and(this.addDatatype("xdd:coordinate","Coordinate","A latitude / longitude pair making up a coordinate, encoded as: [lat,long]",t),this.addDatatype("xdd:coordinatePolygon","Coordinate Polygon","A JSON list of [[lat,long]] coordinates forming a closed polygon.",t),this.addDatatype("xdd:coordinatePolyline","Coordinate Polyline","A JSON list of [[lat,long]] coordinates.",t),this.addDatatype("xdd:dateRange","Date Range","A date (YYYY-MM-DD) or an uncertain date range [YYYY-MM-DD1,YYYY-MM-DD2]. Enables uncertainty to be encoded directly in the data",t),this.addDatatype("xdd:decimalRange","Decimal Range","Either a decimal value (e.g. 23.34) or an uncertain range of decimal values (e.g.[23.4, 4.143]. Enables uncertainty to be encoded directly in the data",t),this.addDatatype("xdd:integerRange","Integer Range","Either an integer (e.g. 30) or an uncertain range of integers [28,30]. Enables uncertainty to be encoded directly in the data",t),this.addDatatype("xdd:gYearRange","Year Range","A year (e.g. 1999) or an uncertain range of years: (e.g. [1999,2001]).Enables uncertainty to be encoded directly in the data",t),this.addDatatype("xdd:email","Email","A valid email address",t),this.addDatatype("xdd:html","HTML","A string with embedded HTML",t),this.addDatatype("xdd:json","JSON","A JSON encoded string",t),this.addDatatype("xdd:url","URL","A valid http(s) URL",t))},s.prototype.addDatatype=function(t,e,r,n){n=n||this.graph;var o=(new i).insert(t,"rdfs:Datatype",n).label(e);return r&&o.description(r),o},s.prototype.loadXSDBoxes=function(t,e,r){return(new i).and(this.boxDatatype("xsd:anySimpleType","Any Simple Type","Any basic data type such as string or integer. An xsd:anySimpleType value.",t,e,r),this.boxDatatype("xsd:string","String","Any text or sequence of characters",t,e,r),this.boxDatatype("xsd:boolean","Boolean","A true or false value. An xsd:boolean value.",t,e,r),this.boxDatatype("xsd:decimal","Decimal","A decimal number. An xsd:decimal value.",t,e,r),this.boxDatatype("xsd:double","Double","A double-precision decimal number. An xsd:double value.",t,e,r),this.boxDatatype("xsd:float","Float","A floating-point number. An xsd:float value.",t,e,r),this.boxDatatype("xsd:time","Time","A time. An xsd:time value. hh:mm:ss.ssss",t,e,r),this.boxDatatype("xsd:date","Date","A date. An xsd:date value. YYYY-MM-DD",t,e,r),this.boxDatatype("xsd:dateTime","Date Time","A date and time. An xsd:dateTime value.",t,e,r),this.boxDatatype("xsd:dateTimeStamp","Date-Time Stamp","An xsd:dateTimeStamp value.",t,e,r),this.boxDatatype("xsd:gYear","Year"," A particular 4 digit year YYYY - negative years are BCE.",t,e,r),this.boxDatatype("xsd:gMonth","Month","A particular month. An xsd:gMonth value. --MM",t,e,r),this.boxDatatype("xsd:gDay","Day","A particular day. An xsd:gDay value. ---DD",t,e,r),this.boxDatatype("xsd:gYearMonth","Year / Month","A year and a month. An xsd:gYearMonth value.",t,e,r),this.boxDatatype("xsd:gMonthDay","Month / Day","A month and a day. An xsd:gMonthDay value.",t,e,r),this.boxDatatype("xsd:duration","Duration","A period of time. An xsd:duration value.",t,e,r),this.boxDatatype("xsd:yearMonthDuration","Year / Month Duration","A duration measured in years and months. An xsd:yearMonthDuration value.",t,e,r),this.boxDatatype("xsd:dayTimeDuration","Day / Time Duration","A duration measured in days and time. An xsd:dayTimeDuration value.",t,e,r),this.boxDatatype("xsd:byte","Byte","An xsd:byte value.",t,e,r),this.boxDatatype("xsd:short","Short","An xsd:short value.",t,e,r),this.boxDatatype("xsd:integer","Integer","A simple number. An xsd:integer value.",t,e,r),this.boxDatatype("xsd:long","Long","An xsd:long value.",t,e,r),this.boxDatatype("xsd:unsignedByte","Unsigned Byte","An xsd:unsignedByte value.",t,e,r),this.boxDatatype("xsd:unsignedInt","Unsigned Integer","An xsd:unsignedInt value.",t,e,r),this.boxDatatype("xsd:unsignedLong","Unsigned Long Integer","An xsd:unsignedLong value.",t,e,r),this.boxDatatype("xsd:positiveInteger","Positive Integer","A simple number greater than 0. An xsd:positiveInteger value.",t,e,r),this.boxDatatype("xsd:nonNegativeInteger","Non-Negative Integer","A simple number that can't be less than 0. An xsd:nonNegativeInteger value.",t,e,r),this.boxDatatype("xsd:negativeInteger","Negative Integer","A negative integer. An xsd:negativeInteger value.",t,e,r),this.boxDatatype("xsd:nonPositiveInteger","Non-Positive Integer","A number less than or equal to zero. An xsd:nonPositiveInteger value.",t,e,r),this.boxDatatype("xsd:base64Binary","Base 64 Binary","An xsd:base64Binary value.",t,e,r),this.boxDatatype("xsd:anyURI","Any URI","Any URl. An xsd:anyURI value.",t,e,r),this.boxDatatype("xsd:language","Language","A natural language identifier as defined by by [RFC 3066] . An xsd:language value.",t,e,r),this.boxDatatype("xsd:normalizedString","Normalized String","An xsd:normalizedString value.",t,e,r),this.boxDatatype("xsd:token","Token","An xsd:token value.",t,e,r),this.boxDatatype("xsd:NMTOKEN","NMTOKEN","An xsd:NMTOKEN value.",t,e,r),this.boxDatatype("xsd:Name","Name","An xsd:Name value.",t,e,r),this.boxDatatype("xsd:NCName","NCName","An xsd:NCName value.",t,e,r),this.boxDatatype("xsd:NOTATION","NOTATION","An xsd:NOTATION value.",t,e,r),this.boxDatatype("xsd:QName","QName","An xsd:QName value.",t,e,r),this.boxDatatype("xsd:ID","ID","An xsd:ID value.",t,e,r),this.boxDatatype("xsd:IDREF","IDREF","An xsd:IDREF value.",t,e,r),this.boxDatatype("xsd:ENTITY","ENTITY","An xsd:ENTITY value.",t,e,r))},s.prototype.loadXDDBoxes=function(t,e,r){return(new i).and(this.boxDatatype("xdd:coordinate","Coordinate","A particular location on the surface of the earth, defined by latitude and longitude . An xdd:coordinate value.",t,e,r),this.boxDatatype("xdd:coordinatePolygon","Geographic Area","A shape on a map which defines an area. within the defined set of coordinates   An xdd:coordinatePolygon value.",t,e,r),this.boxDatatype("xdd:coordinatePolyline","Coordinate Path","A set of coordinates forming a line on a map, representing a route. An xdd:coordinatePolyline value.",t,e,r),this.boxDatatype("xdd:url","URL","A valid url.",t,e,r),this.boxDatatype("xdd:email","Email","A valid email address.",t,e,r),this.boxDatatype("xdd:html","HTML","A safe HTML string",t,e,r),this.boxDatatype("xdd:json","JSON","A JSON Encoded String"),this.boxDatatype("xdd:gYearRange","Year","A 4-digit year, YYYY, or if uncertain, a range of years. An xdd:gYearRange value.",t,e,r),this.boxDatatype("xdd:integerRange","Integer","A simple number or range of numbers. An xdd:integerRange value.",t,e,r),this.boxDatatype("xdd:decimalRange","Decimal Number","A decimal value or, if uncertain, a range of decimal values. An xdd:decimalRange value.",t,e,r),this.boxDatatype("xdd:dateRange","Date Range","A date or a range of dates YYYY-MM-DD",t,e,r))},s.prototype.boxDatatype=function(t,e,r,n,o,s){o=o||this.graph,s=s||"scm:";let a=t.split(":")[1],u=s+a.charAt(0).toUpperCase()+a.slice(1),c=s+a.charAt(0).toLowerCase()+a.slice(1);var l=this.add_class(u,o).label(e);l.description("Boxed Class for "+t),n&&l.parent(n);var p=this.add_property(c,t,o).label(e).domain(u);return r&&p.description(r),(new i).and(l,p)},e.exports=s},function(module,exports,__webpack_require__){const UTILS=__webpack_require__(2);
/**
 * @file Terminus Rules
 * @license Apache Version 2
 * Abstract object to support applying matching rules to result sets and documents
 * sub-classes are FrameRule and WOQLRule - this just has common functions
 */function TerminusRule(){}function TerminusPattern(t){}TerminusRule.prototype.literal=function(t){return void 0===t?this.pattern.literal:(this.pattern.literal=t,this)},TerminusRule.prototype.type=function(...t){return void 0===t||0==t.length?this.pattern.type:(this.pattern.type=t,this)},TerminusRule.prototype.scope=function(t){return void 0===t?this.pattern.scope:(this.pattern.scope=t,this)},TerminusRule.prototype.value=function(...t){return void 0===t?this.pattern.value:(this.pattern.value=t,this)},TerminusRule.prototype.json=function(t){if(!t){var e={};return this.pattern&&(e.pattern=this.pattern.json()),this.rule&&(e.rule=this.rule),e}return t.pattern&&this.pattern.setPattern(t.pattern),t.rule&&(this.rule=t.rule),this},TerminusPattern.prototype.setPattern=function(t){void 0!==t.literal&&(this.literal=t.literal),t.type&&(this.type=t.type),t.scope&&(this.scope=t.scope),t.value&&(this.value=t.value)},TerminusPattern.prototype.json=function(){var t={};return void 0!==this.literal&&(t.literal=this.literal),this.type&&(t.type=this.type),this.scope&&(t.scope=this.scope),this.value&&(t.value=this.value),t},TerminusPattern.prototype.testBasics=function(t,e){if(this.scope&&t&&this.scope!=t)return!1;if(this.type){var r=e["@type"];if(!r||!this.testValue(r,this.type))return!1}return(void 0===this.literal||this.literal==!(void 0===e["@type"]))&&!(void 0!==this.value&&!this.testValue(e,this.value))},TerminusPattern.prototype.testValue=function(t,e){var r=t["@value"]?t["@value"]:t;if("function"==typeof e)return e(r);e&&!Array.isArray(e)&&(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];if("string"==typeof r){if(this.stringMatch(i,r))return!0}else if("number"==typeof r&&this.numberMatch(i,r))return!0}return!1},TerminusPattern.prototype.unpack=function(t,e){var r="";if(e)for(var n=0;n<t.length;n++)"string"==typeof t[n]?r+='"'+t[n]+'"':r+=t[n],n<t.length-1&&(r+=", ");else r='"'+t.join('","')+'"';return r},TerminusPattern.prototype.IDsMatch=function(t,e){return UTILS.compareIDs(t,e)},TerminusPattern.prototype.classIDsMatch=function(t,e){return this.IDsMatch(t,e)},TerminusPattern.prototype.propertyIDsMatch=function(t,e){return this.IDsMatch(t,e)},TerminusPattern.prototype.rangeIDsMatch=function(t,e){return this.IDsMatch(t,e)},TerminusPattern.prototype.valuesMatch=function(t,e){return t==e},TerminusPattern.prototype.numberMatch=function(vala,valb){if("string"==typeof vala)try{return eval(valb+vala)}catch(t){return!1}return vala===valb},TerminusPattern.prototype.stringMatch=function(t,e){if("/"==t.substring(0,1)){return new RegExp(t.substring(1)).test(e)}return t===e},module.exports={TerminusRule:TerminusRule,TerminusPattern:TerminusPattern}},function(t,e,r){const n=r(7),i=r(37),o=r(2);function s(){n.ViewConfig.call(this),this.type="table"}function a(){n.WOQLViewRule.call(this)}s.prototype=Object.create(n.ViewConfig.prototype),s.prototype.constructor=n.ViewConfig,s.prototype.create=function(t){return new i(t,this)},s.prototype.json=function(){let t=[];for(var e=0;e<this.rules.length;e++)t.push(this.rules[e].json());var r={};return void 0!==this.column_order()&&(r.column_order=this.column_order()),void 0!==this.pagesize()&&(r.pagesize=this.pagesize()),void 0!==this.renderer()&&(r.renderer=this.renderer()),void 0!==this.pager()&&(r.pager=this.pager()),void 0!==this.page()&&(r.page=this.page()),void 0!==this.changesize()&&(r.changesize=this.changesize()),{table:r,rules:t}},s.prototype.loadJSON=function(t,e){for(var r=[],n=0;n<e.length;n++){var i=new a;i.json(e[n]),r.push(i)}return this.rules=r,void 0!==t.column_order&&this.column_order(...t.column_order),void 0!==t.pagesize&&this.pagesize(t.pagesize),void 0!==t.renderer&&this.renderer(t.renderer),void 0!==t.pager&&this.pager(t.pager),void 0!==t.page&&this.page(t.page),void 0!==t.changesize&&this.changesize(t.changesize),this},s.prototype.prettyPrint=function(){var t="view = View.table();\n";void 0!==this.column_order()&&(t+="view.column_order('"+this.column_order()+"')\n"),void 0!==this.pagesize()&&(t+="view.pagesize("+this.pagesize()+")\n"),void 0!==this.renderer()&&(t+="view.renderer('"+this.renderer()+"')\n"),void 0!==this.pager()&&(t+="view.pager("+this.pager()+")\n"),void 0!==this.page()&&(t+="view.page("+this.page()+")\n"),void 0!==this.changesize()&&(t+="view.changesize("+this.changesize()+")\n");for(var e=0;e<this.rules.length;e++){let r=this.rules[e].prettyPrint();r&&(t+="view."+r+"\n")}return t},s.prototype.renderer=function(t){return t?(this.trenderer=t,this):this.trenderer},s.prototype.header=function(t){return void 0===t?this.theader:(this.theader=t,this)},s.prototype.column_order=function(...t){return void 0===t||0==t.length?this.order:(this.order=o.removeNamespacesFromVariables(t),this)},s.prototype.pager=function(t){return void 0===t?this.show_pager:(this.show_pager=t,this)},s.prototype.changesize=function(t){return void 0===t?this.change_pagesize:(this.change_pagesize=t,this)},s.prototype.pagesize=function(t){return void 0===t?this.show_pagesize:(this.show_pagesize=t,this)},s.prototype.page=function(t){return void 0===t?this.show_pagenumber:(this.show_pagenumber=t,this)},s.prototype.column=function(...t){let e=(new a).scope("column");return e.setVariables(t),this.rules.push(e),e},s.prototype.row=function(){let t=(new a).scope("row");return this.rules.push(t),t},a.prototype=Object.create(n.WOQLViewRule.prototype),a.prototype.constructor=n.WOQLViewRule,a.prototype.header=function(t){return void 0===t?this.rule.header:(this.rule.header=t,this)},a.prototype.prettyPrint=function(t){var e=n.WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.header()&&(e+=".header("+this.header()+")"),e},t.exports=s},function(t,e,r){const n=r(36),i=r(2),o=r(6),s=r(31);
/**
 * @file WOQL Table 
 * @license Apache Version 2 
 */
function a(t,e){return this.client=t,this.config=e||new n,this}function u(t,e){this.datavalue="terminus:unknown"==t?"":t,this.datatype=e}a.prototype.options=function(t){return this.config=t,this},a.prototype.setResult=function(t){return this.result=t,this},a.prototype.count=function(){return this.result.count()},a.prototype.first=function(){return this.result.first()},a.prototype.prev=function(){return this.result.prev()},a.prototype.next=function(){return this.result.next()},a.prototype.canAdvancePage=function(){return this.result.count()==this.result.query.getLimit()},a.prototype.canChangePage=function(){return this.canAdvancePage()||this.canRetreatPage()},a.prototype.canRetreatPage=function(){return this.result.query.getPage()>1},a.prototype.getPageSize=function(){return this.result.query.getLimit()},a.prototype.setPage=function(t){return this.result.query.setPage(t)},a.prototype.getPage=function(){return this.result.query.getPage()},a.prototype.setPageSize=function(t){return this.update(this.result.query.setPageSize(t))},a.prototype.nextPage=function(){return this.update(this.result.query.nextPage())},a.prototype.firstPage=function(){return this.update(this.result.query.firstPage())},a.prototype.previousPage=function(){return this.update(this.result.query.previousPage())},a.prototype.getColumnsToRender=function(){if(this.hasColumnOrder())var t=this.getColumnOrder();else if(this.result.query.hasSelect())t=this.result.query.getSelectVariables();else t=this.result.getVariableList();var e=this;return t?t.filter(t=>!e.hidden(t)):[]},a.prototype.isSortableColumn=function(){return!0},a.prototype.isFilterableColumn=function(){return!0},a.prototype.getColumnHeaderContents=function(t){t=i.removeNamespaceFromVariable(t);let e=(new o).matchColumn(this.config.rules,t,"header");if(e&&e.length){let r=e[e.length-1].rule.header;return"string"==typeof r?r:"function"==typeof r?r(t):r}return i.labelFromURL(t)},a.prototype.hidden=function(t){colid=i.addNamespaceToVariable(t);let e=(new o).matchColumn(this.config.rules,colid,"hidden");return!!e.length&&e[e.length-1].rule.hidden},a.prototype.update=function(t){return t.execute(this.client).then(e=>{var r=new s(e,t);return this.setResult(r),this.notify&&this.notify(r),r})},a.prototype.hasDefinedEvent=function(t,e,r,n,i){if("row"==r)var s=(new o).matchRow(this.config.rules,t,this.result.cursor,n);else s=(new o).matchCell(this.config.rules,t,e,this.result.cursor,n);return!(!s||!s.length)},a.prototype.getDefinedEvent=function(t,e,r,n,i){if("row"==r)var s=(new o).matchRow(this.config.rules,t,this.result.cursor,n);else s=(new o).matchCell(this.config.rules,t,e,this.result.cursor,n);if(s&&s.length)return s[s.length-1].rule[n]},a.prototype.getRowClick=function(t){return this.getDefinedEvent(t,!1,"row","click")},a.prototype.getCellClick=function(t,e){return this.getDefinedEvent(t,e,"column","click")},a.prototype.getRowHover=function(t){return this.getDefinedEvent(t,!1,"row","hover")},a.prototype.getCellHover=function(t,e){return this.getDefinedEvent(t,e,"column","hover")},a.prototype.getColumnOrder=function(){return this.config.column_order()},a.prototype.hasColumnOrder=a.prototype.getColumnOrder,a.prototype.hasCellClick=a.prototype.getCellClick,a.prototype.hasRowClick=a.prototype.getRowClick,a.prototype.hasCellHover=a.prototype.getCellHover,a.prototype.hasRowHover=a.prototype.getRowHover,a.prototype.getRenderer=function(t,e,r){var n=this.getSpecificRender(t,e);if(n)return n;let i=this.getDefinedEvent(e,t,"column","renderer",r),o=this.getDefinedEvent(e,t,"column","args",r);if(!i){let r=this.getRendererForDatatype(e[t]);i=r.name,o||(o=r.args)}return i?this.datatypes.createRenderer(i,o):void 0},a.prototype.renderValue=function(t,e,r,n){if(e&&e["@type"]){t.type=e["@type"];var i=new u(e["@value"],e["@type"],r,n)}else if(e&&e["@language"]){t.type="xsd:string";i=new u(e["@value"],t.type,r,n)}else if(e&&"string"==typeof e){t.type="id";i=new u(e,"id",r,n)}return i?t.renderValue(i):""},u.prototype.value=function(t){return t?(this.datavalue=t,this):this.datavalue},a.prototype.getRendererForDatatype=function(t){return t&&t["@type"]?this.datatypes.getRenderer(t["@type"],t["@value"]):t&&t["@language"]?this.datatypes.getRenderer("xsd:string",t["@value"]):!(!t||"string"!=typeof t)&&this.datatypes.getRenderer("id",t)},a.prototype.getSpecificRender=function(t,e){return this.getDefinedEvent(e,t,"column","render")},t.exports=a},function(t,e,r){const n=r(7),i=r(39),o=r(2);function s(){n.ViewConfig.call(this),this.type="chooser"}function a(t){n.WOQLViewRule.call(this,t)}s.prototype=Object.create(n.ViewConfig.prototype),s.prototype.constructor=n.ViewConfig,s.prototype.create=function(t){return new i(t,this)},s.prototype.prettyPrint=function(){var t="view = View.chooser();\n";t+=this.getBasicPrettyPrint(),void 0!==this.change()&&(t+="view.change("+this.change()+")\n"),void 0!==this.show_empty()&&(t+="view.show_empty('"+this.show_empty()+"')\n"),void 0!==this.values()&&(t+="view.values('"+o.removeNamespaceFromVariable(this.values())+"')\n"),void 0!==this.labels()&&(t+="view.labels('"+o.removeNamespaceFromVariable(this.labels())+"')\n"),void 0!==this.titles()&&(t+="view.titles('"+o.removeNamespaceFromVariable(this.titles())+"')\n"),void 0!==this.sort()&&(t+="view.sort("+this.sort()+")\n"),void 0!==this.direction()&&(t+="view.direction('"+this.direction()+"')\n");for(var e=0;e<this.rules.length;e++)t+="view."+this.rules[e].prettyPrint("chooser")+"\n";return t},s.prototype.json=function(){var t=this.getBasicJSON();return void 0!==this.change()&&(t.change=this.change()),void 0!==this.show_empty()&&(t.show_empty=this.show_empty()),void 0!==this.values()&&(t.values=this.values()),void 0!==this.labels()&&(t.labels=this.labels()),void 0!==this.titles()&&(t.titles=this.titles()),void 0!==this.sort()&&(t.sort=this.sort()),void 0!==this.direction()&&(t.direction=this.direction()),{chooser:t,rules:this.getRulesJSON()}},s.prototype.loadJSON=function(t,e){for(var r=[],n=0;n<e.length;n++){var i=new a;i.json(e[n]),r.push(i)}this.rules=r,this.loadBasicJSON(t),void 0!==t.change&&this.change(t.change),void 0!==t.show_empty&&this.show_empty(t.show_empty),void 0!==t.values&&this.values(t.values),void 0!==t.labels&&this.labels(t.labels),void 0!==t.titles&&this.titles(t.titles),void 0!==t.sort&&this.sort(t.sort),void 0!==t.direction&&this.direction(t.direction)},s.prototype.change=function(t){return void 0!==t?(this.onChange=t,this):this.onChange},s.prototype.show_empty=function(t){return void 0!==t?(this.placeholder=t,this):this.placeholder},s.prototype.rule=function(t){let e=(new a).scope("row");return this.rules.push(e),t&&e.vars(t),e},s.prototype.values=function(t){return void 0!==t?("v:"==t.substring(0,2)&&(t=t.substring(2)),this.value_variable=t,this):this.value_variable},s.prototype.labels=function(t){return t?("v:"==t.substring(0,2)&&(t=t.substring(2)),this.label_variable=t,this):this.label_variable},s.prototype.titles=function(t){return t?("v:"==t.substring(0,2)&&(t=t.substring(2)),this.title_variable=t,this):this.title_variable},s.prototype.sort=function(t){return t?("v:"==t.substring(0,2)&&(t=t.substring(2)),this.sort_variable=t,this):this.sort_variable},s.prototype.direction=function(t){return t?(this.sort_direction=t,this):this.sort_direction},a.prototype=Object.create(n.WOQLViewRule.prototype),a.prototype.constructor=n.WOQLViewRule,a.prototype.label=function(t){return t?(this.rule.label=t,this):this.rule.label},a.prototype.title=function(t){return t?(this.rule.title=t,this):this.rule.title},a.prototype.values=function(t){return t?(this.rule.values=t,this):this.rule.values},a.prototype.selected=function(t){return void 0!==t?(this.rule.selected=t,this):this.rule.selected},a.prototype.prettyPrint=function(t){var e=WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.selected()&&(e+=".selected("+this.selected()+")"),void 0!==this.label()&&(e+='.label("'+this.label()+'")'),void 0!==this.title()&&(e+='.title("'+this.title()+'")'),void 0!==this.values()&&(e+='.values("'+this.values()+'")'),e},t.exports=s},function(t,e,r){const n=r(38),i=r(2),o=r(6);function s(t,e){return this.client=t,this.config=e||new n,this.selected=!1,this.cursor=0,this}s.prototype.options=function(t){return this.config=t,this},s.prototype.set=function(t){if(this.selected!=t){this.selected=t;let e=this.config.change;e&&e(t)}},s.prototype.setResult=function(t){this.result=t,this.choices=[];let e=0;const r=t.getVariableList();for(!this.config.values()&&r.length&&this.config.values(r[0]),this.config.sort()&&this.result.sort(this.config.sort(),this.config.direction());row=this.result.next();)row&&this.includeRow(row,this.result.cursor)&&this.choices.push(this.rowToChoice(row,e++));return this},s.prototype.includeRow=function(t,e){const r=(new o).matchRow(this.config.rules,t,e,"hidden");for(var n=0;n<r.length;n++)if(r[n].rule.hidden)return!1;return!0},s.prototype.rowToChoice=function(t,e){var r={id:this.getRowID(t)};return r.label=this.getLabelFromBinding(t,e),r.title=this.getTitleFromBinding(t,e),r.selected=this.getSelectedFromBinding(t,e),r},s.prototype.getRowID=function(t){var e=t[this.config.values()];return e["@value"]?e["@value"]:e},s.prototype.getLabelFromBinding=function(t,e){let r=this.getSpecialRenderer(t,e,"label");if(r)return this.renderSpecial(r,t,e);if(this.config.labels()&&t[this.config.labels()]){var n=t[this.config.labels()];if(n["@value"]&&(n=n["@value"]),"terminus:unknown"!=n)return n}return i.labelFromURL(this.getRowID(t))},s.prototype.getTitleFromBinding=function(t,e){let r=this.getSpecialRenderer(t,e,"title");if(r)return this.renderSpecial(r,t,e);if(this.config.titles()&&t[this.config.titles()]){var n=t[this.config.titles()];if(n["@value"]&&(n=n["@value"]),"terminus:unknown"!=n)return n}return!1},s.prototype.getSelectedFromBinding=function(t,e){const r=(new o).matchRow(this.config.rules,t,e,"selected");return!(!r||!r.length)&&r[r.length-1].rule.selected},s.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},s.prototype.setRenderer=function(t){return this.renderer=t,this},s.prototype.getSpecialRenderer=function(t,e,r){const n=(new o).matchRow(this.config.rules,t,e,r);for(var i=0;i<n.length;i++)if(n[i].rule[r])return n[i].rule[r];return!1},s.prototype.renderSpecial=function(t,e,r){return t&&"function"==typeof t?t(e):t&&"string"==typeof t?t:void 0},s.prototype.count=function(){return this.result.count()},s.prototype.first=function(){return this.cursor=0,this.choices[this.cursor]},s.prototype.next=function(){const t=this.choices[this.cursor];return this.cursor++,t},s.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.choices[this.cursor]},t.exports=s},function(t,e,r){const n=r(7),i=r(41),o=r(2);function s(){n.ViewConfig.call(this),this.type="graph"}function a(t){n.WOQLViewRule.call(this,t)}s.prototype=Object.create(n.ViewConfig.prototype),s.prototype.constructor=n.ViewConfig,s.prototype.create=function(t){return new i(t,this)},s.prototype.literals=function(t){return void 0!==t?(this.show_literals=t,this):this.show_literals},s.prototype.source=function(t){return t?(this.source_variable=o.removeNamespaceFromVariable(t),this):this.source_variable},s.prototype.fontfamily=function(t){return void 0!==t?(this.fontfam=t,this):this.fontfam},s.prototype.show_force=function(t){return void 0!==t?(this.force=t,this):this.force},s.prototype.fix_nodes=function(t){return void 0!==t?(this.fixed=t,this):this.fixed},s.prototype.explode_out=function(t){return void 0!==t?(this.explode=t,this):this.explode},s.prototype.selected_grows=function(t){return void 0!==t?(this.bigsel=t,this):this.bigsel},s.prototype.width=function(t){return void 0!==t?(this.gwidth=t,this):this.gwidth},s.prototype.height=function(t){return void 0!==t?(this.gheight=t,this):this.gheight},s.prototype.edges=function(...t){if(t&&t.length){for(var e=[],r=0;r<t.length;r++)e.push(o.removeNamespacesFromVariables(t[r]));return this.show_edges=e,this}return this.show_edges},s.prototype.edge=function(t,e){let r=(new a).edge(t,e);return this.rules.push(r),r},s.prototype.node=function(...t){let e=new a;return t&&t.length?e.scope("node").setVariables(t):e.scope("row"),this.rules.push(e),e},s.prototype.loadJSON=function(t,e){for(var r=[],n=0;n<e.length;n++){var i=new a;i.json(e[n]),r.push(i)}this.rules=r,void 0!==t.literals&&this.literals(t.literals),void 0!==t.source&&this.source(t.source),void 0!==t.fontfamily&&this.fontfamily(t.fontfamily),void 0!==t.show_force&&this.show_force(t.show_force),void 0!==t.fix_nodes&&this.fix_nodes(t.fix_nodes),void 0!==t.explode_out&&this.explode_out(t.explode_out),void 0!==t.selected_grows&&this.selected_grows(t.selected_grows),void 0!==t.width&&this.width(t.width),void 0!==t.height&&this.height(t.height),void 0!==t.edges&&this.edges(...t.edges)},s.prototype.prettyPrint=function(){var t="view = View.graph();\n";if(void 0!==this.literals()&&(t+="view.literals('"+this.literals()+"')\n"),void 0!==this.source()&&(t+="view.source('"+o.removeNamespaceFromVariable(this.source())+"')\n"),void 0!==this.fontfamily()&&(t+="view.fontfamily('"+this.fontfamily()+"')\n"),void 0!==this.show_force()&&(t+="view.show_force('"+this.show_force()+"')\n"),void 0!==this.fix_nodes()&&(t+="view.fix_nodes('"+this.fix_nodes()+"')\n"),void 0!==this.explode_out()&&(t+="view.explode_out('"+this.explode_out()+"')\n"),void 0!==this.selected_grows()&&(t+="view.selected_grows('"+this.selected_grows()+"')\n"),void 0!==this.width()&&(t+="view.width('"+this.width()+"')\n"),void 0!==this.height()&&(t+="view.height('"+this.height()+"')\n"),void 0!==this.edges()){for(var e=this.edges(),r=[],n=0;n<e.length;n++)r.push("['"+e[n][0]+", "+e[n][1]+"']");t+="view.edges('"+r.join(", ")+"')\n"}for(n=0;n<this.rules.length;n++){let e=this.rules[n].prettyPrint();e&&(t+="view."+e+"\n")}return t},s.prototype.json=function(){let t=[];for(var e=0;e<this.rules.length;e++)t.push(this.rules[e].json());var r={};return void 0!==this.literals()&&(r.literals=this.literals()),void 0!==this.source()&&(r.source=this.source()),void 0!==this.fontfamily()&&(r.fontfamily=this.fontfamily()),void 0!==this.show_force()&&(r.show_force=this.show_force()),void 0!==this.fix_nodes()&&(r.fix_nodes=this.fix_nodes()),void 0!==this.explode_out()&&(r.explode_out=this.explode_out()),void 0!==this.selected_grows()&&(r.selected_grows=this.selected_grows()),void 0!==this.width()&&(r.width=this.width()),void 0!==this.height()&&(r.height=this.height()),void 0!==this.edges()&&(r.edges=this.edges()),{graph:r,rules:t}},a.prototype=Object.create(n.WOQLViewRule.prototype),a.prototype.constructor=n.WOQLViewRule,a.prototype.charge=function(t){return void 0===t?this.rule.charge:(this.rule.charge=t,this)},a.prototype.collisionRadius=function(t){return void 0===t?this.rule.collisionRadius:(this.rule.collisionRadius=t,this)},a.prototype.arrow=function(t){return t?(this.rule.arrow=t,this):this.rule.arrow},a.prototype.distance=function(t){return void 0!==t?(this.rule.distance=t,this):this.rule.distance},a.prototype.symmetric=function(t){return void 0!==t?(this.rule.symmetric=t,this):this.rule.symmetric},a.prototype.weight=function(t){return void 0!==t?(this.rule.weight=t,this):this.rule.weight},a.prototype.prettyPrint=function(t){var e=n.WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.charge()&&(e+=".charge('"+this.charge()+"')"),void 0!==this.distance()&&(e+=".distance('"+this.distance()+"')"),void 0!==this.weight()&&(e+=".weight('"+this.weight()+"')"),void 0!==this.symmetric()&&(e+=".symmetric("+this.symmetric()+")"),void 0!==this.collisionRadius()&&(e+=".collisionRadius("+this.collisionRadius()+")"),void 0!==this.arrow()&&(e+=".arrow("+JSON.stringify(this.arrow())+")"),e},t.exports=s},function(t,e,r){const n=r(40),i=r(2),o=r(6);function s(t,e){this.client=t,this.config=e||new n,this.nodes=[],this.edges=[]}s.prototype.options=function(t){return this.config=t,this},s.prototype.setResult=function(t){this.result=t,this.calculateVariableTypes(t)},s.prototype.calculateVariableTypes=function(){var t=this.result.getBindings();if(t&&t.length)for(var e=0;e<t.length;e++)this.extractFromBinding(t[e],e);this.edges=this.combineEdges(this.edges),this.nodes=this.combineNodes(this.nodes)},s.prototype.extractFromBinding=function(t,e){if(this.includeRow(t,e)){var r=[],n=[];for(var o in t)"string"==typeof t[o]?t[o]&&"terminus:unknown"!=t[o]&&this.includeNode(o,t)&&r.push(o):t[o]["@value"]&&this.includeLiteralNode(o,t)&&n.push(o);if(0==r.length)return;for(var s=0;s<n.length;s++){var a=i.genBNID().substring(2);let e=this.getLiteralOwner(r,n[s],t);e&&(this.addAdornedNode(a,n[s],t),this.addAdornedEdge(t[e],a,e,n[s],t))}this.createEdgesFromIDs(r,t);for(s=0;s<r.length;s++){var u=t[r[s]];this.addAdornedNode(u,r[s],t)}}},s.prototype.addAdornedEdge=function(t,e,r,n,s){var a={type:"link",target:e,source:t,text:n};const u=(new o).matchEdge(this.config.rules,s,r,n);for(var c=!1,l=0;l<u.length;l++){var p=u[l].rule;void 0!==p.hidden&&(c=p.hidden),p.size&&(a.radius=i.getConfigValue(p.size,s)),p.text&&(a.text=i.getConfigValue(p.text,s)),p.color&&(a.color=i.getConfigValue(p.color,s)),p.distance&&(a.distance=i.getConfigValue(p.distance,s)),p.arrow&&(a.arrow=i.getConfigValue(p.arrow,s)),p.symmetric&&(a.symmetric=i.getConfigValue(p.symmetric,s)),p.weight&&(a.weight=i.getConfigValue(p.weight,s))}c||this.edges.push(a)},s.prototype.addAdornedNode=function(t,e,r){var n={type:"node",id:t,nodetype:e};const s=(new o).matchNode(this.config.rules,r,e,t);for(var a=0;a<s.length;a++){var u=s[a].rule;u.size&&(n.radius=i.getConfigValue(u.size,r)),u.color&&(n.color=i.getConfigValue(u.color,r)),u.charge&&(n.charge=i.getConfigValue(u.charge,r)),u.collisionRadius&&(n.collisionRadius=i.getConfigValue(u.collisionRadius,r)),u.icon&&(n.icon=i.getConfigValue(u.icon,r)),u.text&&(n.text=i.getConfigValue(u.text,r)),u.border&&(n.border=i.getConfigValue(u.border,r))}n.text||("string"==typeof r[e]?n.text=r[e]:r[e]["@value"]&&(n.text=r[e]["@value"])),this.nodes.push(n)},s.prototype.getLiteralOwner=function(t,e,r){var n=this.config.source();if(n&&r[n])return n;var i=this.config.edges();if(i){for(var o=0;o<i.length;o++)if(i[o][1]==e)return i[o][0];return!1}return t[0]},s.prototype.createEdgesFromIDs=function(t,e){if(t.length<2)return;var r=this.config.source();let n=this.config.edges();if(!r&&n&&n.length)for(var i=0;i<n.length;i++)-1!=t.indexOf(n[i][0])&&-1!=t.indexOf(n[i][1])&&this.addAdornedEdge(e[n[i][0]],e[n[i][1]],n[i][0],n[i][1],e);else{var o=r&&-1!=t.indexOf(r)?r:t[0];for(i=0;i<t.length;i++)t[i]!=o&&this.addAdornedEdge(e[o],e[t[i]],o,t[i],e)}},s.prototype.getEdges=function(){return this.edges},s.prototype.combineNodes=function(t){for(var e={},r=0;r<t.length;r++){var n=t[r];if(-1!=this.nodes_referenced_by_edges.indexOf(n.id))if(void 0===e[n.id])e[n.id]=n;else for(var i in n)void 0===e[n.id][i]&&(e[n.id][i]=n[i])}return Object.values(e)},s.prototype.combineEdges=function(t){this.nodes_referenced_by_edges=[];for(var e={},r=0;r<t.length;r++){var n=t[r];if(void 0===e[n.source]&&(e[n.source]={}),void 0===e[n.source][n.target])e[n.source][n.target]=n;else for(var i in n)void 0===e[n.source][n.target][i]&&(e[n.source][n.target][i]=n[i]);-1==this.nodes_referenced_by_edges.indexOf(n.source)&&this.nodes_referenced_by_edges.push(n.source),-1==this.nodes_referenced_by_edges.indexOf(n.target)&&this.nodes_referenced_by_edges.push(n.target)}var o=[];for(var i in e)for(var s in e[i])o.push(e[i][s]);return o},s.prototype.getNodes=function(){return this.nodes},s.prototype.includeNode=function(t,e){const r=(new o).matchNode(this.config.rules,e,t,!1,"hidden");for(var n=0;n<r.length;n++)if(r[n].rule.hidden)return!1;return!0},s.prototype.includeLiteralNode=function(t,e){let r=this.config.literals();if(void 0!==r&&!r)return!1;const n=(new o).matchNode(this.config.rules,e,t,!1,"hidden");for(var i=0;i<n.length;i++)if(n[i].rule.hidden)return!1;return!0},s.prototype.includeRow=function(t,e){const r=(new o).matchRow(this.config.rules,t,e,"hidden");for(var n=0;n<r.length;n++)if(r[n].rule.hidden)return!1;return!0},t.exports=s},function(t,e,r){const n=r(7);r(43);function i(){n.ViewConfig.call(this),this.type="chart"}function o(){n.WOQLViewRule.call(this)}i.prototype=Object.create(n.ViewConfig.prototype),i.prototype.constructor=n.ViewConfig,i.prototype.prettyPrint=function(){for(var t="view = View.chart();\n",e=0;e<this.rules.length;e++)t+="view."+this.rules[e].prettyPrint()+"\n";return void 0!==this.margin()&&(t+="view.margin("+this.margin()+")\n"),void 0!==this.title()&&(t+="view.title('"+this.title()+"')\n"),void 0!==this.description()&&(t+="view.description('"+this.description()+"')\n"),void 0!==this.layout()&&(t+="view.layout('"+this.layout()+"')\n"),t+=this.getBasicPrettyPrint()},i.prototype.json=function(){var t={};return void 0!==this.margin()&&(t.margin=this.margin()),void 0!==this.title()&&(t.title=this.title()),void 0!==this.description()&&(t.description=this.description()),void 0!==this.layout()&&(t.layout=this.layout()),{chart:t,rules:this.getRulesJSON()}},i.prototype.loadJSON=function(t,e){this.loadBasicJSON(t);for(var r=[],n=0;n<e.length;n++){var i=new o;i.json(e[n]),r.push(i)}this.rules=r,void 0!==t.margin&&this.margin(t.margin),void 0!==t.title&&this.title(t.title),void 0!==t.description&&this.description(t.description),void 0!==t.layout&&this.layout(t.layout)},i.prototype.title=function(t){return void 0===t?this._title:(this._title=t,this)},i.prototype.description=function(t){return t?(this._description=t,this):this._description},i.prototype.layout=function(t){return t?(this._layout=t,this):this._layout},i.prototype.margin=function(t){return t?(this._margin=t,this):this._margin},i.prototype.create=function(t){return new i(t,this)},i.prototype.xAxis=function(...t){let e=(new o).scope("XAxis");return e.setVariables(t),this.rules.push(e),e},i.prototype.bar=function(...t){let e=(new o).scope("Bar");return e.setVariables(t),this.rules.push(e),e},i.prototype.line=function(...t){let e=(new o).scope("Line");return e.setVariables(t),this.rules.push(e),e},i.prototype.point=function(...t){let e=(new o).scope("Point");return e.setVariables(t),this.rules.push(e),e},i.prototype.area=function(...t){let e=(new o).scope("Area");return e.setVariables(t),this.rules.push(e),e},o.prototype=Object.create(n.WOQLViewRule.prototype),o.prototype.constructor=n.WOQLViewRule,o.prototype.style=function(t,e){return e?(this.rule[t]=e,this):this.rule[t]},o.prototype.label=function(t){return t?(this.rule.label=t,this):this.rule.label},o.prototype.legendType=function(t){return t?(this.rule.legendType=t,this):this.rule.legendType},o.prototype.fill=function(t){return t?(this.rule.fill=t,this):this.rule.fill},o.prototype.stroke=function(t){return t?(this.rule.stroke=t,this):this.rule.stroke},o.prototype.strokeWidth=function(t){return void 0!==t?(this.rule.strokeWidth=t,this):this.rule.strokeWidth},o.prototype.dot=function(t){return void 0!==t?(this.rule.dot=t,this):this.rule.dot},o.prototype.labelRotate=function(t){return void 0!==t?(this.rule.labelRotate=t,this):this.rule.labelRotate},o.prototype.padding=function(t){return t?(this.rule.padding=t,this):this.rule.padding},o.prototype.type=function(t){return t?(this.rule.type=t,this):this.rule.type},o.prototype.axisDomain=function(t){return t?(this.rule.domain=t,this):this.rule.domain},o.prototype.barSize=function(t){return t?(this.rule.barSize=t,this):this.rule.barSize},t.exports=i},function(t,e,r){const n=r(42);function i(t,e){return this.client=t,this.config=e||new n,this}i.prototype.options=function(t){return this.config=t,this},i.prototype.setResult=function(t){return this.result=t,this}},function(t,e,r){const n=r(7),i=r(45);function o(){n.ViewConfig.call(this),this.type="stream"}function s(){n.WOQLViewRule.call(this)}o.prototype=Object.create(n.ViewConfig.prototype),o.prototype.constructor=n.ViewConfig,o.prototype.create=function(t){return new i(t,this)},o.prototype.row=function(){var t=(new s).scope("row");return this.rules.push(t),t},o.prototype.template=function(t){return t?(this.mtemplate=t,this):this.mtemplate},o.prototype.prettyPrint=function(){var t="view = View.stream();\n";void 0!==this.template()&&(t+="view.template("+JSON.stringify(this.template())+")\n");for(var e=0;e<this.rules.length;e++)t+="view."+this.rules[e].prettyPrint()+"\n";return t},o.prototype.loadJSON=function(t,e){for(var r=[],n=0;n<e.length;n++){var i=new s;i.json(e[n]),r.push(i)}this.rules=r,t.template&&(this.mtemplate=t.template)},o.prototype.json=function(){let t=[];for(var e=0;e<this.rules.length;e++)t.push(this.rules[e].json());var r={};return this.mtemplate&&(r.template=this.mtemplate),{stream:r,rules:t}},s.prototype=Object.create(n.WOQLViewRule.prototype),s.prototype.constructor=n.WOQLViewRule,s.prototype.template=function(t){return t?(this.rule.template=t,this):this.rule.template},t.exports=o},function(t,e,r){const n=r(44);function i(t,e){return this.client=t,this.config=e||new n,this}i.prototype.options=function(t){return this.config=t,this},i.prototype.setResult=function(t){this.result=t},t.exports=i},function(t,e,r){const n=r(7),i=r(9),o=r(47);
/**
 * @file Frame Config 
 * @license Apache Version 2
 */
function s(){n.ViewConfig.call(this),this.type="document"}
/**
 * @file Document Rule
 * @license Apache Version 2
 */
function a(){i.call(this),this.rule={}}s.prototype=Object.create(n.ViewConfig.prototype),s.prototype.constructor=n.ViewConfig,s.prototype.create=function(t){return new o(t,this)},s.prototype.prettyPrint=function(){var t="view = View.document();\n";t+=this.getBasicPrettyPrint(),void 0!==this.load_schema()&&(t+="view.load_schema("+this.load_schema()+")\n");for(var e=0;e<this.rules.length;e++)t+="view."+this.rules[e].prettyPrint()+"\n";return t},s.prototype.json=function(){var t=this.getBasicJSON();return void 0!==this.load_schema()&&(t.load_schema=this.load_schema()),{frame:t,rules:this.getRulesJSON()}},s.prototype.loadJSON=function(t,e){for(var r=[],n=0;n<e.length;n++){var i=new a;i.json(e[n]),r.push(i)}return this.rules=r,this.loadBasicJSON(t),void 0!==t.load_schema&&this.load_schema(t.load_schema),this},s.prototype.json_rules=function(){let t=[];for(var e=0;e<this.rules.length;e++)t.push(this.rules[e].json());return t},s.prototype.load_schema=function(t){return void 0===t?this.get_schema:(this.get_schema=t,this)},s.prototype.show_all=function(t){return this.all().renderer(t),this},s.prototype.show_parts=function(t,e,r){return this.object().renderer(t),this.property().renderer(e),this.data().renderer(r),this},s.prototype.object=function(){let t=(new a).scope("object");return this.rules.push(t),t},s.prototype.property=function(){let t=(new a).scope("property");return this.rules.push(t),t},s.prototype.scope=function(t){let e=(new a).scope(t);return this.rules.push(e),e},s.prototype.data=function(){let t=(new a).scope("data");return this.rules.push(t),t},s.prototype.all=function(){let t=(new a).scope("*");return this.rules.push(t),t},s.prototype.setFrameDisplayOptions=function(t,e){void 0===t.display_options&&(t.display_options={}),void 0!==e.mode()&&(t.display_options.mode=e.mode()),void 0!==e.view()&&(t.display_options.view=e.view()),void 0!==e.showDisabledButtons()&&(t.display_options.show_disabled_buttons=e.showDisabledButtons()),void 0!==e.hidden()&&(t.display_options.hidden=e.hidden()),void 0!==e.collapse()&&(t.display_options.collapse=e.collapse()),void 0!==e.style()&&(t.display_options.style=e.style()),void 0!==e.headerStyle()&&(t.display_options.header_style=e.headerStyle()),void 0!==e.features()&&(t.display_options.features=this.setFrameFeatures(t.display_options.features,e.features())),void 0!==e.headerFeatures()&&(t.display_options.header_features=this.setFrameFeatures(t.display_options.header_features,e.headerFeatures())),void 0!==e.header()&&(t.display_options.header=e.header()),void 0!==e.showEmpty()&&(t.display_options.show_empty=e.showEmpty()),void 0!==e.dataviewer()&&(t.display_options.dataviewer=e.dataviewer()),void 0!==e.args()&&(t.display_options.args=this.setFrameArgs(t.display_options.args,e.args()))},s.prototype.setFrameFeatures=function(t,e){if(!t||!t.length)return e;if(!e||!e.length)return t;let r=[];for(var n=0;n<t.length;n++){var i="string"==typeof t[n]?t[n]:Object.keys(t[n])[0];r.push(i)}for(var o=0;o<e.length;o++){var s="string"==typeof e[o]?e[o]:Object.keys(e[o])[0],a=r.indexOf(s);if(-1==a)t.push(e[o]);else if("object"==typeof e[o]){var u=t[a];if("string"==typeof u)t[a]=e[o];else if("object"==typeof u){var c=e[o][s];for(var l in c)t[a][s][l]=c[l]}}}return t},s.prototype.setFrameArgs=function(t,e){if(!t)return e;if(!e)return t;for(var r in e)t[r]=e[r];return t},a.prototype=Object.create(i.prototype),a.prototype.constructor=i,a.prototype.renderer=function(t){return void 0===t?this.rule.renderer:(this.rule.renderer=t,this)},a.prototype.compare=function(t){return void 0===t?this.rule.compare:(this.rule.compare=t,this)},a.prototype.mode=function(t){return void 0===t?this.rule.mode:(this.rule.mode=t,this)},a.prototype.collapse=function(t){return void 0===t?this.rule.collapse:(this.rule.collapse=t,this)},a.prototype.view=function(t){return t?(this.rule.view=t,this):this.rule.view},a.prototype.showDisabledButtons=function(t){return void 0===t?this.rule.show_disabled_buttons:(this.rule.show_disabled_buttons=t,this)},a.prototype.header=function(t){return t?(this.rule.header=t,this):this.rule.header},a.prototype.headerStyle=function(t){return t?(this.rule.headerStyle=t,this):this.rule.headerStyle},a.prototype.showEmpty=function(t){return t?(this.rule.show_empty=t,this):this.rule.show_empty},a.prototype.dataviewer=function(t){return t?(this.rule.dataviewer=t,this):this.rule.dataviewer},a.prototype.features=function(...t){return void 0===t||0==t.length?this.rule.features:(this.rule.features=t,this)},a.prototype.headerFeatures=function(...t){return void 0===t||0==t.length?this.rule.header_features:(this.rule.header_features=t,this)},a.prototype.render=function(t){if(!t)return this.rule.render;var e=this.headerFeatures(),r=this.features();if(e&&e.length){var n=this.applyFeatureProperty(e,"render",t);this.headerFeatures(...n)}else if(r&&r.length){n=this.applyFeatureProperty(r,"render",t);this.features(...n)}else this.rule.render=t;return this},a.prototype.style=function(t){if(void 0===t)return this.rule.style;var e=this.headerFeatures(),r=this.features();if(e&&e.length){var n=this.applyFeatureProperty(e,"style",t);this.headerFeatures(...n)}else if(r&&r.length){n=this.applyFeatureProperty(r,"style",t);this.features(...n)}else this.rule.style=t;return this},a.prototype.hidden=function(t){if(void 0===t)return this.rule.hidden;var e=this.headerFeatures(),r=this.features();if(e&&e.length){var n=this.applyFeatureProperty(e,"hidden",t);this.headerFeatures(...n)}else if(r&&r.length){n=this.applyFeatureProperty(r,"hidden",t);this.features(...n)}else this.rule.hidden=t;return this},a.prototype.args=function(t){if(!t)return this.rule.args;var e=this.headerFeatures(),r=this.features();if(e&&e.length){var n=this.applyFeatureProperty(e,"args",t);this.headerFeatures(...n)}else if(r&&r.length){n=this.applyFeatureProperty(r,"args",t);this.features(...n)}else this.rule.args=t;return this},a.prototype.applyFeatureProperty=function(t,e,r){for(var n=[],i=0;i<t.length;i++){if("string"==typeof t[i])(o={})[t[i]]={},o[t[i]][e]=r,n.push(o);else if("object"==typeof t[i]){let s=Object.keys(t[i])[0];var o;if(s)(o=t[i])[s][e]=r,n.push(o)}}return n},a.prototype.unpackFeatures=function(t){let e={};for(var r="",n=0;n<t.length;n++){if("string"==typeof t[n])r+='"'+t[n]+'"';else if("object"==typeof t[n]){var i=Object.keys(t[n])[0];for(var o in r+='"'+i+'"',t[n][i])e[o]=t[n][i][o]}n<t.length-1&&(r+=", ")}for(var s=0;s<Object.keys(e).length;s++){var a=Object.keys(e)[s],u=e[a];r+=")."+a+"(","function"==typeof u?r+=u:"string"==typeof u?r+='"'+u+'"':"object"==typeof u&&(r+=JSON.stringify(u))}return r},a.prototype.prettyPrint=function(){return this.pattern&&(str=this.pattern.prettyPrint()),void 0!==this.renderer()&&(str+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(str+=".render("+this.render+")"),void 0!==this.compare()&&(str+=".compare("+this.compare()+")"),void 0!==this.mode()&&(str+=".mode('"+this.mode()+"')"),void 0!==this.collapse()&&(str+=".collapse("+this.collapse()+")"),void 0!==this.hidden()&&(str+=".hidden("+this.hidden()+")"),void 0!==this.view()&&(str+=".view('"+this.view()+"')"),void 0!==this.showDisabledButtons()&&(str+=".showDisabledButtons("+this.showDisabledButtons()+")"),void 0!==this.header()&&(str+=".header("+this.header()+")"),void 0!==this.style()&&(str+='.style("'+this.style()+'")'),void 0!==this.headerStyle()&&(str+='.headerStyle("'+this.headerStyle()+'")'),void 0!==this.args()&&(str+=".args("+JSON.stringify(this.args())+")"),void 0!==this.showEmpty()&&(str+=".showEmpty("+this.show_empty()+")"),void 0!==this.dataviewer()&&(str+='.dataviewer("'+this.dataviewer()+'")'),void 0!==this.features()&&(str+=".features("+this.unpackFeatures(this.features())+")"),void 0!==this.headerFeatures()&&(str+=".headerFeatures("+this.unpackFeatures(this.headerFeatures())+")"),str},t.exports=s},function(t,e,r){const n=r(84),i=r(46),o=r(2);
/**
 * @file Document Frame 
 * @license Apache Version 2
 */
function s(t,e){this.client=t,this.config=e||new i,this.load_schema=!1}s.prototype.options=function(t){return this.config=t,this},s.prototype.db=function(t){return this.client.db(t),this},s.prototype.load=function(t,e){return t?("doc:"==t.substring(0,4)&&(t=t.substring(4)),this.config.load_schema()?this.loadComplete(t,e):this.loadDocument(t)):e?this.loadSchema(e):void 0},s.prototype.loadDocument=function(t,e){return e=e||"terminus:frame",this.client.getDocument(t,{"terminus:encoding":e}).then(t=>{"terminus:frame"==e?this.loadDataFrames(t):this.loadJSON(t)})},s.prototype.loadSchema=function(t,e){var r=o.unshorten(t);return this.client.getClassFrame(e,r).then(t=>this.loadSchemaFrames(t,r))},s.prototype.loadComplete=function(t,e){return e?Promise.all([this.loadDocument(t),this.loadDocumentSchema(e)]):this.loadDocument(t).then(t=>{this.loadSchema(this.document.cls)})},s.prototype.loadJSON=function(t,e){return this.docid?this.loadDocument(this.docid):this.clsid?this.loadDocumentSchema(this.clsid):void console.error("Either docid or clid must be set before load is called")},s.prototype.loadDataFrames=function(t,e,r){e||(this.document?e=this.document.cls:t&&t.length&&t[0]&&t[0].domain&&(e=t[0].domain)),e?this.document?this.document.loadDataFrames(t):this.document=new n(e,t,r):console.log("Missing Class Failed to add dataframes due to missing class")},s.prototype.loadSchemaFrames=function(t,e){e||t&&t.length&&t[0]&&t[0].domain&&(e=t[0].domain),e?(this.document||(this.document=new n(e)),t&&(this.document.loadClassFrames(t),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):console.log("Missing Class","Failed to add class frames due to missing both class and classframes")},s.prototype.applyRules=function(t,e,r){t=t||this.document,e=e||this.config;t.filter(e.rules,(function(t,n){e.setFrameDisplayOptions(t,n),r&&r(t,n)}))},t.exports=s},function(t,e,r){const n=r(11),i=r(49),o=r(8),s=r(28),a=r(29)
/**
 * @file Javascript WOQL client object
 * @license Apache Version 2
 * Simple Javascript Client for accessing the Terminus DB API
 * Constructor 
 * @param {object} params - a json object with the following connection parameters:
 * 	server: server url 
 * 	key: api key for basic auth
 * 	user: basic auth user id 
 * 	jwt: jwt token 
 * 	jwt_user: jwt user id 
 * 	account: set account to this id
 * 	db: set cursor to this db
 *  repo: set cursor to this repo
 *  branch: set branch to this id
 */;function u(t){this.connectionConfig=new a(t),this.connection=new s}u.CONST=n,u.prototype.copy=function(){let t=new u;return t.connection=this.connection,t.connectionConfig=this.connectionConfig.copy(),t},u.prototype.server=function(){return this.connectionConfig.serverURL()},u.prototype.account=function(t){return void 0!==t&&this.connectionConfig.setAccount(t),this.connectionConfig.account()},u.prototype.db=function(t){return void 0!==t&&this.connectionConfig.setDB(t),this.connectionConfig.db()},u.prototype.repo=function(t){return void 0!==t&&this.connectionConfig.setRepo(t),this.connectionConfig.repo()},u.prototype.checkout=function(t){return void 0!==t&&this.connectionConfig.setBranch(t),this.connectionConfig.branch()},u.prototype.ref=function(t){return void 0!==t&&this.connectionConfig.setRef(t),this.connectionConfig.ref()},u.prototype.key=function(t,e){return void 0!==t&&this.connectionConfig.setKey(t,e),this.connectionConfig.key()},u.prototype.jwt=function(t,e){return void 0!==t&&this.connectionConfig.setJWT(t,e),this.connectionConfig.jwt()},u.prototype.uid=function(t){return this.connectionConfig.user(t)},u.prototype.set=function(t){this.connectionConfig.update(t)},u.prototype.connect=function(t){if(t&&this.connectionConfig.update(t),!this.server()){let e=t&&t.server?t.server:"Missing URL";return Promise.reject(new URIError(o.getInvalidURIMessage(e,n.CONNECT)))}return this.dispatch(n.CONNECT,this.server()).then(t=>(this.account()||this.account(this.uid()),this.connection.setCapabilities(t),t))},u.prototype.createDatabase=function(t,e,r){if(t&&this.db(t))return r&&this.account(r),this.dispatch(n.CREATE_DATABASE,this.connectionConfig.dbURL(),e);let i=`Create database parameter error - you must specify a valid database id  - ${t} is invalid`;return Promise.reject(new Error(o.getInvalidParameterMessage(n.CREATE_DATABASE,i)))},u.prototype.deleteDatabase=function(t,e){if(t&&this.db(t))return e&&this.account(e),this.dispatch(n.DELETE_DATABASE,this.connectionConfig.dbURL()).then(t=>(this.connection.removeDB(this.db(),this.account()),t));let r=`Delete database parameter error - you must specify a valid database id  - ${t} is invalid`;return Promise.reject(new Error(o.getInvalidParameterMessage(n.DELETE_DATABASE,r)))},u.prototype.createGraph=function(t,e,r){if(t&&-1!=["inference","schema","instance"].indexOf(t)&&e&&r){let i=this.generateCommitInfo(r);return this.dispatch(n.CREATE_GRAPH,this.connectionConfig.graphURL(t,e),i)}return Promise.reject(new Error(o.getInvalidParameterMessage(n.CREATE_GRAPH,"Create graph parameter error - you must specify a valid type (inference, instance, schema), graph id and commit message")))},u.prototype.deleteGraph=function(t,e,r){if(t&&-1!=["inference","schema","instance"].indexOf(t)&&e&&r){let i=this.generateCommitInfo(r);return this.dispatch(n.DELETE_GRAPH,this.connectionConfig.graphURL(t,e),i)}return Promise.reject(new Error(o.getInvalidParameterMessage(n.DELETE_GRAPH,"Delete graph parameter error - you must specify a valid type (inference, instance, schema), graph id and commit message")))},u.prototype.getTriples=function(t,e){return this.dispatch(n.GET_TRIPLES,this.connectionConfig.triplesURL(t,e))},u.prototype.updateTriples=function(t,e,r,i){if(i&&r&&e&&t){let o=this.generateCommitInfo(i);return o.turtle=r,this.dispatch(n.UPDATE_TRIPLES,this.connectionConfig.triplesURL(t,e),o)}return Promise.reject(new Error(o.getInvalidParameterMessage(n.UPDATE_TRIPLES,"Update triples parameter error - you must specify a valid graph id, graph type, turtle contents and commit message")))},u.prototype.getClassFrame=function(t){if(t)return opts={class:t},this.dispatch(n.CLASS_FRAME,this.connectionConfig.classFrameURL(t),opts);return Promise.reject(new Error(o.getInvalidParameterMessage(n.UPDATE_SCHEMA,"Get class frame parameter error - you must specify a valid class id (URI)")))},u.prototype.query=function(t,e){if(e=e||"Automatically Added Commit",t&&t.json&&(!t.containsUpdate()||e)){let r=t.containsUpdate()?this.generateCommitInfo(e):{};return r.query=t.json(),this.dispatch(n.WOQL_QUERY,this.connectionConfig.queryURL(),r)}let r="WOQL query parameter error";return t&&t.json&&t.containsUpdate()&&!e?r+=" - you must include a textual commit message to perform this update":r+=" - you must specify a valid WOQL Query",Promise.reject(new Error(o.getInvalidParameterMessage(n.WOQL_QUERY,r)))},u.prototype.branch=function(t,e){if(t){let r=this.ref()?{origin:`${this.account()}/${this.db()}/${this.repo()}/commit/${this.ref()}`}:{origin:`${this.account()}/${this.db()}/${this.repo()}/branch/${this.checkout()}`};return e&&(r.base_uri=e),this.dispatch(n.BRANCH,this.connectionConfig.branchURL(t),r)}return Promise.reject(new Error(o.getInvalidParameterMessage(n.BRANCH,"Branch parameter error - you must specify a valid new branch id")))},u.prototype.fetch=function(t){return this.dispatch(n.FETCH,this.connectionConfig.fetchURL(t))},u.prototype.push=function(t,e){return this.dispatch(n.PUSH,this.connectionConfig.pushURL(t,e))},u.prototype.rebase=function(t,e){return this.dispatch(n.REBASE,this.connectionConfig.rebaseURL(t,e))},u.prototype.clonedb=function(t,e){return this.dispatch(n.CLONE,this.connectionConfig.cloneURL(e),t)},u.prototype.dispatch=function(t,e,r){return e?i(e,t,r,this.key(),this.jwt()):Promise.reject(new Error(o.getInvalidParameterMessage(t,this.connectionConfig.connection_error)))},u.prototype.generateCommitInfo=function(t,e){return{commit_info:{author:e=e||this.uid(),message:t}}},t.exports=u},function(t,e,r){const n=r(14),i=r(2),o=r(11),s=r(8);t.exports=
/**
 * @file Dispatch Request
 * @license Apache Version 2
 * @description Functions for dispatching API requests via the axios library.
 * @param {String} url  API endpoint URL
 * @param {String} action API action
 * @param {Object} payload data to be transmitted to endpoint
 * @param {String} key optional basic auth string to be passed
 */
function(t,e,r,a,u=null){const c={mode:"cors",redirect:"follow",referrer:"client"};if(a){let t=function(t){try{return btoa(t)}catch(e){return Buffer.from(t).toString("base64")}}(a);c.headers={Authorization:`Basic ${t}`},u&&(c.headers.HUB_AUTHORIZATION=`Bearer ${u}`)}else u&&(c.headers={Authorization:`Bearer ${u}`});switch(e){case o.DELETE_DATABASE:case o.DELETE_GRAPH:if(r){const e=i.URIEncodePayload(r);e&&(t+=`?${e}`)}return n.delete(t,c).then(t=>t.data).catch(e=>{throw new Error(s.getAPIErrorMessage(t,c,e))});case o.WOQL_QUERY:case o.CREATE_DATABASE:case o.UPDATE_TRIPLES:case o.CREATE_GRAPH:case o.FETCH:case o.PUSH:case o.REBASE:case o.BRANCH:case o.CLONE:return c.headers=c.headers?c.headers:{},c.headers["Content-Type"]="application/json",n.post(t,r,c).then(t=>t.data).catch(e=>{const r=new Error(s.getAPIErrorMessage(t,c,e));throw e.response&&e.response.data&&(r.data=e.response.data),r});case o.GET_TRIPLES:case o.CONNECT:case o.CLASS_FRAME:default:if(r){const e=i.URIEncodePayload(r);e&&(t+=`?${e}`)}return n.get(t,c).then(t=>t.data).catch(e=>{let r=new Error(s.getAPIErrorMessage(t,c,e));throw e.response&&e.response.data&&(r.data=e.response.data),r})}}},function(t,e,r){t.exports=r(51)},function(t,e,r){"use strict";var n=r(3),i=r(15),o=r(52),s=r(26);function a(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var u=a(r(17));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=r(27),u.CancelToken=r(77),u.isCancel=r(16),u.all=function(t){return Promise.all(t)},u.spread=r(78),t.exports=u,t.exports.default=u},function(t,e,r){"use strict";var n=r(3),i=r(12),o=r(53),s=r(54),a=r(26);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},u.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}})),t.exports=u},function(t,e,r){"use strict";var n=r(3);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,r){"use strict";var n=r(3),i=r(55),o=r(16),s=r(17);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e,r){return n.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(3),i=r(18),o=r(12),s=r(20),a=r(60),u=r(61),c=r(13);t.exports=function(t){return new Promise((function(e,l){var p=t.data,h=t.headers;n.isFormData(p)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",y=t.auth.password||"";h.Authorization="Basic "+btoa(f+":"+y)}var g=s(t.baseURL,t.url);if(d.open(t.method.toUpperCase(),o(g,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:t,request:d};i(e,l,n),d=null}},d.onabort=function(){d&&(l(c("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){l(c("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),l(c(e,t,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var m=r(62),v=(t.withCredentials||u(g))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;v&&(h[t.xsrfHeaderName]=v)}if("setRequestHeader"in d&&n.forEach(h,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete h[e]:d.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),l(t),d=null)})),void 0===p&&(p=null),d.send(p)}))}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(3),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var n=r(3);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(3);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(3),i=r(18),o=r(20),s=r(12),a=r(21),u=r(22),c=r(23).http,l=r(23).https,p=r(24),h=r(75),d=r(76),f=r(13),y=r(19),g=/https:?/;t.exports=function(t){return new Promise((function(e,r){var m=function(t){e(t)},v=function(t){r(t)},w=t.data,b=t.headers;if(b["User-Agent"]||b["user-agent"]||(b["User-Agent"]="axios/"+d.version),w&&!n.isStream(w)){if(Buffer.isBuffer(w));else if(n.isArrayBuffer(w))w=Buffer.from(new Uint8Array(w));else{if(!n.isString(w))return v(f("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));w=Buffer.from(w,"utf-8")}b["Content-Length"]=w.length}var _=void 0;t.auth&&(_=(t.auth.username||"")+":"+(t.auth.password||""));var x=o(t.baseURL,t.url),q=p.parse(x),C=q.protocol||"http:";if(!_&&q.auth){var j=q.auth.split(":");_=(j[0]||"")+":"+(j[1]||"")}_&&delete b.Authorization;var P=g.test(C),O=P?t.httpsAgent:t.httpAgent,R={path:s(q.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:b,agent:O,agents:{http:t.httpAgent,https:t.httpsAgent},auth:_};t.socketPath?R.socketPath=t.socketPath:(R.hostname=q.hostname,R.port=q.port);var A,D=t.proxy;if(!D&&!1!==D){var S=C.slice(0,-1)+"_proxy",E=process.env[S]||process.env[S.toUpperCase()];if(E){var T=p.parse(E),B=process.env.no_proxy||process.env.NO_PROXY,I=!0;if(B)I=!B.split(",").map((function(t){return t.trim()})).some((function(t){return!!t&&("*"===t||("."===t[0]&&q.hostname.substr(q.hostname.length-t.length)===t||q.hostname===t))}));if(I&&(D={host:T.hostname,port:T.port},T.auth)){var N=T.auth.split(":");D.auth={username:N[0],password:N[1]}}}}if(D&&(R.hostname=D.host,R.host=D.host,R.headers.host=q.hostname+(q.port?":"+q.port:""),R.port=D.port,R.path=C+"//"+q.hostname+(q.port?":"+q.port:"")+R.path,D.auth)){var F=Buffer.from(D.auth.username+":"+D.auth.password,"utf8").toString("base64");R.headers["Proxy-Authorization"]="Basic "+F}var k=P&&(!D||g.test(D.protocol));t.transport?A=t.transport:0===t.maxRedirects?A=k?u:a:(t.maxRedirects&&(R.maxRedirects=t.maxRedirects),A=k?l:c),t.maxContentLength&&t.maxContentLength>-1&&(R.maxBodyLength=t.maxContentLength);var L=A.request(R,(function(e){if(!L.aborted){var r=e;switch(e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=204===e.statusCode?r:r.pipe(h.createUnzip()),delete e.headers["content-encoding"]}var n=e.req||L,o={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,config:t,request:n};if("stream"===t.responseType)o.data=r,i(m,v,o);else{var s=[];r.on("data",(function(e){s.push(e),t.maxContentLength>-1&&Buffer.concat(s).length>t.maxContentLength&&(r.destroy(),v(f("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,n)))})),r.on("error",(function(e){L.aborted||v(y(e,t,null,n))})),r.on("end",(function(){var e=Buffer.concat(s);"arraybuffer"!==t.responseType&&(e=e.toString(t.responseEncoding)),o.data=e,i(m,v,o)}))}}}));L.on("error",(function(e){L.aborted||v(y(e,t,null,L))})),t.timeout&&L.setTimeout(t.timeout,(function(){L.abort(),v(f("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",L))})),t.cancelToken&&t.cancelToken.promise.then((function(t){L.aborted||(L.abort(),v(t))})),n.isStream(w)?w.on("error",(function(e){v(y(e,t,null,L))})).pipe(L):L.end(w)}))}},function(t,e){t.exports=require("assert")},function(t,e){t.exports=require("stream")},function(t,e,r){"undefined"==typeof process||"renderer"===process.type?t.exports=r(67):t.exports=r(69)},function(t,e,r){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=r(25)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))})),t.splice(o,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(n())},function(t,e){var r=1e3,n=6e4,i=36e5,o=24*i;function s(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}t.exports=function(t,e){e=e||{};var a,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?s(a=t,o,"day")||s(a,i,"hour")||s(a,n,"minute")||s(a,r,"second")||a+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){var n=r(70),i=r(71);(e=t.exports=r(25)).init=function(t){t.inspectOpts={};for(var r=Object.keys(e.inspectOpts),n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function(t){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+r+" [0m";t[0]=o+t[0].split("\n").join("\n"+o),t.push(i+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=s,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var o=r(72);o&&o.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function s(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),t[r]=n,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(s())},function(t,e){t.exports=require("tty")},function(t,e){t.exports=require("util")},function(t,e,r){"use strict";const n=r(73),i=r(74),o=process.env;let s;function a(t){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function(t){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(t&&!t.isTTY&&!0!==s)return 0;const e=s?1:0;if("win32"===process.platform){const t=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in o)||"codeship"===o.CI_NAME?1:e;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const t=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,e)}(t))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),t.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(t,e){t.exports=require("os")},function(t,e,r){"use strict";t.exports=(t,e)=>{e=e||process.argv;const r=t.startsWith("-")?"":1===t.length?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return-1!==n&&(-1===i||n<i)}},function(t,e){t.exports=require("zlib")},function(t){t.exports=JSON.parse('{"_args":[["axios@0.19.2","C:\\\\Users\\\\kevin\\\\ngit\\\\terminusdb-client"]],"_from":"axios@0.19.2","_id":"axios@0.19.2","_inBundle":false,"_integrity":"sha512-fjgm5MvRHLhx+osE2xoekY70AhARk3a6hkN+3Io1jc00jtquGvxYlKlsFUhmUET0V5te6CcZI7lcv2Ym61mjHA==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.19.2","name":"axios","escapedName":"axios","rawSpec":"0.19.2","saveSpec":null,"fetchSpec":"0.19.2"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.19.2.tgz","_spec":"0.19.2","_where":"C:\\\\Users\\\\kevin\\\\ngit\\\\terminusdb-client","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"1.5.10"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"homepage":"https://github.com/axios/axios","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test && bundlesize","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","version":"0.19.2"}')},function(t,e,r){"use strict";var n=r(27);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){const n=r(5);r(2);n.prototype.using=function(t,e){return t&&"woql:args"==t?["woql:collection","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Using",t&&"string"==typeof t?(this.cursor["woql:collection"]=this.jlt(t),this.addSubQuery(e)):this.parameterError("The first parameter to using must be a Collection ID (string)"))},n.prototype.comment=function(t,e){return t&&"woql:args"==t?["woql:comment","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Comment",this.cursor["woql:comment"]=this.jlt(t),this.addSubQuery(e))},n.prototype.select=function(...t){if(t&&"woql:args"==t[0])return["woql:variable_list","woql:query"];if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Select",!t||t.length<=0)return this.parameterError("Select must be given a list of variable names");let e=t[t.length-1];if("object"==typeof e&&e.json)var r=t.pop();else r=!1;this.cursor["woql:variable_list"]=[];for(var n=0;n<t.length;n++){let e=this.varj(t[n]);e["@type"]="woql:VariableListElement",e["woql:index"]=this.jlt(n,"nonNegativeInteger"),this.cursor["woql:variable_list"].push(e)}return this.addSubQuery(r)},n.prototype.and=function(...t){if(this.cursor["@type"]&&"woql:And"!=this.cursor["@type"]){let r=(new n).json(this.cursor);for(var e in this.cursor)delete this.cursor[e];t.unshift(r)}if(t&&"woql:args"==t[0])return["woql:query_list"];this.cursor["@type"]="woql:And",void 0===this.cursor["woql:query_list"]&&(this.cursor["woql:query_list"]=[]);for(let e=0;e<t.length;e++){let n=this.cursor["woql:query_list"].length,i=this.qle(t[e],n);if("woql:And"==i["woql:query"]["@type"]&&i["woql:query"]["woql:query_list"])for(var r=0;r<i["woql:query"]["woql:query_list"].length;r++){let t=i["woql:query"]["woql:query_list"][r]["woql:query"];if(t){n=this.cursor["woql:query_list"].length;let e=this.qle(t,n);this.cursor["woql:query_list"].push(e)}}else this.cursor["woql:query_list"].push(i)}return this},n.prototype.or=function(...t){if(t&&"woql:args"==t[0])return["woql:query_list"];if(this.cursor["@type"]&&"woql:Or"!=this.cursor["@type"]){let r=(new n).json(this.cursor);for(var e in this.cursor)delete this.cursor[e];t.unshift(r)}this.cursor["@type"]="woql:Or",void 0===this.cursor["woql:query_list"]&&(this.cursor["woql:query_list"]=[]);for(let e=0;e<t.length;e++){let r=this.qle(t[e],e);this.cursor["woql:query_list"].push(r)}return this},n.prototype.from=function(t,e){return t&&"woql:args"==t?["woql:graph_filter","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:From",t&&"string"==typeof t?(this.cursor["woql:graph_filter"]=this.jlt(t),this.addSubQuery(e)):this.parameterError("The first parameter to from must be a Graph Filter Expression (string)"))},n.prototype.into=function(t,e){return t&&"woql:args"==t?["woql:graph","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Into",t&&"string"==typeof t?(this.cursor["woql:graph"]=this.jlt(t),this.addSubQuery(e)):this.parameterError("The first parameter to from must be a Graph Filter Expression (string)"))},n.prototype.triple=function(t,e,r){return t&&"woql:args"==t?["woql:subject","woql:predicate","woql:object"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Triple",this.cursor["woql:subject"]=this.cleanSubject(t),this.cursor["woql:predicate"]=this.cleanPredicate(e),this.cursor["woql:object"]=this.cleanObject(r),this)},n.prototype.quad=function(t,e,r,n){this.cursor["@type"]&&this.wrapCursorWithAnd();let i=this.triple(t,e,r);return t&&"woql:args"==t?i.concat(["woql:graph_filter"]):n?(this.cursor["@type"]="woql:Quad",this.cursor["woql:graph_filter"]=this.cleanGraph(n),this):this.parameterError("Quad takes four parameters, the last should be a graph filter")},n.prototype.sub=function(t,e){return t&&"woql:args"==t?["woql:parent","woql:child"]:t&&e?(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Subsumption",this.cursor["woql:parent"]=this.cleanClass(t),this.cursor["woql:child"]=this.cleanClass(e),this):this.parameterError("Subsumption takes two parameters, both URIs")},n.prototype.subsumption=n.prototype.sub,n.prototype.eq=function(t,e){return t&&"woql:args"==t?["woql:left","woql:right"]:void 0===t||void 0===e?this.parameterError("Equals takes two parameters"):(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Equals",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),this)},n.prototype.equals=n.prototype.eq,n.prototype.substr=function(t,e,r,n,i){return t&&"woql:args"==t?["woql:string","woql:before","woql:length","woql:after","woql:substring"]:(i||(i=n,n=0),i||(r=(i=r).length+e),t&&i&&"string"==typeof i?(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Substring",this.cursor["woql:string"]=this.cleanObject(t),this.cursor["woql:before"]=this.cleanObject(e,"xsd:nonNegativeInteger"),this.cursor["woql:length"]=this.cleanObject(r,"xsd:nonNegativeInteger"),this.cursor["woql:after"]=this.cleanObject(n,"xsd:nonNegativeInteger"),this.cursor["woql:substring"]=this.cleanObject(i),this):this.parameterError("Substr - the first and last parameters must be strings representing the full and substring variables / literals"))},n.prototype.substring=n.prototype.substr,n.prototype.update_object=function(t){return t&&"woql:args"==t?["woql:document"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:UpdateObject",this.cursor["woql:document"]=t,this.updated())},n.prototype.update=n.prototype.update_object,n.prototype.delete_object=function(t){return t&&"woql:args"==t?["woql:document"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:DeleteObject",this.cursor["woql:document_uri"]=t,this.updated())},n.prototype.delete=n.prototype.delete_object,n.prototype.read_object=function(t,e,r){return t&&"woql:args"==t?["woql:document"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:ReadObject",this.cursor["woql:document_uri"]=t,this.cursor["woql:document"]=this.expandVariable(e),this.wform(r))},n.prototype.read=n.prototype.read_object,n.prototype.get=function(t,e){return t&&"woql:args"==t?["woql:as_vars","woql:query_resource"]:(this.cursor["@type"]="woql:Get",this.cursor["woql:as_vars"]=t.json?t.json():(new n).as(...t).json(),this.cursor["woql:query_resource"]=e?this.jobj(e):{},this.cursor=this.cursor["woql:query_resource"],this)},n.prototype.put=function(t,e,r){return t&&"woql:args"==t?["woql:as_vars","woql:query","woql:query_resource"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Put",this.cursor["woql:as_vars"]=t.json?t.json():(new n).as(...t).json(),this.cursor["woql:query_resource"]=e?this.jobj(e):{},this.addSubQuery(r))},n.prototype.as=function(...t){if(t&&"woql:args"==t[0])return[["woql:indexed_as_var","woql:named_as_var"]];if(Array.isArray(this.query)||(this.query=[]),Array.isArray(t[0]))for(var e=0;e<t.length;e++){let r=t[e];if(Array.isArray(r)&&r.length>=2){let t=!!(r&&r.length>2)&&r[2],e=this.asv(r[0],r[1],t);this.query.push(e)}}else if("number"==typeof t[0]||"string"==typeof t[0]){let e=t.length>2&&t[2],r=this.asv(t[0],t[1],e);this.query.push(r)}else"object"==typeof t[0]&&this.query.push(t[0].json?t[0].json():t[0]);return this},n.prototype.file=function(t,e){return t&&"woql:args"==t?["woql:file","woql:format"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:FileResource",this.cursor["woql:file"]=t,this.wform(e))},n.prototype.remote=function(t,e){return t&&"woql:args"==t?["woql:remote_uri","woql:format"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:RemoteResource",this.cursor["woql:remote_uri"]={"@type":"xsd:anyURI","@value":t},this.wform(e))},n.prototype.post=function(t,e){return t&&"woql:args"==t?["woql:file","woql:format"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:PostResource",this.cursor["woql:file"]={"@type":"xsd:string","@value":t},this.wform(e))},n.prototype.delete_triple=function(t,e,r){this.cursor["@type"]&&this.wrapCursorWithAnd();let n=this.triple(t,e,r);return t&&"woql:args"==t?n:(this.cursor["@type"]="woql:DeleteTriple",this.updated())},n.prototype.add_triple=function(t,e,r){this.cursor["@type"]&&this.wrapCursorWithAnd();let n=this.triple(t,e,r);return t&&"woql:args"==t?n:(this.cursor["@type"]="woql:AddTriple",this.updated())},n.prototype.delete_quad=function(t,e,r,n){this.cursor["@type"]&&this.wrapCursorWithAnd();let i=this.triple(t,e,r);return t&&"woql:args"==t?i.concat(["woql:graph"]):n?(this.cursor["@type"]="woql:DeleteQuad",this.cursor["woql:graph"]=this.cleanGraph(n),this.updated()):this.parameterError("Delete Quad takes four parameters, the last should be a graph id")},n.prototype.add_quad=function(t,e,r,n){this.cursor["@type"]&&this.wrapCursorWithAnd();let i=this.triple(t,e,r);return t&&"woql:args"==t?i.concat(["woql:graph"]):n?(this.cursor["@type"]="woql:AddQuad",this.cursor["woql:graph"]=this.cleanGraph(n),this.updated()):this.parameterError("Add Quad takes four parameters, the last should be a graph id")},n.prototype.when=function(t,e){return t&&"woql:args"==t?["woql:query","woql:consequent"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:When",this.addSubQuery(t),this.cursor["woql:consequent"]=e?this.jobj(e):{},this.cursor=this.cursor["woql:consequent"],this)},n.prototype.trim=function(t,e){return t&&"woql:args"==t?["woql:untrimmed","woql:trimmed"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Trim",this.cursor["woql:untrimmed"]=this.cleanObject(t),this.cursor["woql:trimmed"]=this.cleanObject(e),this)},n.prototype.eval=function(t,e){return t&&"woql:args"==t?["woql:expression","woql:result"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Eval",this.cursor["woql:expression"]=t.json?t.json():t,this.cursor["woql:result"]=this.cleanObject(e),this)},n.prototype.plus=function(...t){return t&&"woql:args"==t[0]?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Plus",this.cursor["woql:first"]=this.arop(t.shift()),t.length>1?this.cursor["woql:second"]=this.jobj((new n).plus(...t)):this.cursor["woql:second"]=this.arop(t[0]),this)},n.prototype.minus=function(...t){return t&&"woql:args"==t[0]?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Minus",this.cursor["woql:first"]=this.arop(t.shift()),t.length>1?this.cursor["woql:second"]=this.jobj((new n).minus(...t)):this.cursor["woql:second"]=this.arop(t[0]),this)},n.prototype.times=function(...t){return t&&"woql:args"==t[0]?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Times",this.cursor["woql:first"]=this.arop(t.shift()),t.length>1?this.cursor["woql:second"]=this.jobj((new n).times(...t)):this.cursor["woql:second"]=this.arop(t[0]),this)},n.prototype.divide=function(...t){return t&&"woql:args"==t[0]?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Divide",this.cursor["woql:first"]=this.arop(t.shift()),t.length>1?this.cursor["woql:second"]=this.jobj((new n).divide(...t)):this.cursor["woql:second"]=this.arop(t[0]),this)},n.prototype.div=function(...t){return t&&"woql:args"==t[0]?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Div",this.cursor["woql:first"]=this.arop(t.shift()),t.length>1?this.cursor["woql:second"]=this.jobj((new n).div(...t)):this.cursor["woql:second"]=this.arop(t[0]),this)},n.prototype.exp=function(t,e){return t&&"woql:args"==t?["woql:first","woql:second"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Exp",this.cursor["woql:first"]=this.arop(t),this.cursor["woql:second"]=this.arop(e),this)},n.prototype.floor=function(t){return t&&"woql:args"==t?["woql:argument"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Floor",this.cursor["woql:argument"]=this.arop(t),this)},n.prototype.isa=function(t,e){return t&&"woql:args"==t?["woql:element","woql:of_type"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:IsA",this.cursor["woql:element"]=this.cleanSubject(t),this.cursor["woql:of_type"]=this.cleanClass(e),this)},n.prototype.like=function(t,e,r){return t&&"woql:args"==t?["woql:left","woql:right","woql:like_similarity"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Like",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),r&&(this.cursor["woql:like_similarity"]=this.cleanObject(r,"xsd:decimal")),this)},n.prototype.less=function(t,e){return t&&"woql:args"==t?["woql:left","woql:right"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Less",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),this)},n.prototype.greater=function(t,e){return t&&"woql:args"==t?["woql:left","woql:right"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Greater",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),this)},n.prototype.opt=function(t){return t&&"woql:args"==t?["woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Optional",this.addSubQuery(t),this)},n.prototype.optional=n.prototype.opt,n.prototype.unique=function(t,e,r){return t&&"woql:args"==t?["woql:base","woql:key_list","woql:uri"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Unique",this.cursor["woql:base"]=this.cleanObject(t),this.cursor["woql:key_list"]=this.vlist(e),this.cursor["woql:uri"]=this.cleanClass(r),this)},n.prototype.idgen=function(t,e,r){return t&&"woql:args"==t?["woql:base","woql:key_list","woql:uri"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:IDGenerator",this.cursor["woql:base"]=this.cleanObject(t),this.cursor["woql:key_list"]=this.vlist(e),this.cursor["woql:uri"]=this.cleanClass(r),this)},n.prototype.idgenerator=n.prototype.idgen,n.prototype.upper=function(t,e){return t&&"woql:args"==t?["woql:left","woql:right"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Upper",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),this)},n.prototype.lower=function(t,e){return t&&"woql:args"==t?["woql:left","woql:right"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Lower",this.cursor["woql:left"]=this.cleanObject(t),this.cursor["woql:right"]=this.cleanObject(e),this)},n.prototype.pad=function(t,e,r,n){return t&&"woql:args"==t?["woql:pad_string","woql:pad_char","woql:pad_times","woql:pad_result"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Pad",this.cursor["woql:pad_string"]=this.cleanObject(t),this.cursor["woql:pad_char"]=this.cleanObject(e),this.cursor["woql:pad_times"]=this.cleanObject(r,"xsd:integer"),this.cursor["woql:pad_result"]=this.cleanObject(n),this)},n.prototype.split=function(t,e,r){return t&&"woql:args"==t?["woql:split_string","woql:split_pattern","woql:split_list"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Split",this.cursor["woql:split_string"]=this.cleanObject(t),this.cursor["woql:split_pattern"]=this.cleanObject(e),this.cursor["woql:split_list"]=this.wlist(r),this)},n.prototype.member=function(t,e){return t&&"woql:args"==t?["woql:member","woql:member_list"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Member",this.cursor["woql:member"]=this.cleanObject(t),this.cursor["woql:member_list"]=this.wlist(e),this)},n.prototype.concat=function(t,e){if(t&&"woql:args"==t)return["woql:concat_list","woql:concatenated"];if("string"==typeof t){var r=t.split(/(v:)/),n=[];r[0]&&n.push(r[0]);for(var i=1;i<r.length;i+=2)if(r[i]&&"v:"==r[i]){var o=r[i+1].split(/([^\w_])/);let t=o.shift();n.push("v:"+t);let e=o.join("");e&&n.push(e)}t=n}return Array.isArray(t)&&(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Concatenate",this.cursor["woql:concat_list"]=this.wlist(t),this.cursor["woql:concatenated"]=this.cleanObject(e)),this},n.prototype.concatenate=n.prototype.concat,n.prototype.join=function(t,e,r){return t&&"woql:args"==t?["woql:join_list","woql:join_separator","woql:join"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Join",this.cursor["woql:join_list"]=this.wlist(t),this.cursor["woql:join_separator"]=this.cleanObject(e),this.cursor["woql:join"]=this.cleanObject(r),this)},n.prototype.sum=function(t,e){return t&&"woql:args"==t?["woql:sum_list","woql:sum"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Sum",this.cursor["woql:sum_list"]=this.wlist(t),this.cursor["woql:sum"]=this.cleanObject(e),this)},n.prototype.start=function(t,e){return t&&"woql:args"==t?["woql:start","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Start",this.cursor["woql:start"]=this.cleanObject(t,"xsd:nonNegativeInteger"),this.addSubQuery(e))},n.prototype.limit=function(t,e){return t&&"woql:args"==t?["woql:limit","woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Limit",this.cursor["woql:limit"]=this.cleanObject(t,"xsd:nonNegativeInteger"),this.addSubQuery(e))},n.prototype.re=function(t,e,r){return t&&"woql:args"==t?["woql:pattern","woql:regexp_string","woql:regexp_list"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Regexp",this.cursor["woql:pattern"]=this.cleanObject(t),this.cursor["woql:regexp_string"]=this.cleanObject(e),this.cursor["woql:regexp_list"]=this.wlist(r),this)},n.prototype.regexp=n.prototype.re,n.prototype.length=function(t,e){return t&&"woql:args"==t?["woql:length_list","woql:length"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Length",this.cursor["woql:length_list"]=this.vlist(t),"number"==typeof e?this.cursor["woql:length"]=this.cleanObject(e,"xsd:nonNegativeInteger"):"string"==typeof e&&(this.cursor["woql:length"]=this.varj(e)),this)},n.prototype.not=function(t){return t&&"woql:args"==t?["woql:query"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Not",this.addSubQuery(t))},n.prototype.cast=function(t,e,r){return t&&"woql:args"==t?["woql:typecast_value","woql:typecast_type","woql:typecast_result"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Typecast",this.cursor["woql:typecast_value"]=this.cleanObject(t),this.cursor["woql:typecast_type"]=this.cleanObject(e),this.cursor["woql:typecast_result"]=this.cleanObject(r),this)},n.prototype.typecast=n.prototype.cast,n.prototype.order_by=function(...t){if(t&&"woql:args"==t[0])return["woql:variable_ordering","woql:query"];if(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:OrderBy",this.cursor["woql:variable_ordering"]=[],!t||0===t.length)return this.parameterError("Order by must be passed at least one variables to order the query");let e=!("object"!=typeof t[t.length-1]||!t[t.length-1].json)&&t.pop();for(var r=0;r<t.length;r++)if("string"==typeof t[r]){let e={"@type":"woql:VariableOrdering","woql:index":this.jlt(r,"xsd:nonNegativeInteger")},n=t[r].split(" ");n[1]&&n[1].trim()&&"asc"==n[1].trim().toLowerCase()&&(e["woql:ascending"]=this.jlt(!0,"xsd:boolean"));let i=n[0].trim();e["woql:variable"]=this.varj(i),this.cursor["woql:variable_ordering"].push(e)}else this.cursor["woql:variable_ordering"].push(t[r]);return this.addSubQuery(e)},n.prototype.group_by=function(t,e,r,n){if(t&&"woql:args"==t)return["woql:variable_list","woql:group_var","woql:grouped","woql:query"];this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:GroupBy",this.cursor["woql:group_by"]=[],"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){let e=this.varj(t[i]);e["@type"]="woql:VariableListElement",e["woql:index"]=this.jlt(i,"nonNegativeInteger"),this.cursor["woql:group_by"].push(e)}this.cursor["woql:group_template"]=[],"string"==typeof e&&(e=[e]);for(i=0;i<e.length;i++){let t=this.varj(e[i]);t["@type"]="woql:VariableListElement",t["woql:index"]=this.jlt(i,"nonNegativeInteger"),this.cursor["woql:group_template"].push(t)}return this.cursor["woql:grouped"]=this.varj(r),this.addSubQuery(n)},n.prototype.true=function(){return this.cursor["@type"]="woql:True",this},n.prototype.path=function(t,e,r,n){return t&&"woql:args"==t?["woql:subject","woql:path_pattern","woql:object","woql:path"]:(this.cursor["@type"]&&this.wrapCursorWithAnd(),this.cursor["@type"]="woql:Path",this.cursor["woql:subject"]=this.cleanSubject(t),"string"==typeof e&&(e=this.compilePathPattern(e)),this.cursor["woql:path_pattern"]=e,this.cursor["woql:object"]=this.cleanObject(r),this.cursor["woql:path"]=this.varj(n),this)}},function(t,e,r){const n=r(5),i=r(34);function o(t,e,r,n){t&&-1==t.indexOf(":")&&(t="woql:"+t),this.type=t,this.cursor=e.cursor,this.subject=r||!1,this.query=e,this.g=n}n.prototype.star=function(t,e,r,n){return e=e||"v:Subject",r=r||"v:Predicate",n=n||"v:Object",(t=t||!1)?this.quad(e,r,n,t):this.triple(e,r,n)},n.prototype.abstract=function(t,e){return this.tripleBuilder||this.createTripleBuilder(e),this.tripleBuilder.addPO("terminus:tag","terminus:abstract",t),this},n.prototype.node=function(t,e){return this.tripleBuilder||this.createTripleBuilder(t,e),this.tripleBuilder.subject=t,this},n.prototype.property=function(t,e){if(this.tripleBuilder||this.createTripleBuilder(),this.adding_class){let o,s=this.findLastSubject(this.cursor),a=!1;s&&(o=s["woql:graph_filter"]||s["woql:graph"]),o&&(a=o["@value"]);let u=(new i).add_property(t,e,a).domain(this.adding_class),c=(new n).json(this.query);var r=(new n).and(c,u);return r.adding_class=this.adding_class,r.updated()}return t=this.cleanPredicate(t),this.tripleBuilder.addPO(t,e),this},n.prototype.insert=function(t,e,r){return e=this.cleanType(e,!0),r?this.add_quad(t,"type",e,r):this.add_triple(t,"type",e)},n.prototype.insert_data=function(t,e){if(t.type&&t.id)for(var r in type=this.cleanType(t.type,!0),this.insert(t.id,type,e),t.label&&this.label(t.label),t.description&&this.description(t.description),t)-1==["id","label","type","description"].indexOf(r)&&this.property(r,t[r]);return this},n.prototype.graph=function(t){return this.tripleBuilder||this.createTripleBuilder(),this.tripleBuilder.graph(t),this},n.prototype.domain=function(t){return this.tripleBuilder||this.createTripleBuilder(),t=this.cleanClass(t),this.tripleBuilder.addPO("rdfs:domain",t),this},n.prototype.label=function(t,e){return this.tripleBuilder||this.createTripleBuilder(),this.tripleBuilder.label(t,e),this},n.prototype.description=function(t,e){return this.tripleBuilder||this.createTripleBuilder(),this.tripleBuilder.description(t,e),this},n.prototype.parent=function(...t){this.tripleBuilder||this.createTripleBuilder();for(var e=0;e<t.length;e++){var r=this.cleanClass(t[e]);this.tripleBuilder.addPO("rdfs:subClassOf",r)}return this},n.prototype.max=function(t){return this.tripleBuilder&&this.tripleBuilder.card(t,"max"),this},n.prototype.cardinality=function(t){return this.tripleBuilder&&this.tripleBuilder.card(t,"cardinality"),this},n.prototype.min=function(t){return this.tripleBuilder&&this.tripleBuilder.card(t,"min"),this},n.prototype.createTripleBuilder=function(t,e){let r=t,i=e,s=this.findLastSubject(this.cursor),a=!1;if(s){const t=s["woql:graph_filter"]||s["woql:graph"];a=!!t&&t["@value"],r=s["woql:subject"],i=e||s["@type"]}if(this.cursor["@type"]){let t=(new n).json(this.cursor);if("woql:And"==this.cursor["@type"])var u=t;else u=(new n).and(t);let e=u.json();for(var c in this.cursor)delete this.cursor[c];for(var l in e)this.cursor[l]=e[l]}else this.and();this.tripleBuilder=new o(i,this,r,a)},o.prototype.label=function(t,e){if(e=e||"en","v:"==t.substring(0,2))var r=t;else r={"@value":t,"@type":"xsd:string","@language":e};return this.addPO("rdfs:label",r)},o.prototype.graph=function(t){this.g=t},o.prototype.description=function(t,e){if(e=e||"en","v:"==t.substring(0,2))var r=t;else r={"@value":t,"@type":"xsd:string","@language":e};return this.addPO("rdfs:comment",r)},o.prototype.addPO=function(t,e,r){r=r||this.g;let i=!1;i="woql:Triple"==this.type?(new n).triple(this.subject,t,e):"woql:AddTriple"==this.type?(new n).add_triple(this.subject,t,e):"woql:DeleteTriple"==this.type?(new n).delete_triple(this.subject,t,e):"woql:Quad"==this.type?(new n).quad(this.subject,t,e,r):"woql:AddQuad"==this.type?(new n).add_quad(this.subject,t,e,r):"woql:DeleteQuad"==this.type?(new n).delete_quad(this.subject,t,e,r):r?(new n).quad(this.subject,t,e,r):(new n).triple(this.subject,t,e),this.query.and(i)},o.prototype.getO=function(t,e){if("woql:And"==this.cursor["@type"])for(var r=0;r<this.cursor.query_list.length;r++){let n=this.cursor.query_list[r]["woql:query"];if(n.query["woql:subject"]==t&&n.query["woql:predicate"]==e)return n.query["woql:object"]}return!1},o.prototype.card=function(t,e){let r=this.subject;switch(this.subject+="_"+e,this.addPO("rdf:type","owl:Restriction"),this.addPO("owl:onProperty",r),e){case"max":this.addPO("owl:maxCardinality",{"@value":t,"@type":"xsd:nonNegativeInteger"});break;case"min":this.addPO("owl:minCardinality",{"@value":t,"@type":"xsd:nonNegativeInteger"});break;default:this.addPO("owl:cardinality",{"@value":t,"@type":"xsd:nonNegativeInteger"})}let n=this.getO(r,"rdfs:domain");if(n){var i=this.subject;this.subject=n,this.addPO("rdfs:subClassOf",i)}return this.subject=r,this}},function(t,e,r){const n=r(5);r(2);n.prototype.getLimit=function(){return this.getPagingProperty("limit")},n.prototype.setLimit=function(t){return this.setPagingProperty("limit",t)},n.prototype.isPaged=function(t){t=t||this.query;for(const e of Object.keys(t)){if("limit"==e)return!0;if(-1!==this.paging_transitive_properties.indexOf(e))return this.isPaged(t[e][t[e].length-1])}return!1},n.prototype.getPage=function(){if(this.isPaged()){var t=this.getLimit();if(this.hasStart()){var e=this.getStart();return parseInt(e/t)+1}return 1}return!1},n.prototype.setPage=function(t){var e=this.getLimit()*(t-1);return this.hasStart()?this.setStart(e):this.addStart(e),this},n.prototype.nextPage=function(){return this.setPage(this.getPage()+1)},n.prototype.firstPage=function(){return this.setPage(1)},n.prototype.previousPage=function(){const t=this.getPage()-1;return t>0&&this.setPage(t),this},n.prototype.setPageSize=function(t){return this.setPagingProperty("limit",t),this.hasStart()?this.setStart(0):this.addStart(0),this},n.prototype.hasSelect=function(){return!!this.getPagingProperty("select")},n.prototype.getSelectVariables=function(t){t=t||this.query;for(const r of Object.keys(t)){if("select"==r)return t[r].slice(0,t[r].length-1);if(-1!==this.paging_transitive_properties.indexOf(r)){var e=this.getSelectVariables(t[r][t[r].length-1]);if(void 0!==e)return e}}},n.prototype.hasStart=function(){return void 0!==this.getPagingProperty("start")},n.prototype.getStart=function(){return this.getPagingProperty("start")},n.prototype.setStart=function(t){return this.setPagingProperty("start",t)},n.prototype.addStart=function(t){if(this.hasStart())this.setStart(t);else{var e={start:[t,this.query]};this.query=e}return this},n.prototype.getPagingProperty=function(t,e){e=e||this.query;for(const n of Object.keys(e)){if(n==t)return e[n][0];if(-1!==this.paging_transitive_properties.indexOf(n)){var r=this.getPagingProperty(t,e[n][e[n].length-1]);if(void 0!==r)return r}}},n.prototype.setPagingProperty=function(t,e,r){r=r||this.query;for(const n of Object.keys(r))n==t?r[n][0]=e:-1!==this.paging_transitive_properties.indexOf(n)&&this.setPagingProperty(t,e,r[n][r[n].length-1]);return this}},function(t,e,r){const n=r(5);function i(t){this.default_schema=t||"schema/main"}i.prototype.getAllDocuments=function(){return(new n).and((new n).triple("v:Subject","type","v:Type"),(new n).sub("terminus:Document","v:Type"))},i.prototype.documentMetadata=function(t){return t=t||this.default_schema,(new n).and((new n).triple("v:ID","rdf:type","v:Class"),(new n).sub("terminus:Document","v:Class"),(new n).opt().triple("v:ID","label","v:Label"),(new n).opt().triple("v:ID","comment","v:Comment"),(new n).opt().quad("v:Class","label","v:Type",t),(new n).opt().quad("v:Class","comment","v:Type_Comment",t))},i.prototype.concreteDocumentClasses=function(t){return t=t||this.default_schema,(new n).and((new n).sub("terminus:Document","v:Class"),(new n).not().quad("v:Class","terminus:tag","terminus:abstract",t),(new n).limit(1).opt().quad("v:Class","label","v:Label",t),(new n).limit(1).opt().quad("v:Class","comment","v:Comment",t))},i.prototype.propertyMetadata=function(t){return t=t||this.default_schema,(new n).and((new n).quad("v:Property","type","v:PropertyType",t),(new n).or((new n).eq("v:PropertyType","owl:DatatypeProperty"),(new n).eq("v:PropertyType","owl:ObjectProperty")),(new n).opt().quad("v:Property","range","v:Range",t),(new n).opt().quad("v:Property","type","v:Type",t),(new n).opt().quad("v:Property","label","v:Label",t),(new n).opt().quad("v:Property","comment","v:Comment",t),(new n).opt().quad("v:Property","domain","v:Domain",t))},i.prototype.elementMetadata=function(t){return t=t||this.default_schema,(new n).select("v:Element","v:Label","v:Comment","v:Parents","v:Domain","v:Range").and((new n).quad("v:Element","type","v:Type",t),(new n).opt().quad("v:Element","terminus:tag","v:Abstract",t),(new n).opt().quad("v:Element","label","v:Label",t),(new n).opt().quad("v:Element","comment","v:Comment",t),(new n).opt().group_by("v:Element","v:Parent","v:Parents").and((new n).quad("v:Element","subClassOf","v:Parent",t)),(new n).opt().quad("v:Element","domain","v:Domain",t),(new n).opt().quad("v:Element","range","v:Range",t))},i.prototype.classList=function(t){return t=t||this.default_schema,(new n).select("v:Class","v:Name","v:Parents","v:Children","v:Description","v:Abstract").and((new n).quad("v:Class","type","owl:Class",t),(new n).limit(1).opt().quad("v:Class","label","v:Name",t),(new n).limit(1).opt().quad("v:Class","comment","v:Description",t),(new n).opt().quad("v:Class","terminus:tag","v:Abstract",t),(new n).opt().group_by("v:Class","v:Parent","v:Parents").and((new n).quad("v:Class","subClassOf","v:Parent",t),(new n).or((new n).eq("v:Parent","terminus:Document"),(new n).quad("v:Parent","type","owl:Class",t))),(new n).opt().group_by("v:Class","v:Child","v:Children").and((new n).quad("v:Child","subClassOf","v:Class",t),(new n).quad("v:Child","type","owl:Class",t)))},i.prototype.getDataOfClass=function(t){return(new n).and((new n).triple("v:Subject","type",t),(new n).opt().triple("v:Subject","v:Property","v:Value"))},i.prototype.getDataOfProperty=function(t){return(new n).and((new n).triple("v:Subject",t,"v:Value"),(new n).opt().triple("v:Subject","label","v:Label"))},i.prototype.documentProperties=function(t,e){return e=e||this.default_schema,(new n).and((new n).triple(t,"v:Property","v:Property_Value"),(new n).opt().quad("v:Property","label","v:Property_Label",e),(new n).opt().quad("v:Property","type","v:Property_Type",e))},i.prototype.getDocumentConnections=function(t,e){return e=e||this.default_schema,(new n).and((new n).eq("v:Docid",t),(new n).or((new n).triple(t,"v:Outgoing","v:Entid"),(new n).triple("v:Entid","v:Incoming",t)),(new n).triple("v:Entid","type","v:Enttype"),(new n).sub("terminus:Document","v:Enttype"),(new n).opt().triple("v:Entid","label","v:Label"),(new n).opt().quad("v:Enttype","label","v:Class_Label",e))},i.prototype.getAllDocumentConnections=function(){return(new n).and((new n).sub("terminus:Document","v:Enttype"),(new n).triple("v:doc1","type","v:Enttype"),(new n).triple("v:doc1","v:Predicate","v:doc2"),(new n).triple("v:doc2","type","v:Enttype2"),(new n).sub("terminus:Document","v:Enttype2"),(new n).opt().triple("v:doc1","label","v:Label1"),(new n).opt().triple("v:doc2","label","v:Label2"),(new n).not().eq("v:doc1","v:doc2"))},i.prototype.getInstanceMeta=function(t,e){return e=e||this.default_schema,(new n).and((new n).triple(t,"type","v:InstanceType"),(new n).opt().triple(t,"label","v:InstanceLabel"),(new n).opt().triple(t,"comment","v:InstanceComment"),(new n).opt().quad("v:InstanceType","label","v:ClassLabel",e))},i.prototype.simpleGraphQuery=function(t){return t=t||this.default_schema,(new n).and((new n).triple("v:Source","v:Edge","v:Target"),(new n).isa("v:Source","v:Source_Class"),(new n).sub("terminus:Document","v:Source_Class"),(new n).isa("v:Target","v:Target_Class"),(new n).sub("terminus:Document","v:Target_Class"),(new n).opt().triple("v:Source","label","v:Source_Label"),(new n).opt().triple("v:Source","comment","v:Source_Comment"),(new n).opt().quad("v:Source_Class","label","v:Source_Type",t),(new n).opt().quad("v:Source_Class","comment","v:Source_Type_Comment",t),(new n).opt().triple("v:Target","label","v:Target_Label"),(new n).opt().triple("v:Target","comment","v:Target_Comment"),(new n).opt().quad("v:Target_Class","label","v:Target_Type",t),(new n).opt().quad("v:Target_Class","comment","v:Target_Type_Comment",t),(new n).opt().quad("v:Edge","label","v:Edge_Type",t),(new n).opt().quad("v:Edge","comment","v:Edge_Type_Comment",t))},i.prototype.getCapabilities=function(t,e){let r=[];return t&&r.push((new n).idgen("doc:User",[t],"v:UID")),e&&r.push((new n).idgen("doc:",[e],"v:DBID")),r=r.concat([(new n).triple("v:UID","terminus:authority","v:CapID"),(new n).triple("v:CapID","terminus:authority_scope","v:DBID"),(new n).triple("v:CapID","terminus:action","v:Action")]),(new n).and(...r)},i.prototype.createDatabase=function(t,e,r){let i=(new n).idgen("doc:",[t],"v:DBID"),o=[(new n).add_triple("v:DBID","type","terminus:Database"),(new n).add_triple("v:DBID","label",e)];return r&&o.push((new n).add_triple("v:DBID","comment",r)),(new n).when(i).and(...o)},i.prototype.createCapability=function(t,e,r,i){r=r||"doc:",i=i||"v:Capability";let o="v:DB"+(-1==t.indexOf(":")?t:t.split(":")[1]),s=[t].concat(e.sort()),a=[(new n).unique(r+"Capability",s,i),(new n).idgen(r,[t],o),(new n).not().triple(i,"type","terminus:DatabaseCapability")],u=[(new n).add_triple(i,"type","terminus:DatabaseCapability"),(new n).add_triple(i,"terminus:authority_scope",o)];for(var c=0;c<e.length;c++)u.push((new n).add_triple(i,"terminus:action",e[c]));return(new n).when((new n).and(...a)).and(...u)},i.prototype.getBranchGraphNames=function(t){return(new n).and((new n).triple("v:Branch","ref:branch_name",t),(new n).triple("v:Branch","ref:ref_commit","v:Head"),(new n).triple("v:Head","ref:commit_id","v:HeadCommit"),(new n).opt().and((new n).triple("v:Head","ref:instance","v:InstanceGraph"),(new n).triple("v:InstanceGraph","ref:graph_name","v:InstanceName")),(new n).opt().and((new n).triple("v:Head","ref:schema","v:SchemaGraph"),(new n).triple("v:SchemaGraph","ref:graph_name","v:SchemaName")),(new n).opt().and((new n).triple("v:Head","ref:inference","v:InferenceGraph"),(new n).triple("v:InferenceGraph","ref:graph_name","v:InferenceName")))},i.prototype.loadBranchGraphNames=function(t){let e=`${t.account()}/${t.db()}/${t.repo()}/_commits`;return(new n).using(e,this.getBranchGraphNames(t.checkout()))},i.prototype.getBranchNames=function(){return(new n).select("v:BranchName").triple("v:Branch","ref:branch_name","v:BranchName")},i.prototype.loadBranchNames=function(t){let e=`${t.account()}/${t.db()}/${t.repo()}/_commits`;return(new n).using(e,this.getBranchNames())},i.prototype.getCommitDetails=function(t,e){return e=e||"v:Commit",(new n).and((new n).triple(e,"ref:commit_id",t),(new n).triple(e,"ref:commit_timestamp","v:Time"),(new n).opt().and((new n).triple(e,"ref:commit_parent","v:ParentID"),(new n).triple("v:ParentID","ref:commit_id","v:Parent")),(new n).opt().and((new n).triple("v:ChildID","ref:commit_parent",e),(new n).triple("v:ChildID","ref:commit_id","v:Child")),(new n).opt().and((new n).triple("v:Branch","ref:branch_name","v:BranchName"),(new n).triple("v:Branch","ref:ref_commit",e)),(new n).opt().triple(e,"ref:commit_author","v:Author"),(new n).opt().triple(e,"ref:commit_message","v:Message"))},i.prototype.loadCommitDetails=function(t,e){let r=`${t.account()}/${t.db()}/${t.repo()}/_commits`;return(new n).using(r,this.getCommitDetails(e))},i.prototype.getCommitBefore=function(t,e){return(new n).limit(1).and((new n).triple("v:Branch","ref:branch_name",t),(new n).triple("v:Branch","ref:ref_commit","v:Head"),(new n).triple("v:Head","ref:commit_id","v:HeadID"),(new n).triple("v:Head","ref:commit_timestamp","v:HeadTime"),(new n).or((new n).and((new n).less("v:HeadTime",e),(new n).eq("v:CommitID","v:HeadID")),(new n).limit(1).and((new n).path("v:Head","ref:commit_parent+","v:Tail","v:Path"),(new n).triple("v:Tail","ref:commit_id","v:TailID"),(new n).triple("v:Tail","ref:commit_timestamp","v:TailTime"),(new n).less("v:TailTime",e),(new n).eq("v:CommitID","v:TailID"))),this.getCommitDetails("v:CommitID"))},i.prototype.loadCommitBefore=function(t,e){let r=`${t.account()}/${t.db()}/${t.repo()}/_commits`;return(new n).using(r,this.getCommitBefore(t.checkout(),e))},i.prototype.getBranchLimits=function(t){return(new n).and((new n).triple("v:Branch","ref:branch_name",t),(new n).triple("v:Branch","ref:branch_base_uri","v:Base_URI"),(new n).opt().triple("v:Branch","ref:ref_commit","v:Head"),(new n).opt().triple("v:Head","ref:commit_id","v:HeadID"),(new n).opt().triple("v:Head","ref:commit_timestamp","v:Last"),(new n).opt().and((new n).path("v:Head","ref:commit_parent+","v:Tail","v:Path"),(new n).not().triple("v:Tail","ref:commit_parent","v:Any"),(new n).triple("v:Tail","ref:commit_id","v:TailID"),(new n).triple("v:Tail","ref:commit_timestamp","v:First")))},i.prototype.loadBranchLimits=function(t){let e=`${t.account()}/${t.db()}/${t.repo()}/_commits`;return(new n).using(e,this.getBranchLimits(t.checkout()))},t.exports=i},function(t,e,r){const n=r(36),i=r(38),o=r(40),s=r(42),a=r(44),u=r(46),c=r(6),l=r(9),p={table:function(){return new n},chart:function(){return new s},graph:function(){return new o},chooser:function(){return new i},stream:function(){return new a},document:function(){return new u},loadConfig:function(t){if(t.table)(e=new n).loadJSON(t.table,t.rules);else if(t.chooser){(e=new i).loadJSON(t.chooser,t.rules)}else if(t.graph){(e=new o).loadJSON(t.graph,t.rules)}else if(t.chart){(e=new s).loadJSON(t.chart,t.rules)}else if(t.stream){(e=new a).loadJSON(t.stream,t.rules)}else if(t.frame){var e;(e=new u).loadJSON(t.frame,t.rules)}return e},rule:function(t){return t&&"frame"==t?new l:new c},pattern:function(t){return t&&"woql"==t?(new c).pattern:(new l).pattern},matchRow:function(t,e,r,n){return(new c).matchRow(t,e,r,n)},matchColumn:function(t,e,r){return(new c).matchColumn(t,e,r)},matchCell:function(t,e,r,n,i){return(new c).matchCell(t,e,r,n,i)},matchNode:function(t,e,r,n,i){return(new c).matchNode(t,e,r,n,i)},matchEdge:function(t,e,r,n,i){return(new c).matchPair(t,e,r,n,i)},matchFrame:function(t,e,r){return(new l).testRules(t,e,r)}};t.exports=p},function(t,e,r){const n=r(2),i=r(9);
/**
 * @file Javascript Terminus Document Classes
 * @license Apache Version 2
 * Helper classes for accessing documents returned by the Terminus DB API programmatically
 * 
 * @example
 * let doc = new TerminusDocument(client);
 * 
 * //These set the objects document property and return promises:
 *  
 * doc.loadDocument(URL).then(() => console.log(this.document));
 * doc.loadComplete(URL, CLS).then(() => console.log(this.document))
 * doc.loadSchema(cls).then(() => console.log(this.document))
 * 
 * //These just set the object's document property 
 * doc.loadJSON(json_frames, cls) //console.log(this.document)
 * doc.loadDataFrames(json_frames, cls)
 * doc.loadClassFrames(json_frames, cls)
 * @example 
 *
 * @description Represents a frame for programmatic access to object frame, anywhere within a document
 * Recursive data structure where this.children contains an indexed array of object frames
 * and this.dataframes contains a property indexed array of data frames
 * Every object frame carries a reference to its classframe
 * This gives us instructions as to how to create new frames according to the schema
 * After that it's turtles all the way down.
 * @param cls - ID of the class (URL)
 * @param classframe - an array of frames representing a class
 * @param archetypes list of class frames
 * @param parent parent object
 * @returns
 */
function o(t,e,r,n,i){this.empty(),this.cls=t,r&&"object"==typeof r&&this.loadClassFrames(r),e&&"object"==typeof e?(this.originalFrames=e,this.loadDataFrames(e)):this.originalFrames=!1,this.parent=n,this.parentframe=i,this.newDoc=!1}function s(t,e,r){this.predicate=t,this.cframe=e,this.parent=r,this.values=[]}function a(t,e,r){this.err=!1,this.parent=e,this.subjid=!!e&&e.subjid,this.index=r,t&&this.load(t)}function u(t,e){this.err=!1,this.parent=e,this.subjid=!!e&&e.subjid,t&&this.load(t)}function c(t){this.min=0,this.max=0,t&&this.loadRestriction(t)}o.prototype.loadClassFrames=function(t){for(let e=0;e<t.length;e+=1){t[e]["@context"]&&(this.jsonld_context=t[e]["@context"]);const r=new u(t[e]);if(r.isValid()&&(this.classframes||(this.classframes={}),void 0===this.classframes[t[e].property]&&(this.classframes[t[e].property]=[]),this.classframes[t[e].property]=r,r.isObject()&&this.properties[t[e].property]))for(let r=0;r<this.properties[t[e].property].values.length;r+=1)this.properties[t[e].property].values[r].loadClassFrames(t[e].frame)}return this},o.prototype.hasSchema=function(){return!n.empty(this.classframes)},o.prototype.loadDataFrames=function(t){if("object"==typeof t&&t.length){this.originalFrames||(this.originalFrames=t),!this.subjid&&t[0].domainValue&&(this.subjid=t[0].domainValue);for(let e=0;e<t.length;e+=1){t[e]["@context"]&&(this.jsonld_context=t[e]["@context"]);let r=this.getPropertyClassFrame(t[e].property,t[e]);r&&r.isClassChoice()?(r=r.getChosenClassFrame(t[e].range),r||console.log(`no choice frame ${t[e].range}`)):r&&r.isLogic()&&(r=r.getChosenFrame(t[e])),r&&(void 0===this.properties[t[e].property]&&(this.properties[t[e].property]=new s(t[e].property,r,this)),this.properties[t[e].property].addFrame(t[e]))}return this}},o.prototype.getAsFrame=function(t,e){if(this.parentframe)return this.parentframe;const r={type:"objectProperty",property:t};r.range=this.cls,r.domain=e.cls,r.domainValue=e.subjid,r.frame=[];for(const t of Object.keys(this.properties))r.frame=r.frame.concat(r.frame,this.properties[t].getAsFrames());return r},o.prototype.getAsFrames=function(t,e){var r=[];for(const t of Object.keys(this.properties))r=r.concat(r,this.properties[t].getAsFrames());return r},o.prototype.empty=function(){this.properties={},this.restrictions={},this.subjid=!1,this.cls=!1},o.prototype.reset=function(t){if(t){const e=[];for(let r=0;r<this.originalFrames.length;r+=1)this.originalFrames[r].property===t&&e.push(this.originalFrames[r]);this.properties[t]&&(this.properties[t]=[]),this.loadDataFrames(e)}else this.restrictions={},this.properties={},this.loadDataFrames(this.originalFrames)},o.prototype.clear=function(){for(const t of Object.keys(this.properties))this.properties[t].clear();return this},o.prototype.filter=function(t,e){(new i).testRules(t,this,e);for(const r of Object.keys(this.properties))this.properties[r].filter(t,e);return this},o.prototype.getPropertyClassFrame=function(t,e){if(this.classframes&&"object"==typeof this.classframes&&"object"==typeof this.classframes[t])return this.classframes[t];if(e){return new u(e)}return!!this.properties[t]&&new u(this.properties[t].values[0])},o.prototype.getProperties=function(t){if("filled"==t||!this.classframes)return Object.keys(this.properties);if("missing"==t){const t=Object.keys(this.properties),e=Object.keys(this.classframes),r=[];for(let n=0;n<e.length;n++)-1==t.indexOf(e[n])&&-1==r.indexOf(e[n])&&r.push(e[n]);return r}return Object.keys(this.classframes)},o.prototype.getMissingPropertyList=function(){var t=this.getProperties("missing");const e=[];for(let n=0;n<t.length;n++){const i=this.getPropertyClassFrame(t[n]);if(i)var r={label:i.getLabel(),value:t[n]};else r={label:t[n],value:t[n]};e.push(r)}return e},o.prototype.getFilledPropertyList=function(){var t=this.getProperties("filled");const e=[];for(let n=0;n<t.length;n++){const i=this.getPropertyClassFrame(t[n]);if(i)var r={label:i.getLabel(),value:t[n]};else r={label:t[n],value:t[n]};e.push(r)}return e},o.prototype.fillFromSchema=function(t){t&&(this.subjid=t),t=t||n.genBNID();const e={};if(this.classframes)for(const r of Object.keys(this.classframes)){const n=this.getPropertyClassFrame(r);e[r]=new s(r,n,this),e[r].fillFromSchema(t)}this.properties=e,this.originalFrames=[];for(const t of Object.keys(this.properties))this.originalFrames.push(this.properties[t].getAsFrames());return this},o.prototype.clone=function(t){const e={},r=new o(this.cls,!1,!1,this.parent);r.classframes=this.classframes,r.subjid=t;for(const t of Object.keys(this.properties))e[t]=this.properties[t].clone();return r.properties=e,r},o.prototype.getChild=function(t,e){let r=this.getProperty(e);for(let e=0;e<r.values.length;r++)if(r.values[e].isObject()&&r.values[e].subject===t)return r.values[e];if(!e)for(const e of Object.keys(this.properties))for(let r=0;r<this.properties[e].values.length;r+=1)if(this.properties[e].values[r].subject()===t)return this.properties[e].values[r];return!1},o.prototype.addProperty=function(t,e){const r=this.getPropertyClassFrame(t);var i=!1;if(r){const o=new s(t,r,this);if(r.isObject()){r.isClassChoice()||(i=r.createEmpty(n.genBNID())),e&&(i=r.createEmptyChoice(e,n.genBNID()));const t=r.getClassChoices();t&&t.length&&(i=r.createEmptyChoice(t[0],n.genBNID()))}else i=r.createEmpty();return i&&o.addValueFrame(i),void 0===this.properties[t]&&(this.properties[t]=[]),this.properties[t].push(o),o}return!1},o.prototype.addPropertyValue=function(t,e){return this.properties[t].addValue(e)},o.prototype.removeProperty=function(t){void 0!==this.properties[t]&&delete this.properties[t]},o.prototype.removePropertyValue=function(t,e,r){const n=this.properties[t];n.removeValue(e,r),0==n.values.length&&this.removeProperty(t)},o.prototype.error=function(t){console.error(t)},o.prototype.extract=function(){var t={};for(var e in this.properties)for(var r=0;r<this.properties[e].length;r++){var i=this.properties[e][r].extract();n.empty(i)||(void 0===t[e]&&(t[e]=[]),t[e]=t[e].concat(i))}return(!n.empty(t)||!this.parent)&&this.extractJSONLD(t)},o.prototype.extractJSONLD=function(t){return t["@type"]=this.cls,"_:"!=this.subject()&&(t["@id"]=this.subject()),this.jsonld_context&&(t["@context"]=this.jsonld_context),t},o.prototype.subject=function(){return this.subjid},o.prototype.get=o.prototype.subject,o.prototype.set=function(t){this.subjid=t},o.prototype.isObject=function(){return!0},o.prototype.isProperty=function(){return!1},o.prototype.isData=function(){return!1},o.prototype.subjectClass=function(){return this.cls},o.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},o.prototype.getProperty=function(t){return this.properties[t]},o.prototype.first=function(t){if(this.properties&&this.properties[t])return this.properties[t].first()},o.prototype.property=function(t){return!!this.parent&&this.parent.property()},o.prototype.parentObject=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent},o.prototype.root=function(){return!this.parent},o.prototype.renderProperties=function(){const t=this.sortProperties(),e=[];for(let r=0;r<t.length;r++)if(this.properties[t[r]].render){const n=this.properties[t[r]].render(this.properties[t[r]]);n&&e.push(n)}return e},o.prototype.sortProperties=function(){const t=Object.keys(this.properties);return this.compare?t.sort((t,e)=>this.compare(t,e,this)):t.sort((t,e)=>this.standardCompare(t,e,this))},o.prototype.standardCompare=function(t,e,r){return"rdfs:label"==t?-1:"rdfs:label"==e?1:"rdfs:comment"==t?-1:"rdfs:comment"==e?1:r.properties[t].isData()&&r.properties[e].isObject()?-1:r.properties[e].isData()&&r.properties[t].isObject()?1:0},o.prototype.cardControlAllows=function(t){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var e=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==t||"clone"==t)&&e.max&&r>=e.max)return!1;if("delete"==t&&e.min&&r<=e.min)return!1}return!0},o.prototype.isUpdated=function(){var t=0;for(var e in this.properties){if(this.originalFrames[t]!=e)return!0;if(this.properties[e].isUpdated())return!0;t++}return t!=this.originalFrames.length},o.prototype.isNew=function(){return"_:"==this.subject().substring(0,2)},o.prototype.getSummary=function(){var t={status:"ok"};for(var e in this.isUpdated()&&(t.status="updated"),this.isNew()&&(t.status="new"),t.propcount=0,this.properties)t.propcount++;return t.long=t.propcount+" properties",t},s.prototype.addFrame=function(t){if(this.cframe.isData()){var e=new a(t,this,this.values.length);this.values.push(e)}else{const e=new o(this.range(),this.cframe.frame,t.frame,this,t);this.values.push(e)}},s.prototype.addValueFrame=function(t){t.parent=this,t.index=this.values.length,this.values.push(t)},s.prototype.fillFromSchema=function(t){if(this.isData()||this.isObject()&&!this.isClassChoice()){var e=[];if(this.cframe.hasRestriction()&&this.cframe.restriction.min)for(let n=0;n<this.cframe.restriction.min;n+=1){var r;(r=this.createEmpty(t)).parent=this,e.push(r)}else(r=this.createEmpty(t)).parent=this,e.push(r);this.values=e}else if(this.isClassChoice()){const t=this.cframe.getClassChoices();if(t&&t.length){const e=this.cframe.createEmptyChoice(t[0],n.genBNID());e.parent=this,this.values=[e]}}},s.prototype.isData=function(){return this.cframe.isData()},s.prototype.isObject=function(){return this.cframe.isObject()},s.prototype.isProperty=function(){return!0},s.prototype.property=function(){return this.predicate},s.prototype.extract=function(){const t=[];for(let e=0;e<this.values.length;e++){const r=this.values[e].extract();""!==r&&!1!==r&&void 0!==r&&t.push(r)}return t},s.prototype.subject=function(){return!!this.parent&&this.parent.subject()},s.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},s.prototype.depth=function(){return!!this.parent&&this.parent.depth()},s.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},s.prototype.range=function(){return this.cframe?this.cframe.range:""},s.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},s.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},s.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},s.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},s.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},s.prototype.deletePropertyValue=function(t,e){this.parent.removePropertyValue(this.property(),t,e)},s.prototype.get=function(){for(var t=[],e=0;e<this.values.length;e++)if(this.values[e]){var r=this.values[e].get();r&&t.push(r)}return t},s.prototype.set=function(t){for(var e=0;e<this.values.length;e++)this.values[e]&&this.values[e].set(t)},s.prototype.clear=function(){for(var t=0;t<this.values.length;t++)this.values[t].clear()},s.prototype.clone=function(){const t=[],e=new s(this.predicate,this.cframe,this.parent);for(var r=0;r<this.values.length;r++)t.push(this.values[r].clone());return e.values=t,e},s.prototype.getAsFrames=function(){for(var t=[],e=0;e<this.values.length;e++)this.values[e]&&(this.isData()?t.push(this.values[e].getAsFrame()):t=t.concat(this.values[e].getAsFrames()));return t},s.prototype.createEmpty=function(){if(this.cframe.isData()){const t=this.cframe.copy();return t.set(""),t}if(this.cframe.isObject()){if(!this.cframe.isClassChoice()){return this.cframe.createEmpty(n.genBNID())}const t=this.cframe.getClassChoices();if(t&&t.length){return this.cframe.createEmptyChoice(t[0],n.genBNID())}}},s.prototype.filter=function(t,e){(new i).testRules(t,this,e);for(var r=0;r<this.values.length;r++)this.values[r].filter(t,e);return this},s.prototype.first=function(){if(this.values&&this.values[0])return this.values[0].get()},s.prototype.renderValues=function(){for(var t=this.sortValues(),e=[],r=0;r<t.length;r++)if(t[r]&&t[r].render){var n=t[r].render(t[r]);n&&e.push(n)}return e},s.prototype.sortValues=function(){return this.compare?this.values.sort((t,e)=>this.compare(t,e,this)):this.values},s.prototype.cardControlAllows=function(t){if(this.cframe.hasRestriction()){var e=this.cframe.restriction,r=this.values.length;if(("add"==t||"clone"==t)&&e.max&&r>=e.max)return!1;if("delete"==t&&e.min)return!1}return!0},s.prototype.isUpdated=function(){return!0},a.prototype.load=function(t){if("object"!=typeof t)return void this.error("No frame passed to load");this.type=t.type,this.predicate=t.property,this.range=t.range,this.rangeValue=t.rangeValue,this.domain=t.domain,this.domainValue=t.domainValue,this.frame=t.frame,this.label=t.label,this.comment=t.comment;const{restriction:e}=t;this.restriction=!1,e&&"object"==typeof e&&(this.restriction=new c(e))},a.prototype.filter=function(t,e){(new i).testRules(t,this,e);return this},a.prototype.delete=function(){this.parent.deletePropertyValue(this.get(),this.index)},a.prototype.save=function(){this.parent&&this.parent.save()},a.prototype.reset=function(){this.set(this.originalValue)},a.prototype.clone=function(){const t=this.parent.addPropertyValue(this.get()),e=this.copy(t);e.setNew(),e.mode="edit",e.index=this.parent.values.length,this.parent.values.push(e)},a.prototype.depth=function(){return!!this.parent&&this.parent.depth()},a.prototype.property=function(){return!!this.parent&&this.parent.property()},a.prototype.subject=function(){return!!this.parent&&this.parent.subject()},a.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},a.prototype.type=function(){return!!this.range&&this.range},a.prototype.isValidType=function(t){return-1!==["datatypeProperty","objectProperty","restriction "].indexOf(t)},a.prototype.getAsFrame=function(){const t={type:this.type,property:this.property()};return this.range&&(t.range=this.range),this.rangeValue&&(t.rangeValue=this.rangeValue),this.domain&&(t.domain=this.domain),this.domainValue&&(t.domainValue=this.domainValue),this.frame&&(t.frame=this.frame),this.label&&(t.label=this.label),this.comment&&(t.comment=this.comment),t},a.prototype.hasRestriction=function(){return!!this.restriction&&this.restriction.hasCardRestriction()},a.prototype.copy=function(t){const e=new a(this,this.parent);return t&&(e.domainValue=t),e},a.prototype.getLabel=function(){let t="";return"rdfs:label"==this.predicate?"Name":"rdfs:comment"==this.predicate?"Description":(this.label&&"object"==typeof this.label&&(t=this.label["@value"]),this.label&&"string"==typeof this.label&&(t=this.label),!t&&this.property()&&(t=n.labelFromURL(this.property())),t||(t=n.labelFromURL(this.cls)),t)},a.prototype.getType=function(){return this.range?this.range:!(!this.rangeValue||!this.rangeValue.type)&&this.rangeValue.type},o.prototype.getLabel=a.prototype.getLabel,a.prototype.getComment=function(){let t="";return this.comment&&"object"==typeof this.comment&&(t=this.comment["@value"]),this.comment&&"string"==typeof this.comment&&(t=this.comment),t},o.prototype.getComment=a.prototype.getComment,a.prototype.error=function(t){return t&&(this.err=t),this.err},a.prototype.isValid=function(){return this.type&&this.isValidType(this.type)?this.predicate?this.domain?this.range?!(this.isObjectProperty()&&(!this.frame||"object"!=typeof this.frame))||(this.error("Missing Object Frame"),!1):(this.error("Missing Frame Range"),!1):(this.error("Missing Frame Domain"),!1):(this.error("Missing Frame Property"),!1):(this.error(`Missing or Illegal Frame Type ${this.type}`),!1)},a.prototype.isObjectProperty=function(){return"objectProperty"===this.type},a.prototype.isDatatypeProperty=function(){return"datatypeProperty"===this.type},a.prototype.isLogic=function(){return"and"===this.type||"or"===this.type||"xor"===this.type},a.prototype.isRestriction=function(){return"restriction"===this.type},a.prototype.ftype=function(){return this.isDocument()?"document":this.isDatatypeProperty()?"data":this.isChoice()?"oneOf":this.isObject()?"object":this.isLogic()?"logic":this.isClassChoice()?"class_choice":void 0},a.prototype.isClassChoice=function(){return this.frame&&"class_choice"===this.frame.type},a.prototype.isString=function(){return this.range===n.getStdURL("xsd","string")},a.prototype.getChoiceOptions=function(){const t=[];for(let e=0;e<this.frame.elements.length;e+=1){const r={};this.frame.elements[e].label?r.label=this.frame.elements[e].label["@value"]:r.label=n.labelFromURL(this.frame.elements[e].class),r.value=this.frame.elements[e].class,t.push(r)}return t},a.prototype.lang=function(){return"en"},a.prototype.isChoice=function(){return this.frame&&"oneOf"===this.frame.type},a.prototype.isDocument=function(){return this.frame&&"document"===this.frame.type},a.prototype.isData=function(){return this.isDocument()||this.isChoice()||this.isDatatypeProperty()},a.prototype.isObject=function(){return this.isObjectProperty()&&this.frame&&!(this.isChoice()||this.isDocument())},a.prototype.isProperty=function(){return!1},a.prototype.getTypeShorthand=function(){if(this.isDocument())return"document";if(this.isChoice())return"choice";return n.getShorthand(this.getType())||this.getType()},a.prototype.get=function(){return this.contents?this.contents:this.isDatatypeProperty()&&this.rangeValue&&void 0!==this.rangeValue["@value"]?this.rangeValue["@value"]:this.isChoice()||this.isDocument()?this.frame.domainValue:""},a.prototype.set=function(t,e){e&&(t=e(t,this)),this.contents=t,(this.isChoice()||this.isDocument())&&(this.frame.domainValue=t),this.isDatatypeProperty()&&this.rangeValue&&(this.rangeValue["@value"]=t)},a.prototype.clear=function(){(this.isDocument()||this.isChoice()||this.isDatatypeProperty())&&this.set("")},a.prototype.cardControlAllows=function(t){if(this.parent.cframe.hasRestriction()){var e=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==t||"clone"==t)&&e.max&&r>=e.max)return!1;if("delete"==t&&e.min&&r<=e.min)return!1}return!0},a.prototype.extract=function(){var t=this.get();if(""!==t&&!1!==t){if(this.isDatatypeProperty()){var e={"@value":this.get()};return this.isString()?e["@language"]=this.lang():e["@type"]=this.getType(),e}if(this.isChoice()||this.isDocument())return{"@id":t}}return t},u.prototype=a.prototype,u.prototype.loadFromObjectFrame=function(t,e){this.type="objectProperty",this.predicate=t.property,this.range=t.range,this.rangeValue=e.subjid,this.domain=t.cls,this.domainValue=t.subjid,this.label=t.getLabel(),this.comment=t.getComment(),this.restriction=t.restriction},u.prototype.createEmptyChoice=function(t,e){const r=this.getChosenClassFrames(t),n=new o(t);return e&&(n.subjid=e),n.loadClassFrames(r),n.fillFromSchema()},u.prototype.getChosenClassFrames=function(t){let e=[];for(let r=0;r<this.frame.operands.length;r+=1)for(let n=0;n<this.frame.operands[r].length;n+=1)t===this.frame.operands[r][n].domain&&(e=e.concat(this.frame.operands[r][n]));return e},u.prototype.createEmpty=function(t){if(this.isObject()){const e=new o(this.range);return t&&(e.subjid=t),e.loadClassFrames(this.frame),e.fillFromSchema()}if(this.isData()){const t=this.copy();return t.set(""),t}},u.prototype.cloneDataFrame=function(t,e){return e},u.prototype.clone=function(t,e){if(this.isObject())console.log("cannot clone class frame");else if(this.isData())return this.cloneDataFrame(t,e)},u.prototype.getClassChoices=function(){const t=[];if(this.frame.operands)for(let e=0;e<this.frame.operands.length;e+=1)for(let r=0;r<this.frame.operands[e].length;r+=1){const n=this.frame.operands[e][r].domain;n&&-1===t.indexOf(n)&&t.push(n)}return t},u.prototype.getChosenClassFrame=function(t){for(let e=0;e<this.frame.operands.length;e+=1){const r=this.frame.operands[e];if(r.length){for(let e=0;e<r.length;e+=1)if(r[e]&&t===r[e].domain){return new u(r)}}else if(r.range&&t===r.range){return new u(r)}}return!1},u.prototype.getChosenFrame=function(t){return t},c.prototype.hasCardRestriction=function(){return 0!==this.min||0!==this.max},c.prototype.loadRestriction=function(t){if(void 0!==t.cardinality)this.max=t.cardinality,this.min=t.cardinality;else if(void 0!==t.maxCardinality)this.max=t.maxCardinality;else if(void 0!==t.minCardinality)this.min=t.minCardinality;else if(void 0!==t.type&&"and"===t.type&&"object"==typeof t.operands)for(let e=0;e<t.operands.length;e+=1){const r=new c(t.operands[e]);0===this.max&&r.max>0?this.max=r.max:this.max>0&&r.max>0&&r.max<this.max&&(this.max=r.max),0===this.min&&r.min>0?this.min=r.min:this.min>0&&r.min>0&&r.min>this.min&&(this.min=r.min)}},t.exports=o},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),o=r(10),s=r.n(o);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}var c={init:"init"},l={Cell:function(t){var e=t.cell.value;return void 0===e?"":e},width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function p(t,e,r){return[].concat(t).sort((function(t,n){for(var i=0;i<e.length;i+=1){var o=e[i],s=!1===r[i]||"desc"===r[i],a=o(t,n);if(0!==a)return s?-a:a}return r[0]?t.index-n.index:n.index-t.index}))}function h(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce((function(t,e){var r=e.style,n=e.className;return t=a({},t,{},u(e,["style","className"])),r&&(t.style=t.style?a({},t.style||{},{},r||{}):r),n&&(t.className=t.className?t.className+" "+n:n),""===t.className&&delete t.className,t}),{})}var d=function(t,e){return void 0===e&&(e={}),function(r){return void 0===r&&(r={}),[].concat(t,[r]).reduce((function(t,n){return function t(e,r,n){return"function"==typeof r?t({},r(e,n)):Array.isArray(r)?h.apply(void 0,[e].concat(r)):h(e,r)}(t,n,a({},e,{userProps:r}))}),{})}},f=function(t,e,r){return void 0===r&&(r={}),t.reduce((function(t,e){return e(t,r)}),e)},y=function(t,e){return void 0===e&&(e={}),t.forEach((function(t){t(e)}))};function g(t,e,r,n){t.findIndex((function(t){return t.pluginName===r}));e.forEach((function(e){t.findIndex((function(t){return t.pluginName===e}))})),n.forEach((function(e){t.findIndex((function(t){return t.pluginName===e}))}))}function m(t,e){return"function"==typeof t?t(e):t}function v(t){var e=i.a.useRef();return e.current=t,i.a.useCallback((function(){return e.current}),[])}var w="undefined"!=typeof document?i.a.useLayoutEffect:i.a.useEffect;function b(t,e){var r=i.a.useRef(!1);w((function(){r.current&&t(),r.current=!0}),e)}function _(t,e){var r=v(t[e]);return t[e]=void 0,r}function x(t,e,r){return void 0===r&&(r={}),function(n,o){void 0===o&&(o={});var s="string"==typeof n?e[n]:n;if(void 0===s)throw new Error("Renderer Error");return function(t,e){return r=t,function(t){return"function"==typeof t&&!(!(e=Object.getPrototypeOf(t)).prototype||!e.prototype.isReactComponent);var e}(r)||function(t){return"function"==typeof t}(r)||function(t){return"object"==typeof t&&"symbol"==typeof t.$$typeof&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}(r)?i.a.createElement(t,e):t;var r}(s,a({},t,{column:e},r,{},o))}}function q(t,e,r,n,o){var s=t=a({},l,{},e,{},t),u=s.id,c=s.accessor,p=s.Header;if("string"==typeof c){u=u||c;var h=c.split(".");c=function(t){return function(t,e,r){if(!e)return t;var n,i="function"==typeof e?e:JSON.stringify(e),o=P.get(i)||function(){var t=function(t){return function t(e,r){void 0===r&&(r=[]);if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t(e[n],r);else r.push(e);return r}(t).map((function(t){return String(t).replace(".","_")})).join(".").replace(S,".").replace(E,"").split(".")}(e);return P.set(i,t),t}();try{n=o.reduce((function(t,e){return t[e]}),t)}catch(t){}return void 0!==n?n:r}(t,h)}}if(!u&&"string"==typeof p&&p&&(u=p),!u&&t.columns)throw console.error(t),new Error('A column ID (or unique "Header" value) is required!');if(!u)throw console.error(t),new Error("A column ID (or string accessor) is required!");return t=a({Header:function(){return i.a.createElement(i.a.Fragment,null," ")},Footer:function(){return i.a.createElement(i.a.Fragment,null," ")}},t,{id:u,accessor:c,parent:r,depth:n,index:o})}function C(t,e,r,n){return void 0===n&&(n=0),t.map((function(t,i){return(t=q(t,e,r,n,i)).columns&&(t.columns=C(t.columns,e,t,n+1)),t}))}function j(t,e){var r=[];return function t(n,i){var o={headers:[]},s=[],u=n.some((function(t){return t.parent}));n.forEach((function(t){var r=!s.length,n=[].concat(s).reverse()[0];if(t.parent){var i=s.filter((function(e){return e.originalId===t.parent.id}));(r||n.originalId!==t.parent.id)&&s.push(a({},t.parent,{originalId:t.parent.id,id:[t.parent.id,i.length].join("_")}))}else if(u){var c=[t.id,"placeholder"].join("_"),l=s.filter((function(t){return t.originalId===c})),p=q({originalId:c,id:[t.id,"placeholder",l.length].join("_"),placeholderOf:t},e);(r||n.originalId!==p.originalId)&&s.push(p)}(t.parent||u)&&((n=[].concat(s).reverse()[0]).headers=n.headers||[],n.headers.includes(t)||n.headers.push(t)),t.totalHeaderCount=t.headers?t.headers.reduce((function(t,e){return t+e.totalHeaderCount}),0):1,o.headers.push(t)})),r.push(o),s.length&&t(s)}(t),r.reverse()}var P=new Map;function O(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;n+=1)if(void 0!==e[n])return e[n]}function R(t){if("function"==typeof t)return t}function A(t,e){var r=[];return function t(n){n.forEach((function(n){n[e]?t(n[e]):r.push(n)}))}(t),r}function D(t,e){var r=e.manualExpandedKey,n=e.expanded,i=e.expandSubRows,o=void 0===i||i,s=[];return t.forEach((function t(e){e.isExpanded=e.original&&e.original[r]||n[e.id],e.canExpand=e.subRows&&!!e.subRows.length,s.push(e),o&&e.subRows&&e.subRows.length&&e.isExpanded&&e.subRows.forEach(t)})),s}var S=/\[/g,E=/\]/g;var T=function(t){return t.filter((function(t){return t.column.isVisible}))},B=function(t,e){var r=e.column;return a({key:"header_"+r.id,colSpan:r.totalVisibleHeaderCount},t)},I=function(t,e){var r=e.column;return a({key:"footer_"+r.id,colSpan:r.totalVisibleHeaderCount},t)},N=function(t,e){return a({key:"headerGroup_"+e.index},t)},F=function(t,e){return a({key:"footerGroup_"+e.index},t)},k=function(t,e){return a({key:"row_"+e.row.id},t)},L=function(t,e){var r=e.cell;return a({},t,{key:"cell_"+r.row.id+"_"+r.column.id})};function V(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],flatColumns:[],flatColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],useRows:[],cells:[T],prepareRow:[],getTableProps:[],getTableBodyProps:[],getHeaderGroupProps:[N],getFooterGroupProps:[F],getHeaderProps:[B],getFooterProps:[I],getRowProps:[k],getCellProps:[L],useFinalInstance:[]}}c.resetHiddenColumns="resetHiddenColumns",c.toggleHideColumn="toggleHideColumn",c.setHiddenColumns="setHiddenColumns",c.toggleHideAllColumns="toggleHideAllColumns";var M=function(t){t.getToggleHiddenProps=[U],t.getToggleHideAllColumnsProps=[H],t.stateReducers.push($),t.useInstanceBeforeDimensions.push(W),t.headerGroupsDeps.push((function(t,e){var r=e.instance;return[].concat(t,[r.state.hiddenColumns])})),t.useInstance.push(z)};M.pluginName="useColumnVisibility";var U=function(t,e){var r=e.column;return[t,{onChange:function(t){r.toggleHidden(!t.target.checked)},style:{cursor:"pointer"},checked:r.isVisible,title:"Toggle Column Visible"}]},H=function(t,e){var r=e.instance;return[t,{onChange:function(t){r.toggleHideAllColumns(!t.target.checked)},style:{cursor:"pointer"},checked:!r.allColumnsHidden&&!r.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!r.allColumnsHidden&&r.state.hiddenColumns.length}]};function $(t,e,r,n){if(e.type===c.init)return a({hiddenColumns:[]},t);if(e.type===c.resetHiddenColumns)return a({},t,{hiddenColumns:n.initialState.hiddenColumns||[]});if(e.type===c.toggleHideColumn){var i=(void 0!==e.value?e.value:!t.hiddenColumns.includes(e.columnId))?[].concat(t.hiddenColumns,[e.columnId]):t.hiddenColumns.filter((function(t){return t!==e.columnId}));return a({},t,{hiddenColumns:i})}return e.type===c.setHiddenColumns?a({},t,{hiddenColumns:m(e.value,t.hiddenColumns)}):e.type===c.toggleHideAllColumns?a({},t,{hiddenColumns:(void 0!==e.value?e.value:!t.hiddenColumns.length)?n.flatColumns.map((function(t){return t.id})):[]}):void 0}function W(t){var e=t.headers,r=t.state.hiddenColumns;i.a.useRef(!1).current;var n=0;e.forEach((function(t){return n+=function t(e,n){e.isVisible=n&&!r.includes(e.id);var i=0;return e.headers&&e.headers.length?e.headers.forEach((function(r){return i+=t(r,e.isVisible)})):i=e.isVisible?1:0,e.totalVisibleHeaderCount=i,i}(t,!0)}))}function z(t){var e=t.flatHeaders,r=t.dispatch,n=t.flatColumns,o=t.state.hiddenColumns,s=v(t),a=n.length===o.length,u=i.a.useCallback((function(t,e){return r({type:c.toggleHideColumn,columnId:t,value:e})}),[r]),l=i.a.useCallback((function(t){return r({type:c.setHiddenColumns,value:t})}),[r]),p=i.a.useCallback((function(t){return r({type:c.toggleHideAllColumns,value:t})}),[r]),h=_(s().hooks,"getToggleHideAllColumnsProps"),f=d(h(),{instance:s()}),y=_(s().hooks,"getToggleHiddenProps");e.forEach((function(t){t.toggleHidden=function(e){r({type:c.toggleHideColumn,columnId:t.id,value:e})},t.getToggleHiddenProps=d(y(),{instance:s(),column:t})})),Object.assign(t,{allColumnsHidden:a,toggleHideColumn:u,setHiddenColumns:l,toggleHideAllColumns:p,getToggleHideAllColumnsProps:f})}var G={},Q={},J=function(t,e,r){return t},Y=function(t,e){return t.subRows||[]},X=function(t,e,r){return""+(r?[r.id,e].join("."):e)},K=function(t){return t};function Z(t){var e=t.initialState,r=void 0===e?G:e,n=t.defaultColumn,i=void 0===n?Q:n,o=t.getSubRows,s=void 0===o?Y:o,c=t.getRowId,l=void 0===c?X:c,p=t.stateReducer,h=void 0===p?J:p,d=t.useControlledState,f=void 0===d?K:d;return a({},u(t,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:r,defaultColumn:i,getSubRows:s,getRowId:l,stateReducer:h,useControlledState:f})}var tt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];t=Z(t),r=[M].concat(r);var o=i.a.useRef({}),s=v(o.current);Object.assign(s(),a({},t,{plugins:r,hooks:V()})),r.filter(Boolean).forEach((function(t){t(s().hooks)}));var u=_(s().hooks,"useOptions");Object.assign(s(),f(u(),Z(t)));var l=s(),p=l.data,h=l.columns,g=l.initialState,m=l.defaultColumn,w=l.getSubRows,b=l.getRowId,q=l.stateReducer,P=l.useControlledState,O=_(s().hooks,"stateReducers"),R=v(q),D=i.a.useCallback((function(t,e){if(!e.type)throw console.info({action:e}),new Error("Unknown Action 👆");return[].concat(O(),Array.isArray(R())?R():[R()]).reduce((function(r,n){return n(r,e,t,s())||r}),t)}),[O,R,s]),S=i.a.useReducer(D,void 0,(function(){return D(g,{type:c.init})})),E=S[0],T=S[1],B=_(s().hooks,"useControlledState"),I=f([].concat(B(),[P]),E,{instance:s()});Object.assign(s(),{state:I,dispatch:T});var N=_(s().hooks,"columns"),F=_(s().hooks,"columnsDeps"),k=i.a.useMemo((function(){return C(f(N(),h,{instance:s()}),m)}),[m,N,s,h].concat(f(F(),[],{instance:s()})));s().columns=k;var L=i.a.useMemo((function(){return A(k,"columns")}),[k]);s().flatColumns=L;var U=i.a.useMemo((function(){var t=[];return[p.map((function(e,r){return function e(r,n,i,o){void 0===i&&(i=0);var s=r,a={id:b(r,n,o),original:s,index:n,depth:i,cells:[{}]};t.push(a);var u=w(r,n);u&&(a.subRows=u.map((function(t,r){return e(t,r,i+1,a)})));var c=function(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")};return a.cells.map=c,a.cells.filter=c,a.cells.forEach=c,a.cells[0].getCellProps=c,a.values={},L.forEach((function(t){var e=t.id,o=t.accessor;a.values[e]=o?o(r,n,{subRows:u,depth:i,data:p}):void 0})),a}(e,r)})),t]}),[p,L,b,w]),H=U[0],$=U[1];s().rows=H,s().flatRows=$;var W=_(s().hooks,"flatColumns"),z=_(s().hooks,"flatColumnsDeps");L=i.a.useMemo((function(){return f(W(),L,{instance:s()})}),[L,W,s].concat(f(z(),[],{instance:s()}))),s().flatColumns=L;var G=_(s().hooks,"headerGroups"),Q=_(s().hooks,"headerGroupsDeps"),J=i.a.useMemo((function(){return f(G(),j(L,m),s())}),[m,L,G,s].concat(f(Q(),[],{instance:s()})));s().headerGroups=J;var Y=i.a.useMemo((function(){return J.length?J[0].headers:[]}),[J]);s().headers=Y,s().flatHeaders=J.reduce((function(t,e){return[].concat(t,e.headers)}),[]);var X=_(s().hooks,"useInstanceBeforeDimensions");y(X(),s());var K=et(Y),tt=K[0],rt=K[1],nt=K[2];s().totalColumnsMinWidth=tt,s().totalColumnsWidth=rt,s().totalColumnsMaxWidth=nt;var it=_(s().hooks,"useInstance");y(it(),s());var ot=_(s().hooks,"getHeaderProps"),st=_(s().hooks,"getFooterProps");[].concat(s().flatHeaders,s().flatColumns).forEach((function(t){t.render=x(s(),t),t.getHeaderProps=d(ot(),{instance:s(),column:t}),t.getFooterProps=d(st(),{instance:s(),column:t})}));var at=_(s().hooks,"getHeaderGroupProps"),ut=_(s().hooks,"getFooterGroupProps");s().headerGroups=s().headerGroups.filter((function(t,e){return t.headers=t.headers.filter((function(t){return t.headers?function t(e){return e.filter((function(e){return e.headers?t(e.headers):e.isVisible})).length}(t.headers):t.isVisible})),!!t.headers.length&&(t.getHeaderGroupProps=d(at(),{instance:s(),headerGroup:t,index:e}),t.getFooterGroupProps=d(ut(),{instance:s(),headerGroup:t,index:e}),!0)})),s().footerGroups=[].concat(s().headerGroups).reverse();var ct=_(s().hooks,"useRows");s().rows=f(ct(),s().rows,{instance:s()});var lt=_(s().hooks,"prepareRow"),pt=_(s().hooks,"getRowProps"),ht=_(s().hooks,"getCellProps"),dt=_(s().hooks,"cells");s().prepareRow=i.a.useCallback((function(t){t.getRowProps=d(pt(),{instance:s(),row:t}),t.allCells=L.map((function(e){var r={column:e,row:t,value:t.values[e.id]};return r.getCellProps=d(ht(),{instance:s(),cell:r}),r.render=x(s(),e,{row:t,cell:r}),r})),t.cells=f(dt(),t.allCells,{instance:s()}),y(lt(),t,s())}),[pt,s,L,dt,lt,ht]);var ft=_(s().hooks,"getTableProps");s().getTableProps=d(ft(),{instance:s()});var yt=_(s().hooks,"getTableBodyProps");s().getTableBodyProps=d(yt(),{instance:s()});var gt=_(s().hooks,"useFinalInstance");return y(gt(),s()),s()};function et(t,e){void 0===e&&(e=0);var r=0,n=0,i=0;return t.forEach((function(t){var o=t.headers;if(t.totalLeft=e,o&&o.length){var s=et(o,e),a=s[0],u=s[1],c=s[2];t.totalMinWidth=a,t.totalWidth=u,t.totalMaxWidth=c}else t.totalMinWidth=t.minWidth,t.totalWidth=Math.min(Math.max(t.minWidth,t.width),t.maxWidth),t.totalMaxWidth=t.maxWidth;t.isVisible&&(e+=t.totalWidth,r+=t.totalMinWidth,n+=t.totalWidth,i+=t.totalMaxWidth)})),[r,n,i]}c.toggleExpanded="toggleExpanded",c.toggleAllExpanded="toggleAllExpanded",c.setExpanded="setExpanded",c.resetExpanded="resetExpanded";var rt=function(t,e,r){return t=t.filter((function(t){return e.some((function(e){var n=t.values[e];return String(n).toLowerCase().includes(String(r).toLowerCase())}))}))};rt.autoRemove=function(t){return!t};var nt=function(t,e,r){return t.filter((function(t){return e.some((function(e){var n=t.values[e];return void 0===n||String(n).toLowerCase()===String(r).toLowerCase()}))}))};nt.autoRemove=function(t){return!t};var it=function(t,e,r){return t.filter((function(t){return e.some((function(e){var n=t.values[e];return void 0===n||String(n)===String(r)}))}))};it.autoRemove=function(t){return!t};var ot=function(t,e,r){return t.filter((function(t){return e.some((function(e){var n=t.values[e];return r.includes(n)}))}))};ot.autoRemove=function(t){return!t||!t.length};var st=function(t,e,r){return t.filter((function(t){return e.some((function(e){var n=t.values[e];return n&&n.length&&r.every((function(t){return n.includes(t)}))}))}))};st.autoRemove=function(t){return!t||!t.length};var at=function(t,e,r){return t.filter((function(t){return e.some((function(e){return t.values[e]===r}))}))};at.autoRemove=function(t){return void 0===t};var ut=function(t,e,r){return t.filter((function(t){return e.some((function(e){return t.values[e]==r}))}))};ut.autoRemove=function(t){return null==t};var ct=function(t,e,r){var n=r||[],i=n[0],o=n[1];if((i="number"==typeof i?i:-1/0)>(o="number"==typeof o?o:1/0)){var s=i;i=o,o=s}return t.filter((function(t){return e.some((function(e){var r=t.values[e];return r>=i&&r<=o}))}))};ct.autoRemove=function(t){return!t||"number"!=typeof t[0]&&"number"!=typeof t[1]};c.resetFilters="resetFilters",c.setFilter="setFilter",c.setAllFilters="setAllFilters";c.resetGlobalFilter="resetGlobalFilter",c.setGlobalFilter="setGlobalFilter";c.resetGroupBy="resetGroupBy",c.toggleGroupBy="toggleGroupBy";var lt=/([0-9]+)/gm;function pt(t,e){return t===e?0:t>e?1:-1}function ht(t,e){return t.values[e]}function dt(t){return"number"==typeof t?isNaN(t)||t===1/0||t===-1/0?"":String(t):"string"==typeof t?t:""}var ft=Object.freeze({__proto__:null,alphanumeric:function(t,e,r){var n=ht(t,r),i=ht(e,r);for(n=dt(n),i=dt(i),n=n.split(lt).filter(Boolean),i=i.split(lt).filter(Boolean);n.length&&i.length;){var o=n.shift(),s=i.shift(),a=parseInt(o,10),u=parseInt(s,10),c=[a,u].sort();if(isNaN(c[0])){if(o>s)return 1;if(s>o)return-1}else{if(isNaN(c[1]))return isNaN(a)?-1:1;if(a>u)return 1;if(u>a)return-1}}return n.length-i.length},datetime:function(t,e,r){var n=ht(t,r),i=ht(e,r);return pt(n=n.getTime(),i=i.getTime())},basic:function(t,e,r){return pt(ht(t,r),ht(e,r))}});c.resetSortBy="resetSortBy",c.toggleSortBy="toggleSortBy",c.clearSortBy="clearSortBy",l.sortType="alphanumeric",l.sortDescFirst=!1;var yt=function(t){t.getSortByToggleProps=[gt],t.stateReducers.push(mt),t.useInstance.push(vt)};yt.pluginName="useSortBy";var gt=function(t,e){var r=e.instance,n=e.column,i=r.isMultiSortEvent,o=void 0===i?function(t){return t.shiftKey}:i;return[t,{onClick:n.canSort?function(t){t.persist(),n.toggleSortBy(void 0,!r.disableMultiSort&&o(t))}:void 0,style:{cursor:n.canSort?"pointer":void 0},title:n.canSort?"Toggle SortBy":void 0}]};function mt(t,e,r,n){if(e.type===c.init)return a({sortBy:[]},t);if(e.type===c.resetSortBy)return a({},t,{sortBy:n.initialState.sortBy||[]});if(e.type===c.clearSortBy)return a({},t,{sortBy:t.sortBy.filter((function(t){return t.id!==e.columnId}))});if(e.type===c.toggleSortBy){var i,o=e.columnId,s=e.desc,u=e.multi,l=n.flatColumns,p=n.disableMultiSort,h=n.disableSortRemove,d=n.disableMultiRemove,f=n.maxMultiSortColCount,y=void 0===f?Number.MAX_SAFE_INTEGER:f,g=t.sortBy,m=l.find((function(t){return t.id===o})).sortDescFirst,v=g.find((function(t){return t.id===o})),w=g.findIndex((function(t){return t.id===o})),b=null!=s,_=[];return"toggle"!==(i=!p&&u?v?"toggle":"add":w!==g.length-1?"replace":v?"toggle":"replace")||h||b||u&&d||!(v&&v.desc&&!m||!v.desc&&m)||(i="remove"),"replace"===i?_=[{id:o,desc:b?s:m}]:"add"===i?(_=[].concat(g,[{id:o,desc:b?s:m}])).splice(0,_.length-y):"toggle"===i?_=g.map((function(t){return t.id===o?a({},t,{desc:b?s:!v.desc}):t})):"remove"===i&&(_=g.filter((function(t){return t.id!==o}))),a({},t,{sortBy:_})}}function vt(t){var e=t.data,r=t.rows,n=t.flatColumns,o=t.orderByFn,s=void 0===o?p:o,a=t.sortTypes,u=t.manualSortBy,l=t.defaultCanSort,h=t.disableSortBy,f=t.flatHeaders,y=t.state.sortBy,m=t.dispatch,w=t.plugins,x=t.autoResetSortBy,q=void 0===x||x;g(w,["useFilters"],"useSortBy",[]);var C=function(t,e,r){m({type:c.toggleSortBy,columnId:t,desc:e,multi:r})},j=v(t),P=_(j().hooks,"getSortByToggleProps");f.forEach((function(t){var e=t.accessor,r=t.canSort,n=t.disableSortBy,i=t.id,o=e?O(!0!==n&&void 0,!0!==h&&void 0,!0):O(l,r,!1);t.canSort=o,t.canSort&&(t.toggleSortBy=function(e,r){return C(t.id,e,r)},t.clearSortBy=function(){m({type:c.clearSortBy,columnId:t.id})}),t.getSortByToggleProps=d(P(),{instance:j(),column:t});var s=y.find((function(t){return t.id===i}));t.isSorted=!!s,t.sortedIndex=y.findIndex((function(t){return t.id===i})),t.isSortedDesc=t.isSorted?s.desc:void 0}));var A=i.a.useMemo((function(){if(u||!y.length)return r;var t=y.filter((function(t){return n.find((function(e){return e.id===t.id}))}));return function e(r){var i=s(r,t.map((function(t){var e=n.find((function(e){return e.id===t.id}));if(!e)throw new Error("React-Table: Could not find a column with id: "+t.id+" while sorting");var r=e.sortType,i=R(r)||(a||{})[r]||ft[r];if(!i)throw new Error("React-Table: Could not find a valid sortType of '"+r+"' for column '"+t.id+"'.");return function(e,r){return i(e,r,t.id)}})),t.map((function(t){var e=n.find((function(e){return e.id===t.id}));return e&&e.sortInverted?t.desc:!t.desc})));return i.forEach((function(t){!t.subRows||t.subRows.length<=1||(t.subRows=e(t.subRows))})),i}(r)}),[u,y,r,n,s,a]),D=v(q);b((function(){D()&&m({type:c.resetSortBy})}),[u?null:e]),Object.assign(t,{preSortedRows:r,sortedRows:A,rows:A,toggleSortBy:C})}c.resetPage="resetPage",c.gotoPage="gotoPage",c.setPageSize="setPageSize";var wt=function(t){t.stateReducers.push(bt),t.useInstance.push(_t)};function bt(t,e,r,n){if(e.type===c.init)return a({pageSize:10,pageIndex:0},t);if(e.type===c.resetPage)return a({},t,{pageIndex:n.initialState.pageIndex||0});if(e.type===c.gotoPage){var i=n.pageCount,o=m(e.pageIndex,t.pageIndex);return o<0||o>i-1?t:a({},t,{pageIndex:o})}if(e.type===c.setPageSize){var s=e.pageSize,u=t.pageSize*t.pageIndex;return a({},t,{pageIndex:Math.floor(u/s),pageSize:s})}}function _t(t){var e=t.rows,r=t.autoResetPage,n=void 0===r||r,o=t.manualExpandedKey,s=void 0===o?"expanded":o,a=t.plugins,u=t.pageCount,l=t.paginateExpandedRows,p=void 0===l||l,h=t.expandSubRows,d=void 0===h||h,f=t.state,y=f.pageSize,m=f.pageIndex,w=f.expanded,_=f.filters,x=f.groupBy,q=f.sortBy,C=t.dispatch,j=t.data,P=t.manualPagination,O=t.manualFilters,R=t.manualGroupBy,A=t.manualSortBy;g(a,["useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination",[]);var S=v(n);b((function(){S()&&C({type:c.resetPage})}),[C,P?null:j,P||O?null:_,P||R?null:x,P||A?null:q]);var E=P?u:Math.ceil(e.length/y),T=i.a.useMemo((function(){return E>0?[].concat(new Array(E)).map((function(t,e){return e})):[]}),[E]),B=i.a.useMemo((function(){var t;if(P)t=e;else{var r=y*m,n=r+y;t=e.slice(r,n)}return p?t:D(t,{manualExpandedKey:s,expanded:w,expandSubRows:d})}),[d,w,s,P,m,y,p,e]),I=m>0,N=-1===E||m<E-1,F=i.a.useCallback((function(t){C({type:c.gotoPage,pageIndex:t})}),[C]),k=i.a.useCallback((function(){return F((function(t){return t-1}))}),[F]),L=i.a.useCallback((function(){return F((function(t){return t+1}))}),[F]),V=i.a.useCallback((function(t){C({type:c.setPageSize,pageSize:t})}),[C]);Object.assign(t,{pageOptions:T,pageCount:E,page:B,canPreviousPage:I,canNextPage:N,gotoPage:F,previousPage:k,nextPage:L,setPageSize:V})}wt.pluginName="usePagination";c.resetSelectedRows="resetSelectedRows",c.toggleAllRowsSelected="toggleAllRowsSelected",c.toggleRowSelected="toggleRowSelected";c.setRowState="setRowState",c.resetRowState="resetRowState";c.resetColumnOrder="resetColumnOrder",c.setColumnOrder="setColumnOrder";l.canResize=!0,c.columnStartResizing="columnStartResizing",c.columnResizing="columnResizing",c.columnDoneResizing="columnDoneResizing";var xt={position:"absolute",top:0},qt=function(t){t.getTableBodyProps.push(Ct),t.getRowProps.push(Ct),t.getHeaderGroupProps.push(Ct),t.useInstance.push(jt),t.getHeaderProps.push((function(t,e){var r=e.column;return[t,{style:a({},xt,{left:r.totalLeft+"px",width:r.totalWidth+"px"})}]})),t.getCellProps.push((function(t,e){var r=e.cell;return[t,{style:a({},xt,{left:r.column.totalLeft+"px",width:r.column.totalWidth+"px"})}]}))};qt.pluginName="useAbsoluteLayout";var Ct=function(t,e){return[t,{style:{position:"relative",width:e.instance.totalColumnsWidth+"px"}}]};function jt(t){g(t.plugins,[],qt.pluginName,["useResizeColumns"])}function Pt(){return(Pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Ot(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}var Rt,At=r(1),Dt=r.n(At),St=r(4),Et=r.n(St);function Tt(t,e){return void 0===t&&(t=""),void 0===e&&(e=Rt),e?t.split(" ").map((function(t){return e[t]||t})).join(" "):t}var Bt="object"==typeof window&&window.Element||function(){};Dt.a.oneOfType([Dt.a.string,Dt.a.func,function(t,e,r){if(!(t[e]instanceof Bt))return new Error("Invalid prop `"+e+"` supplied to `"+r+"`. Expected prop to be an instance of Element. Validation failed.")},Dt.a.shape({current:Dt.a.any})]);var It=Dt.a.oneOfType([Dt.a.func,Dt.a.string,Dt.a.shape({$$typeof:Dt.a.symbol,render:Dt.a.func}),Dt.a.arrayOf(Dt.a.oneOfType([Dt.a.func,Dt.a.string,Dt.a.shape({$$typeof:Dt.a.symbol,render:Dt.a.func})]))]);"undefined"==typeof window||!window.document||window.document.createElement;function Nt(t){var e=typeof t;return null!=t&&("object"===e||"function"===e)}var Ft={className:Dt.a.string,cssModule:Dt.a.object,size:Dt.a.string,bordered:Dt.a.bool,borderless:Dt.a.bool,striped:Dt.a.bool,dark:Dt.a.bool,hover:Dt.a.bool,responsive:Dt.a.oneOfType([Dt.a.bool,Dt.a.string]),tag:It,responsiveTag:It,innerRef:Dt.a.oneOfType([Dt.a.func,Dt.a.string,Dt.a.object])},kt=function(t){var e=t.className,r=t.cssModule,n=t.size,o=t.bordered,s=t.borderless,a=t.striped,u=t.dark,c=t.hover,l=t.responsive,p=t.tag,h=t.responsiveTag,d=t.innerRef,f=Ot(t,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),y=Tt(Et()(e,"table",!!n&&"table-"+n,!!o&&"table-bordered",!!s&&"table-borderless",!!a&&"table-striped",!!u&&"table-dark",!!c&&"table-hover"),r),g=i.a.createElement(p,Pt({},f,{ref:d,className:y}));if(l){var m=Tt(!0===l?"table-responsive":"table-responsive-"+l,r);return i.a.createElement(h,{className:m},g)}return g};kt.propTypes=Ft,kt.defaultProps={tag:"table",responsiveTag:"div"};var Lt=kt,Vt=Dt.a.oneOfType([Dt.a.number,Dt.a.string]),Mt={tag:It,noGutters:Dt.a.bool,className:Dt.a.string,cssModule:Dt.a.object,form:Dt.a.bool,xs:Vt,sm:Vt,md:Vt,lg:Vt,xl:Vt},Ut={tag:"div",widths:["xs","sm","md","lg","xl"]},Ht=function(t){var e=t.className,r=t.cssModule,n=t.noGutters,o=t.tag,s=t.form,a=t.widths,u=Ot(t,["className","cssModule","noGutters","tag","form","widths"]),c=[];a.forEach((function(e,r){var n=t[e];if(delete u[e],n){var i=!r;c.push(i?"row-cols-"+n:"row-cols-"+e+"-"+n)}}));var l=Tt(Et()(e,n?"no-gutters":null,s?"form-row":"row",c),r);return i.a.createElement(o,Pt({},u,{className:l}))};Ht.propTypes=Mt,Ht.defaultProps=Ut;var $t=Ht,Wt=Dt.a.oneOfType([Dt.a.number,Dt.a.string]),zt=Dt.a.oneOfType([Dt.a.bool,Dt.a.number,Dt.a.string,Dt.a.shape({size:Dt.a.oneOfType([Dt.a.bool,Dt.a.number,Dt.a.string]),order:Wt,offset:Wt})]),Gt={tag:It,xs:zt,sm:zt,md:zt,lg:zt,xl:zt,className:Dt.a.string,cssModule:Dt.a.object,widths:Dt.a.array},Qt={tag:"div",widths:["xs","sm","md","lg","xl"]},Jt=function(t,e,r){return!0===r||""===r?t?"col":"col-"+e:"auto"===r?t?"col-auto":"col-"+e+"-auto":t?"col-"+r:"col-"+e+"-"+r},Yt=function(t){var e=t.className,r=t.cssModule,n=t.widths,o=t.tag,s=Ot(t,["className","cssModule","widths","tag"]),a=[];n.forEach((function(e,n){var i=t[e];if(delete s[e],i||""===i){var o=!n;if(Nt(i)){var u,c=o?"-":"-"+e+"-",l=Jt(o,e,i.size);a.push(Tt(Et()(((u={})[l]=i.size||""===i.size,u["order"+c+i.order]=i.order||0===i.order,u["offset"+c+i.offset]=i.offset||0===i.offset,u)),r))}else{var p=Jt(o,e,i);a.push(p)}}})),a.length||a.push("col");var u=Tt(Et()(e,a),r);return i.a.createElement(o,Pt({},s,{className:u}))};Yt.propTypes=Gt,Yt.defaultProps=Qt;var Xt=Yt,Kt={children:Dt.a.node,className:Dt.a.string,listClassName:Dt.a.string,cssModule:Dt.a.object,size:Dt.a.string,tag:It,listTag:It,"aria-label":Dt.a.string},Zt=function(t){var e,r=t.className,n=t.listClassName,o=t.cssModule,s=t.size,a=t.tag,u=t.listTag,c=t["aria-label"],l=Ot(t,["className","listClassName","cssModule","size","tag","listTag","aria-label"]),p=Tt(Et()(r),o),h=Tt(Et()(n,"pagination",((e={})["pagination-"+s]=!!s,e)),o);return i.a.createElement(a,{className:p,"aria-label":c},i.a.createElement(u,Pt({},l,{className:h})))};Zt.propTypes=Kt,Zt.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"};var te=Zt;function ee(){return(ee=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var re=function(t){var e=t.columns,r=t.data,n=t.serverside,o=tt({columns:e,data:r,initialState:{pageIndex:0},manualPagination:n},yt,wt),s=o.getTableProps,a=o.getTableBodyProps,u=o.headerGroups,c=o.prepareRow,l=o.page,p=o.canPreviousPage,h=o.canNextPage,d=(o.pageOptions,o.pageCount),f=(o.gotoPage,o.nextPage),y=o.previousPage,g=o.setPageSize,m=o.state,v=m.pageIndex,w=m.pageSize;return i.a.createElement("span",null,i.a.createElement(Lt,ee({},s(),{hover:!0}),i.a.createElement("thead",null,u.map((function(t){return i.a.createElement("tr",t.getHeaderGroupProps(),t.headers.map((function(t){return i.a.createElement("th",t.getHeaderProps(t.getSortByToggleProps()),t.render("Header"),i.a.createElement("span",null,t.isSorted?t.isSortedDesc?" 🔽":" 🔼":""))})))}))),i.a.createElement("tbody",a(),l.map((function(t,e){return c(t),i.a.createElement("tr",t.getRowProps(),t.cells.map((function(t){return i.a.createElement("td",t.getCellProps(),t.render("Cell"))})))})))),i.a.createElement($t,{md:12},i.a.createElement(Xt,{md:6},i.a.createElement(te,{className:"pagination"},i.a.createElement("button",{onClick:function(){return y()},disabled:!p},"<")," ",i.a.createElement("button",{onClick:function(){return f()},disabled:!h},">")," ")),i.a.createElement(Xt,{md:6,className:"justify-content-end"},i.a.createElement("span",null,"Page"," ",i.a.createElement("strong",null,v+1," of ",d)," "),i.a.createElement("select",{value:w,onChange:function(t){g(Number(t.target.value))}},[10,20,30,40,50].map((function(t){return i.a.createElement("option",{key:t,value:t},"Show ",t)}))))))};function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var oe=function(t){var e=t.bindings,r=t.view,o=t.query,a=(t.serverside,ie(Object(n.useMemo)((function(){return function(){r=r||{};var t=s.a.View.table();r.rules&&t.loadJSON(r.table,r.rules);var n=new s.a.WOQLResult({bindings:e},o),a=new s.a.WOQLTable(!1,t);a.setResult(n,o);var u=function(t){var e={columns:t.getColumnsToRender().map((function(e,r){return{Header:e,id:e,accessor:e,selector:e,canSort:t.isSortableColumn(e),filterable:t.isFilterableColumn(e),Cell:function(t){return function(t,e){var r;r="object"===ne(t.cell.value)?t.cell.value["@value"]:t.cell.value;return i.a.createElement("span",null,r)}(t)}}}))};t.config.header()?e.Header=t.config.header():e.Header="waaa";return[e]}(a);return[e,u]}()}),[e]),2)),u=a[0],c=a[1];return i.a.createElement(re,{data:u,columns:c})};r.d(e,"WOQLTable",(function(){return oe}))}]);